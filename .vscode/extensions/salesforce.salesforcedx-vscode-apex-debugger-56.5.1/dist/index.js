"use strict";var lE=Object.create;var vo=Object.defineProperty;var fE=Object.getOwnPropertyDescriptor;var dE=Object.getOwnPropertyNames;var hE=Object.getPrototypeOf,pE=Object.prototype.hasOwnProperty;var f=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),vE=(r,e)=>{for(var t in e)vo(r,t,{get:e[t],enumerable:!0})},If=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of dE(e))!pE.call(r,i)&&i!==t&&vo(r,i,{get:()=>e[i],enumerable:!(n=fE(e,i))||n.enumerable});return r};var It=(r,e,t)=>(t=r!=null?lE(hE(r)):{},If(e||!r||!r.__esModule?vo(t,"default",{value:r,enumerable:!0}):t,r)),gE=r=>If(vo({},"__esModule",{value:!0}),r);var ut=(r,e,t)=>new Promise((n,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(r,e)).next())});var Af=f(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.TRIGGER_EXCEPTION_PREFIX=H.SALESFORCE_EXCEPTION_PREFIX=H.EXCEPTION_BREAKPOINT_BREAK_MODE_NEVER=H.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS=H.LIVESHARE_DEBUG_TYPE_REQUEST=H.LIST_EXCEPTION_BREAKPOINTS_REQUEST=H.EXCEPTION_BREAKPOINT_REQUEST=H.HOTSWAP_REQUEST=H.SHOW_MESSAGE_EVENT=H.DEFAULT_IDLE_WARN3_MS=H.DEFAULT_IDLE_WARN2_MS=H.DEFAULT_IDLE_WARN1_MS=H.DEFAULT_IDLE_TIMEOUT_MS=H.DEFAULT_LOCK_TIMEOUT_MS=H.DEFAULT_STREAMING_TIMEOUT_MS=H.LIVESHARE_DEBUGGER_TYPE=H.DEBUGGER_TYPE=H.DEBUGGER_LAUNCH_TYPE=void 0;H.DEBUGGER_LAUNCH_TYPE="launch";H.DEBUGGER_TYPE="apex";H.LIVESHARE_DEBUGGER_TYPE="vslsShare";H.DEFAULT_STREAMING_TIMEOUT_MS=14400;H.DEFAULT_LOCK_TIMEOUT_MS=1e4;H.DEFAULT_IDLE_TIMEOUT_MS=12e5;H.DEFAULT_IDLE_WARN1_MS=6e5;H.DEFAULT_IDLE_WARN2_MS=9e5;H.DEFAULT_IDLE_WARN3_MS=108e4;H.SHOW_MESSAGE_EVENT="showMessage";H.HOTSWAP_REQUEST="hotswap";H.EXCEPTION_BREAKPOINT_REQUEST="exceptionBreakpoint";H.LIST_EXCEPTION_BREAKPOINTS_REQUEST="listExceptionBreakpoints";H.LIVESHARE_DEBUG_TYPE_REQUEST="debugType";H.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS="always";H.EXCEPTION_BREAKPOINT_BREAK_MODE_NEVER="never";H.SALESFORCE_EXCEPTION_PREFIX="com/salesforce/api/exception/";H.TRIGGER_EXCEPTION_PREFIX="__sfdc_trigger/"});var La=f(vt=>{"use strict";var _E=vt&&vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),mE=vt&&vt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&_E(e,r,t)};Object.defineProperty(vt,"__esModule",{value:!0});vt.VscodeDebuggerMessageType=void 0;mE(Af(),vt);var yE;(function(r){r[r.Info=0]="Info",r[r.Warning=1]="Warning",r[r.Error=2]="Error"})(yE=vt.VscodeDebuggerMessageType||(vt.VscodeDebuggerMessageType={}))});var li=f(Pf=>{"use strict";var bE=typeof window<"u"&&window,EE=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,CE=typeof global<"u"&&global,Rf=bE||CE||EE;Pf.root=Rf;(function(){if(!Rf)throw new Error("RxJS could not find any global context (window, self, global)")})()});var go=f(Df=>{"use strict";function SE(r){return typeof r=="function"}Df.isFunction=SE});var ja=f(qf=>{"use strict";qf.isArray=Array.isArray||function(r){return r&&typeof r.length=="number"}});var Ff=f(Nf=>{"use strict";function wE(r){return r!=null&&typeof r=="object"}Nf.isObject=wE});var _o=f(kf=>{"use strict";kf.errorObject={e:{}}});var Ma=f(Mf=>{"use strict";var Lf=_o(),jf;function OE(){try{return jf.apply(this,arguments)}catch(r){return Lf.errorObject.e=r,Lf.errorObject}}function TE(r){return jf=r,OE}Mf.tryCatch=TE});var Uf=f(mo=>{"use strict";var xE=mo&&mo.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},IE=function(r){xE(e,r);function e(t){r.call(this),this.errors=t;var n=Error.call(this,t?t.length+` errors occurred during unsubscription:
  `+t.map(function(i,o){return o+1+") "+i.toString()}).join(`
  `):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return e}(Error);mo.UnsubscriptionError=IE});var bo=f(Bf=>{"use strict";var AE=ja(),RE=Ff(),PE=go(),Hf=Ma(),zr=_o(),yo=Uf(),DE=function(){function r(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var n=this,i=n._parent,o=n._parents,s=n._unsubscribe,a=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var l=-1,c=o?o.length:0;i;)i.remove(this),i=++l<c&&o[l]||null;if(PE.isFunction(s)){var u=Hf.tryCatch(s).call(this);u===zr.errorObject&&(e=!0,t=t||(zr.errorObject.e instanceof yo.UnsubscriptionError?Gf(zr.errorObject.e.errors):[zr.errorObject.e]))}if(AE.isArray(a))for(l=-1,c=a.length;++l<c;){var d=a[l];if(RE.isObject(d)){var u=Hf.tryCatch(d.unsubscribe).call(d);if(u===zr.errorObject){e=!0,t=t||[];var m=zr.errorObject.e;m instanceof yo.UnsubscriptionError?t=t.concat(Gf(m.errors)):t.push(m)}}}if(e)throw new yo.UnsubscriptionError(t)}},r.prototype.add=function(e){if(!e||e===r.EMPTY)return r.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new r(e);case"object":if(t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(typeof t._addParent!="function"){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(t),t._addParent(this),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.prototype._addParent=function(e){var t=this,n=t._parent,i=t._parents;!n||n===e?this._parent=e:i?i.indexOf(e)===-1&&i.push(e):this._parents=[e]},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();Bf.Subscription=DE;function Gf(r){return r.reduce(function(e,t){return e.concat(t instanceof yo.UnsubscriptionError?t.errors:t)},[])}});var Ua=f(Vf=>{"use strict";Vf.empty={closed:!0,next:function(r){},error:function(r){throw r},complete:function(){}}});var Ga=f(Eo=>{"use strict";var qE=li(),Ha=qE.root.Symbol;Eo.rxSubscriber=typeof Ha=="function"&&typeof Ha.for=="function"?Ha.for("rxSubscriber"):"@@rxSubscriber";Eo.$$rxSubscriber=Eo.rxSubscriber});var $f=f(Co=>{"use strict";var Wf=Co&&Co.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},zf=go(),NE=bo(),Ba=Ua(),Va=Ga(),za=function(r){Wf(e,r);function e(t,n,i){switch(r.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Ba.empty;break;case 1:if(!t){this.destination=Ba.empty;break}if(typeof t=="object"){if(FE(t)){var o=t[Va.rxSubscriber]();this.syncErrorThrowable=o.syncErrorThrowable,this.destination=o,o.add(this)}else this.syncErrorThrowable=!0,this.destination=new Xf(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new Xf(this,t,n,i);break}}return e.prototype[Va.rxSubscriber]=function(){return this},e.create=function(t,n,i){var o=new e(t,n,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,n=t._parent,i=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=n,this._parents=i,this},e}(NE.Subscription);Co.Subscriber=za;var Xf=function(r){Wf(e,r);function e(t,n,i,o){r.call(this),this._parentSubscriber=t;var s,a=this;zf.isFunction(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==Ba.empty&&(a=Object.create(n),zf.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=i,this._complete=o}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber;if(this._error)n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)n.syncErrorValue=t,n.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),t}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};n.syncErrorThrowable?(this.__tryOrSetError(n,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(i){throw this.unsubscribe(),i}},e.prototype.__tryOrSetError=function(t,n,i){try{n.call(this._context,i)}catch(o){return t.syncErrorValue=o,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(za);function FE(r){return r instanceof za||"syncErrorThrowable"in r&&r[Va.rxSubscriber]}});var Kf=f(Zf=>{"use strict";var Xa=$f(),Yf=Ga(),kE=Ua();function LE(r,e,t){if(r){if(r instanceof Xa.Subscriber)return r;if(r[Yf.rxSubscriber])return r[Yf.rxSubscriber]()}return!r&&!e&&!t?new Xa.Subscriber(kE.empty):new Xa.Subscriber(r,e,t)}Zf.toSubscriber=LE});var Qf=f(fi=>{"use strict";var jE=li();function Jf(r){var e,t=r.Symbol;return typeof t=="function"?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}fi.getSymbolObservable=Jf;fi.observable=Jf(jE.root);fi.$$observable=fi.observable});var td=f(ed=>{"use strict";function ME(){}ed.noop=ME});var nd=f(Wa=>{"use strict";var UE=td();function HE(){for(var r=[],e=0;e<arguments.length;e++)r[e-0]=arguments[e];return rd(r)}Wa.pipe=HE;function rd(r){return r?r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}:UE.noop}Wa.pipeFromArray=rd});var Xr=f(id=>{"use strict";var Ze=li(),GE=Kf(),BE=Qf(),VE=nd(),zE=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this.operator,o=GE.toSubscriber(e,t,n);if(i?i.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},r.prototype.forEach=function(e,t){var n=this;if(t||(Ze.root.Rx&&Ze.root.Rx.config&&Ze.root.Rx.config.Promise?t=Ze.root.Rx.config.Promise:Ze.root.Promise&&(t=Ze.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(i,o){var s;s=n.subscribe(function(a){if(s)try{e(a)}catch(l){o(l),s.unsubscribe()}else e(a)},o,i)})},r.prototype._subscribe=function(e){return this.source.subscribe(e)},r.prototype[BE.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.length===0?this:VE.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;if(e||(Ze.root.Rx&&Ze.root.Rx.config&&Ze.root.Rx.config.Promise?e=Ze.root.Rx.config.Promise:Ze.root.Promise&&(e=Ze.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(n,i){var o;t.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},r.create=function(e){return new r(e)},r}();id.Observable=zE});var ld=f((KP,cd)=>{"use strict";var ud=require("child_process"),od=ud.spawn,XE=ud.exec;cd.exports=function(r,e,t){if(typeof e=="function"&&t===void 0&&(t=e,e=void 0),r=parseInt(r),Number.isNaN(r)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},i={};switch(n[r]=[],i[r]=1,process.platform){case"win32":XE("taskkill /pid "+r+" /T /F",t);break;case"darwin":$a(r,n,i,function(o){return od("pgrep",["-P",o])},function(){sd(n,e,t)});break;default:$a(r,n,i,function(o){return od("ps",["-o","pid","--no-headers","--ppid",o])},function(){sd(n,e,t)});break}};function sd(r,e,t){var n={};try{Object.keys(r).forEach(function(i){r[i].forEach(function(o){n[o]||(ad(o,e),n[o]=1)}),n[i]||(ad(i,e),n[i]=1)})}catch(i){if(t)return t(i);throw i}if(t)return t()}function ad(r,e){try{process.kill(parseInt(r,10),e)}catch(t){if(t.code!=="ESRCH")throw t}}function $a(r,e,t,n,i){var o=n(r),s="";o.stdout.on("data",function(c){var c=c.toString("ascii");s+=c});var a=function(l){if(delete t[r],l!=0){Object.keys(t).length==0&&i();return}s.match(/\d+/g).forEach(function(c){c=parseInt(c,10),e[r].push(c),e[c]=[],t[c]=1,$a(c,e,t,n,i)})};o.on("close",a)}});var Ka=f(fe=>{"use strict";var Ya=fe&&fe.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(fe,"__esModule",{value:!0});fe.CliCommandExecution=fe.KILL_CODE=fe.CANCELLATION_INTERVAL=fe.NO_STDERR_ERROR=fe.NO_STDOUT_ERROR=fe.NO_PID_ERROR=void 0;var di=Xr(),WE=ld();fe.NO_PID_ERROR="No process associated with sfdx command.";fe.NO_STDOUT_ERROR="No stdout found for childProcess";fe.NO_STDERR_ERROR="No stderr found for childProcess";fe.CANCELLATION_INTERVAL=1e3;fe.KILL_CODE="SIGKILL";var Za=class{constructor(e,t,n){if(this.command=e,this.cancellationToken=n,!t.pid)throw new Error(fe.NO_PID_ERROR);this.childProcessPid=t.pid;let i;if(this.processExitSubject=di.Observable.fromEvent(t,"exit"),this.processExitSubject.subscribe(()=>{i&&i.unsubscribe()}),this.processErrorSubject=di.Observable.fromEvent(t,"error"),this.processErrorSubject.subscribe(()=>{i&&i.unsubscribe()}),!t.stdout)throw new Error(fe.NO_STDOUT_ERROR);if(this.stdoutSubject=di.Observable.fromEvent(t.stdout,"data"),!t.stderr)throw new Error(fe.NO_STDERR_ERROR);this.stderrSubject=di.Observable.fromEvent(t.stderr,"data"),n&&(i=di.Observable.interval(fe.CANCELLATION_INTERVAL).subscribe(()=>Ya(this,void 0,void 0,function*(){if(n.isCancellationRequested)try{yield this.killExecution()}catch(s){console.log(s)}})))}killExecution(e=fe.KILL_CODE){return Ya(this,void 0,void 0,function*(){return $E(this.childProcessPid,e)})}};fe.CliCommandExecution=Za;function $E(r,e){return Ya(this,void 0,void 0,function*(){return new Promise((t,n)=>{WE(r,e,i=>{i?n(i):t()})})})}});var hd=f(So=>{"use strict";var YE=So&&So.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},ZE=Xr(),KE=Ma(),JE=go(),fd=_o(),QE=bo(),dd=Object.prototype.toString;function eC(r){return!!r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function tC(r){return!!r&&typeof r.on=="function"&&typeof r.off=="function"}function rC(r){return!!r&&dd.call(r)==="[object NodeList]"}function nC(r){return!!r&&dd.call(r)==="[object HTMLCollection]"}function iC(r){return!!r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}var oC=function(r){YE(e,r);function e(t,n,i,o){r.call(this),this.sourceObj=t,this.eventName=n,this.selector=i,this.options=o}return e.create=function(t,n,i,o){return JE.isFunction(i)&&(o=i,i=void 0),new e(t,n,o,i)},e.setupSubscription=function(t,n,i,o,s){var a;if(rC(t)||nC(t))for(var l=0,c=t.length;l<c;l++)e.setupSubscription(t[l],n,i,o,s);else if(iC(t)){var u=t;t.addEventListener(n,i,s),a=function(){return u.removeEventListener(n,i,s)}}else if(tC(t)){var d=t;t.on(n,i),a=function(){return d.off(n,i)}}else if(eC(t)){var m=t;t.addListener(n,i),a=function(){return m.removeListener(n,i)}}else throw new TypeError("Invalid event target");o.add(new QE.Subscription(a))},e.prototype._subscribe=function(t){var n=this.sourceObj,i=this.eventName,o=this.options,s=this.selector,a=s?function(){for(var l=[],c=0;c<arguments.length;c++)l[c-0]=arguments[c];var u=KE.tryCatch(s).apply(void 0,l);u===fd.errorObject?t.error(fd.errorObject.e):t.next(u)}:function(l){return t.next(l)};e.setupSubscription(n,i,a,t,o)},e}(ZE.Observable);So.FromEventObservable=oC});var vd=f(pd=>{"use strict";var sC=hd();pd.fromEvent=sC.FromEventObservable.create});var gd=f(()=>{"use strict";var aC=Xr(),uC=vd();aC.Observable.fromEvent=uC.fromEvent});var md=f(_d=>{"use strict";var cC=ja();function lC(r){return!cC.isArray(r)&&r-parseFloat(r)+1>=0}_d.isNumeric=lC});var yd=f(wo=>{"use strict";var fC=wo&&wo.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},dC=bo(),hC=function(r){fC(e,r);function e(t,n){r.call(this)}return e.prototype.schedule=function(t,n){return n===void 0&&(n=0),this},e}(dC.Subscription);wo.Action=hC});var Ed=f(Oo=>{"use strict";var pC=Oo&&Oo.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},bd=li(),vC=yd(),gC=function(r){pC(e,r);function e(t,n){r.call(this,t,n),this.scheduler=t,this.pending=!1,this.work=n}return e.prototype.schedule=function(t,n){if(n===void 0&&(n=0),this.closed)return this;this.state=t,this.pending=!0;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),bd.root.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1?n:bd.root.clearInterval(n)&&void 0||void 0},e.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,n){var i=!1,o=void 0;try{this.work(t)}catch(s){i=!0,o=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var t=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null},e}(vC.Action);Oo.AsyncAction=gC});var Sd=f(Cd=>{"use strict";var _C=function(){function r(e,t){t===void 0&&(t=r.now),this.SchedulerAction=e,this.now=t}return r.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},r.now=Date.now?Date.now:function(){return+new Date},r}();Cd.Scheduler=_C});var wd=f(To=>{"use strict";var mC=To&&To.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},yC=Sd(),bC=function(r){mC(e,r);function e(){r.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return e.prototype.flush=function(t){var n=this.actions;if(this.active){n.push(t);return}var i;this.active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this.active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},e}(yC.Scheduler);To.AsyncScheduler=bC});var Td=f(Od=>{"use strict";var EC=Ed(),CC=wd();Od.async=new CC.AsyncScheduler(EC.AsyncAction)});var xd=f(xo=>{"use strict";var SC=xo&&xo.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},wC=md(),OC=Xr(),Ja=Td(),TC=function(r){SC(e,r);function e(t,n){t===void 0&&(t=0),n===void 0&&(n=Ja.async),r.call(this),this.period=t,this.scheduler=n,(!wC.isNumeric(t)||t<0)&&(this.period=0),(!n||typeof n.schedule!="function")&&(this.scheduler=Ja.async)}return e.create=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=Ja.async),new e(t,n)},e.dispatch=function(t){var n=t.index,i=t.subscriber,o=t.period;i.next(n),!i.closed&&(t.index+=1,this.schedule(t,o))},e.prototype._subscribe=function(t){var n=0,i=this.period,o=this.scheduler;t.add(o.schedule(e.dispatch,i,{index:n,subscriber:t,period:i}))},e}(OC.Observable);xo.IntervalObservable=TC});var Ad=f(Id=>{"use strict";var xC=xd();Id.interval=xC.IntervalObservable.create});var Rd=f(()=>{"use strict";var IC=Xr(),AC=Ad();IC.Observable.interval=AC.interval});var Pd=f(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.TELEMETRY_HEADER=Y.SFDX_CONFIG_ISV_DEBUGGER_URL=Y.SFDX_CONFIG_ISV_DEBUGGER_SID=Y.SFDX_COMMAND=Y.MISSING_LABEL_MSG=Y.LOCALE_JA=Y.DEFAULT_LOCALE=Y.BASE_FILE_EXTENSION=Y.BASE_FILE_NAME=Y.ENV_SFDX_INSTANCE_URL=Y.ENV_HTTPS_PROXY=Y.ENV_HTTP_PROXY=Y.ENV_SFDX_DEFAULTUSERNAME=Y.DEFAULT_CONNECTION_TIMEOUT_MS=Y.CLIENT_ID=void 0;Y.CLIENT_ID="sfdx-vscode";Y.DEFAULT_CONNECTION_TIMEOUT_MS=2e4;Y.ENV_SFDX_DEFAULTUSERNAME="SFDX_DEFAULTUSERNAME";Y.ENV_HTTP_PROXY="HTTP_PROXY";Y.ENV_HTTPS_PROXY="HTTPS_PROXY";Y.ENV_SFDX_INSTANCE_URL="SFDX_INSTANCE_URL";Y.BASE_FILE_NAME="i18n";Y.BASE_FILE_EXTENSION="js";Y.DEFAULT_LOCALE="en";Y.LOCALE_JA="ja";Y.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";Y.SFDX_COMMAND="sfdx";Y.SFDX_CONFIG_ISV_DEBUGGER_SID="isvDebuggerSid";Y.SFDX_CONFIG_ISV_DEBUGGER_URL="isvDebuggerUrl";Y.TELEMETRY_HEADER="salesforce-vscode-extensions"});var Wr=f(yr=>{"use strict";var RC=yr&&yr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),PC=yr&&yr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&RC(e,r,t)};Object.defineProperty(yr,"__esModule",{value:!0});PC(Pd(),yr)});var Qa=f(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.GlobalCliEnvironment=void 0;var Io=class{};Ao.GlobalCliEnvironment=Io;Io.environmentVariables=new Map});var kd=f((gD,Fd)=>{Fd.exports=Nd;Nd.sync=qC;var Dd=require("fs");function DC(r,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var n=0;n<t.length;n++){var i=t[n].toLowerCase();if(i&&r.substr(-i.length).toLowerCase()===i)return!0}return!1}function qd(r,e,t){return!r.isSymbolicLink()&&!r.isFile()?!1:DC(e,t)}function Nd(r,e,t){Dd.stat(r,function(n,i){t(n,n?!1:qd(i,r,e))})}function qC(r,e){return qd(Dd.statSync(r),r,e)}});var Hd=f((_D,Ud)=>{Ud.exports=jd;jd.sync=NC;var Ld=require("fs");function jd(r,e,t){Ld.stat(r,function(n,i){t(n,n?!1:Md(i,e))})}function NC(r,e){return Md(Ld.statSync(r),e)}function Md(r,e){return r.isFile()&&FC(r,e)}function FC(r,e){var t=r.mode,n=r.uid,i=r.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),s=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),l=parseInt("010",8),c=parseInt("001",8),u=a|l,d=t&c||t&l&&i===s||t&a&&n===o||t&u&&o===0;return d}});var Bd=f((yD,Gd)=>{var mD=require("fs"),Ro;process.platform==="win32"||global.TESTING_WINDOWS?Ro=kd():Ro=Hd();Gd.exports=eu;eu.sync=kC;function eu(r,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){eu(r,e||{},function(o,s){o?i(o):n(s)})})}Ro(r,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),t(n,i)})}function kC(r,e){try{return Ro.sync(r,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var Zd=f((bD,Yd)=>{var $r=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Vd=require("path"),LC=$r?";":":",zd=Bd(),Xd=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),Wd=(r,e)=>{let t=e.colon||LC,n=r.match(/\//)||$r&&r.match(/\\/)?[""]:[...$r?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],i=$r?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=$r?i.split(t):[""];return $r&&r.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},$d=(r,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=Wd(r,e),s=[],a=c=>new Promise((u,d)=>{if(c===n.length)return e.all&&s.length?u(s):d(Xd(r));let m=n[c],E=/^".*"$/.test(m)?m.slice(1,-1):m,I=Vd.join(E,r),F=!E&&/^\.[\\\/]/.test(r)?r.slice(0,2)+I:I;u(l(F,c,0))}),l=(c,u,d)=>new Promise((m,E)=>{if(d===i.length)return m(a(u+1));let I=i[d];zd(c+I,{pathExt:o},(F,M)=>{if(!F&&M)if(e.all)s.push(c+I);else return m(c+I);return m(l(c,u,d+1))})});return t?a(0).then(c=>t(null,c),t):a(0)},jC=(r,e)=>{e=e||{};let{pathEnv:t,pathExt:n,pathExtExe:i}=Wd(r,e),o=[];for(let s=0;s<t.length;s++){let a=t[s],l=/^".*"$/.test(a)?a.slice(1,-1):a,c=Vd.join(l,r),u=!l&&/^\.[\\\/]/.test(r)?r.slice(0,2)+c:c;for(let d=0;d<n.length;d++){let m=u+n[d];try{if(zd.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw Xd(r)};Yd.exports=$d;$d.sync=jC});var Jd=f((ED,tu)=>{"use strict";var Kd=(r={})=>{let e=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};tu.exports=Kd;tu.exports.default=Kd});var rh=f((CD,th)=>{"use strict";var Qd=require("path"),MC=Zd(),UC=Jd();function eh(r,e){let t=r.options.env||process.env,n=process.cwd(),i=r.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(r.options.cwd)}catch{}let s;try{s=MC.sync(r.command,{path:t[UC({env:t})],pathExt:e?Qd.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=Qd.resolve(i?r.options.cwd:"",s)),s}function HC(r){return eh(r)||eh(r,!0)}th.exports=HC});var nh=f((SD,nu)=>{"use strict";var ru=/([()\][%!^"`<>&|;, *?])/g;function GC(r){return r=r.replace(ru,"^$1"),r}function BC(r,e){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(ru,"^$1"),e&&(r=r.replace(ru,"^$1")),r}nu.exports.command=GC;nu.exports.argument=BC});var oh=f((wD,ih)=>{"use strict";ih.exports=/^#!(.*)/});var ah=f((OD,sh)=>{"use strict";var VC=oh();sh.exports=(r="")=>{let e=r.match(VC);if(!e)return null;let[t,n]=e[0].replace(/#! ?/,"").split(" "),i=t.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var ch=f((TD,uh)=>{"use strict";var iu=require("fs"),zC=ah();function XC(r){let t=Buffer.alloc(150),n;try{n=iu.openSync(r,"r"),iu.readSync(n,t,0,150,0),iu.closeSync(n)}catch{}return zC(t.toString())}uh.exports=XC});var hh=f((xD,dh)=>{"use strict";var WC=require("path"),lh=rh(),fh=nh(),$C=ch(),YC=process.platform==="win32",ZC=/\.(?:com|exe)$/i,KC=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function JC(r){r.file=lh(r);let e=r.file&&$C(r.file);return e?(r.args.unshift(r.file),r.command=e,lh(r)):r.file}function QC(r){if(!YC)return r;let e=JC(r),t=!ZC.test(e);if(r.options.forceShell||t){let n=KC.test(e);r.command=WC.normalize(r.command),r.command=fh.command(r.command),r.args=r.args.map(o=>fh.argument(o,n));let i=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${i}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function eS(r,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let n={command:r,args:e,options:t,file:void 0,original:{command:r,args:e}};return t.shell?n:QC(n)}dh.exports=eS});var gh=f((ID,vh)=>{"use strict";var ou=process.platform==="win32";function su(r,e){return Object.assign(new Error(`${e} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${r.command}`,path:r.command,spawnargs:r.args})}function tS(r,e){if(!ou)return;let t=r.emit;r.emit=function(n,i){if(n==="exit"){let o=ph(i,e,"spawn");if(o)return t.call(r,"error",o)}return t.apply(r,arguments)}}function ph(r,e){return ou&&r===1&&!e.file?su(e.original,"spawn"):null}function rS(r,e){return ou&&r===1&&!e.file?su(e.original,"spawnSync"):null}vh.exports={hookChildProcess:tS,verifyENOENT:ph,verifyENOENTSync:rS,notFoundError:su}});var yh=f((AD,Yr)=>{"use strict";var _h=require("child_process"),au=hh(),uu=gh();function mh(r,e,t){let n=au(r,e,t),i=_h.spawn(n.command,n.args,n.options);return uu.hookChildProcess(i,n),i}function nS(r,e,t){let n=au(r,e,t),i=_h.spawnSync(n.command,n.args,n.options);return i.error=i.error||uu.verifyENOENTSync(i.status,n),i}Yr.exports=mh;Yr.exports.spawn=mh;Yr.exports.sync=nS;Yr.exports._parse=au;Yr.exports._enoent=uu});var Do=f(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.CliCommandExecutor=void 0;gd();Rd();var iS=Wr(),oS=Ka(),sS=Qa(),aS=yh(),hi=class{constructor(e,t,n=!0){this.command=e,this.options=n?hi.patchEnv(t,sS.GlobalCliEnvironment.environmentVariables):t}static patchEnv(e,t){let n=Object.create(null);return Object.assign(n,process.env),t.forEach((i,o)=>{n[o]=i}),n&&(n.SFDX_TOOL=iS.TELEMETRY_HEADER),typeof e.env!="undefined"&&Object.assign(n,e.env),e.env=n,e}execute(e){let t=aS(this.command.command,this.command.args,this.options);return new oS.CliCommandExecution(this.command,t,e)}};Po.CliCommandExecutor=hi});var bh=f(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.Command=void 0;var cu=class{constructor(e){this.command=e.command,this.description=e.description,this.args=e.args,this.logName=e.logName}toString(){return this.description?this.description:`${this.command} ${this.args.join(" ")}`}toCommand(){return`${this.command} ${this.args.join(" ")}`}};qo.Command=cu});var fu=f(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.CommandBuilder=Me.FATAL=Me.LOG_LEVEL_FLAG=Me.JSON_FLAG=void 0;var uS=bh();Me.JSON_FLAG="--json";Me.LOG_LEVEL_FLAG="--loglevel";Me.FATAL="fatal";var lu=class{constructor(e){this.args=[],this.command=e}withDescription(e){return this.description=e,this}withArg(e){return e===Me.JSON_FLAG?this.withJson():this.args.push(e),this}withFlag(e,t){return this.args.push(e,t),this}withJson(){return this.args.push(Me.JSON_FLAG),this.args.push(Me.LOG_LEVEL_FLAG,Me.FATAL),this}withLogName(e){return this.logName=e,this}build(){return new uS.Command(this)}};Me.CommandBuilder=lu});var No=f(Zr=>{"use strict";var cS=Zr&&Zr.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.CommandOutput=void 0;var du=class{constructor(){this.stdoutBuffer="",this.stderrBuffer=""}getCmdResult(e){return cS(this,void 0,void 0,function*(){return e.stdoutSubject.subscribe(t=>{this.stdoutBuffer+=t.toString()}),e.stderrSubject.subscribe(t=>{this.stderrBuffer+=t.toString()}),new Promise((t,n)=>{e.processExitSubject.subscribe(i=>i!==void 0&&String(i)==="0"?t(this.stdoutBuffer):n(this.stderrBuffer||this.stdoutBuffer))})})}};Zr.CommandOutput=du});var ko=f(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.SfdxCommandBuilder=void 0;var lS=Wr(),fS=fu(),hu=class extends fS.CommandBuilder{constructor(){super(lS.SFDX_COMMAND)}};Fo.SfdxCommandBuilder=hu});var Eh=f(Kr=>{"use strict";var dS=Kr&&Kr.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.ForceOrgDisplay=void 0;var hS=ko(),pS=Do(),vS=No(),pu=class{getOrgInfo(e){return dS(this,void 0,void 0,function*(){let t=new pS.CliCommandExecutor(new hS.SfdxCommandBuilder().withArg("force:org:display").withJson().build(),{cwd:e}).execute(),i=yield new vS.CommandOutput().getCmdResult(t);try{let o=JSON.parse(i).result;return Promise.resolve(o)}catch(o){return Promise.reject(i)}})}};Kr.ForceOrgDisplay=pu});var Ch=f(Jr=>{"use strict";var gS=Jr&&Jr.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ForceConfigGet=void 0;var _S=Do(),mS=No(),yS=ko(),vu=class{getConfig(e,...t){return gS(this,void 0,void 0,function*(){let n=new yS.SfdxCommandBuilder().withArg("force:config:get");t.forEach(a=>n.withArg(a));let i=new _S.CliCommandExecutor(n.withJson().build(),{cwd:e}).execute(),s=yield new mS.CommandOutput().getCmdResult(i);try{let a=new Map;return JSON.parse(s).result.forEach(c=>a.set(c.key,c.value)),Promise.resolve(a)}catch(a){return Promise.reject(a)}})}};Jr.ForceConfigGet=vu});var Sh=f(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.ForceConfigGet=ge.SfdxCommandBuilder=ge.GlobalCliEnvironment=ge.ForceOrgDisplay=ge.CommandOutput=ge.CommandBuilder=ge.CliCommandExecutor=ge.CliCommandExecution=void 0;var bS=Ka();Object.defineProperty(ge,"CliCommandExecution",{enumerable:!0,get:function(){return bS.CliCommandExecution}});var ES=Do();Object.defineProperty(ge,"CliCommandExecutor",{enumerable:!0,get:function(){return ES.CliCommandExecutor}});var CS=fu();Object.defineProperty(ge,"CommandBuilder",{enumerable:!0,get:function(){return CS.CommandBuilder}});var SS=No();Object.defineProperty(ge,"CommandOutput",{enumerable:!0,get:function(){return SS.CommandOutput}});var wS=Eh();Object.defineProperty(ge,"ForceOrgDisplay",{enumerable:!0,get:function(){return wS.ForceOrgDisplay}});var OS=Qa();Object.defineProperty(ge,"GlobalCliEnvironment",{enumerable:!0,get:function(){return OS.GlobalCliEnvironment}});var TS=ko();Object.defineProperty(ge,"SfdxCommandBuilder",{enumerable:!0,get:function(){return TS.SfdxCommandBuilder}});var xS=Ch();Object.defineProperty(ge,"ForceConfigGet",{enumerable:!0,get:function(){return xS.ForceConfigGet}})});var wh=f(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.extractJsonObject=void 0;function IS(r){let e=r.substring(r.indexOf("{"),r.lastIndexOf("}")+1);return JSON.parse(e)}Lo.extractJsonObject=IS});var Oh=f(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.extractJsonObject=void 0;var AS=wh();Object.defineProperty(jo,"extractJsonObject",{enumerable:!0,get:function(){return AS.extractJsonObject}})});var Th=f(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.Localization=void 0;var gu=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};Mo.Localization=gu});var xh=f(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.Message=void 0;var RS=require("util"),PS=Wr(),_u=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...t){let n=this.getLabel(e);if(!n)return console.warn(`Missing label for key: ${e}`),n=`${PS.MISSING_LABEL_MSG} ${e}`,t.length>=1&&t.forEach(o=>{n+=` (${o})`}),n;let i=t;if(t.length>=1){let o=n.split("%s").length-1;return t.length!==o&&(console.log(`Arguments do not match for label '${e}', got ${t.length} but want ${o}`),t.length>o&&(i=t.slice(0,-(t.length-o)))),(0,RS.format)(n,...i)}return n}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}};Uo.Message=_u});var Ih=f(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.Message=Qr.Localization=void 0;var DS=Th();Object.defineProperty(Qr,"Localization",{enumerable:!0,get:function(){return DS.Localization}});var qS=xh();Object.defineProperty(Qr,"Message",{enumerable:!0,get:function(){return qS.Message}})});var Ah=f(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.BaseCommand=void 0;var mu=class{constructor(e){this.queryString=e}getQueryString(){return this.queryString}};Ho.BaseCommand=mu});var Dh=f(()=>{"use strict";var Ph=require("url"),br=require("https"),Rh="__agent_base_https_request_patched__";br.request[Rh]||(br.request=function(r){return function(e,t){let n;return typeof e=="string"?n=Ph.parse(e):n=Object.assign({},e),n.port==null&&(n.port=443),n.secureEndpoint=!0,r.call(br,n,t)}}(br.request),br.request[Rh]=!0);br.get=function(r,e,t){let n;typeof r=="string"&&e&&typeof e!="function"?n=Object.assign({},Ph.parse(r),e):!e&&!t?n=r:t||(n=r,t=e);let i=br.request(n,t);return i.end(),i}});var qh=f((yu,bu)=>{(function(r,e){typeof yu=="object"&&typeof bu<"u"?bu.exports=e():typeof define=="function"&&define.amd?define(e):r.ES6Promise=e()})(yu,function(){"use strict";function r(v){var b=typeof v;return v!==null&&(b==="object"||b==="function")}function e(v){return typeof v=="function"}var t=void 0;Array.isArray?t=Array.isArray:t=function(v){return Object.prototype.toString.call(v)==="[object Array]"};var n=t,i=0,o=void 0,s=void 0,a=function(b,y){J[i]=b,J[i+1]=y,i+=2,i===2&&(s?s(De):qe())};function l(v){s=v}function c(v){a=v}var u=typeof window<"u"?window:void 0,d=u||{},m=d.MutationObserver||d.WebKitMutationObserver,E=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",I=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function F(){return function(){return process.nextTick(De)}}function M(){return typeof o<"u"?function(){o(De)}:ie()}function K(){var v=0,b=new m(De),y=document.createTextNode("");return b.observe(y,{characterData:!0}),function(){y.data=v=++v%2}}function ve(){var v=new MessageChannel;return v.port1.onmessage=De,function(){return v.port2.postMessage(0)}}function ie(){var v=setTimeout;return function(){return v(De,1)}}var J=new Array(1e3);function De(){for(var v=0;v<i;v+=2){var b=J[v],y=J[v+1];b(y),J[v]=void 0,J[v+1]=void 0}i=0}function Xe(){try{var v=Function("return this")().require("vertx");return o=v.runOnLoop||v.runOnContext,M()}catch{return ie()}}var qe=void 0;E?qe=F():m?qe=K():I?qe=ve():u===void 0&&typeof require=="function"?qe=Xe():qe=ie();function wt(v,b){var y=this,T=new this.constructor(Ot);T[hr]===void 0&&Tt(T);var x=y._state;if(x){var D=arguments[x-1];a(function(){return io(x,T,D,y._result)})}else gr(y,T,v,b);return T}function Vt(v){var b=this;if(v&&typeof v=="object"&&v.constructor===b)return v;var y=new b(Ot);return vr(y,v),y}var hr=Math.random().toString(36).substring(2);function Ot(){}var zt=void 0,pr=1,Xt=2;function Ia(){return new TypeError("You cannot resolve a promise with itself")}function Aa(){return new TypeError("A promises callback cannot return that same promise.")}function Ra(v,b,y,T){try{v.call(b,y,T)}catch(x){return x}}function Pa(v,b,y){a(function(T){var x=!1,D=Ra(y,b,function(Z){x||(x=!0,b!==Z?vr(T,Z):Ee(T,Z))},function(Z){x||(x=!0,ae(T,Z))},"Settle: "+(T._label||" unknown promise"));!x&&D&&(x=!0,ae(T,D))},v)}function Gr(v,b){b._state===pr?Ee(v,b._result):b._state===Xt?ae(v,b._result):gr(b,void 0,function(y){return vr(v,y)},function(y){return ae(v,y)})}function Wt(v,b,y){b.constructor===v.constructor&&y===wt&&b.constructor.resolve===Vt?Gr(v,b):y===void 0?Ee(v,b):e(y)?Pa(v,b,y):Ee(v,b)}function vr(v,b){if(v===b)ae(v,Ia());else if(r(b)){var y=void 0;try{y=b.then}catch(T){ae(v,T);return}Wt(v,b,y)}else Ee(v,b)}function $t(v){v._onerror&&v._onerror(v._result),Yt(v)}function Ee(v,b){v._state===zt&&(v._result=b,v._state=pr,v._subscribers.length!==0&&a(Yt,v))}function ae(v,b){v._state===zt&&(v._state=Xt,v._result=b,a($t,v))}function gr(v,b,y,T){var x=v._subscribers,D=x.length;v._onerror=null,x[D]=b,x[D+pr]=y,x[D+Xt]=T,D===0&&v._state&&a(Yt,v)}function Yt(v){var b=v._subscribers,y=v._state;if(b.length!==0){for(var T=void 0,x=void 0,D=v._result,Z=0;Z<b.length;Z+=3)T=b[Z],x=b[Z+y],T?io(y,T,x,D):x(D);v._subscribers.length=0}}function io(v,b,y,T){var x=e(y),D=void 0,Z=void 0,U=!0;if(x){try{D=y(T)}catch(pe){U=!1,Z=pe}if(b===D){ae(b,Aa());return}}else D=T;b._state!==zt||(x&&U?vr(b,D):U===!1?ae(b,Z):v===pr?Ee(b,D):v===Xt&&ae(b,D))}function We(v,b){try{b(function(T){vr(v,T)},function(T){ae(v,T)})}catch(y){ae(v,y)}}var si=0;function oo(){return si++}function Tt(v){v[hr]=si++,v._state=void 0,v._result=void 0,v._subscribers=[]}function so(){return new Error("Array Methods must be provided an Array")}var Da=function(){function v(b,y){this._instanceConstructor=b,this.promise=new b(Ot),this.promise[hr]||Tt(this.promise),n(y)?(this.length=y.length,this._remaining=y.length,this._result=new Array(this.length),this.length===0?Ee(this.promise,this._result):(this.length=this.length||0,this._enumerate(y),this._remaining===0&&Ee(this.promise,this._result))):ae(this.promise,so())}return v.prototype._enumerate=function(y){for(var T=0;this._state===zt&&T<y.length;T++)this._eachEntry(y[T],T)},v.prototype._eachEntry=function(y,T){var x=this._instanceConstructor,D=x.resolve;if(D===Vt){var Z=void 0,U=void 0,pe=!1;try{Z=y.then}catch(xt){pe=!0,U=xt}if(Z===wt&&y._state!==zt)this._settledAt(y._state,T,y._result);else if(typeof Z!="function")this._remaining--,this._result[T]=y;else if(x===P){var Zt=new x(Ot);pe?ae(Zt,U):Wt(Zt,y,Z),this._willSettleAt(Zt,T)}else this._willSettleAt(new x(function(xt){return xt(y)}),T)}else this._willSettleAt(D(y),T)},v.prototype._settledAt=function(y,T,x){var D=this.promise;D._state===zt&&(this._remaining--,y===Xt?ae(D,x):this._result[T]=x),this._remaining===0&&Ee(D,this._result)},v.prototype._willSettleAt=function(y,T){var x=this;gr(y,void 0,function(D){return x._settledAt(pr,T,D)},function(D){return x._settledAt(Xt,T,D)})},v}();function S(v){return new Da(this,v).promise}function O(v){var b=this;return n(v)?new b(function(y,T){for(var x=v.length,D=0;D<x;D++)b.resolve(v[D]).then(y,T)}):new b(function(y,T){return T(new TypeError("You must pass an array to race."))})}function A(v){var b=this,y=new b(Ot);return ae(y,v),y}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function j(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var P=function(){function v(b){this[hr]=oo(),this._result=this._state=void 0,this._subscribers=[],Ot!==b&&(typeof b!="function"&&R(),this instanceof v?We(this,b):j())}return v.prototype.catch=function(y){return this.then(null,y)},v.prototype.finally=function(y){var T=this,x=T.constructor;return e(y)?T.then(function(D){return x.resolve(y()).then(function(){return D})},function(D){return x.resolve(y()).then(function(){throw D})}):T.then(y,y)},v}();P.prototype.then=wt,P.all=S,P.race=O,P.resolve=Vt,P.reject=A,P._setScheduler=l,P._setAsap=c,P._asap=a;function L(){var v=void 0;if(typeof global<"u")v=global;else if(typeof self<"u")v=self;else try{v=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var b=v.Promise;if(b){var y=null;try{y=Object.prototype.toString.call(b.resolve())}catch{}if(y==="[object Promise]"&&!b.cast)return}v.Promise=P}return P.polyfill=L,P.Promise=P,P})});var Fh=f((XD,Nh)=>{"use strict";Nh.exports=function(){"use strict";var r=void 0;function e(n){return typeof n=="function"}global!==void 0?r=global:window!==void 0&&window.document?r=window:r=self;var t=function(){if(!r.hasOwnProperty("Promise"))return!1;var n=r.Promise;return!n.hasOwnProperty("resolve")||!n.hasOwnProperty("reject")||!n.hasOwnProperty("all")||!n.hasOwnProperty("race")?!1:function(){var i=void 0,o=new r.Promise(function(s){i=s});return o?e(i):!1}()}();return t?r.Promise:qh().Promise}()});var Lh=f((WD,kh)=>{"use strict";kh.exports=function(){"use strict";var r=Fh();function e(t){return t&&typeof t.then=="function"&&typeof t.catch=="function"}return function(n,i){return function(){for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];var l=i&&i.multiArgs,c=void 0;return i&&i.thisArg?c=i.thisArg:i&&(c=i),new r(function(u,d){s.push(function(I){if(I)return d(I);for(var F=arguments.length,M=Array(F>1?F-1:0),K=1;K<F;K++)M[K-1]=arguments[K];if(!l)return u(M[0]);u(M)});var m=n.apply(c,s);e(m)&&u(m)})}}}()});var Eu=f(($D,Mh)=>{"use strict";Dh();var NS=require("util").inherits,FS=Lh(),jh=require("events").EventEmitter;Mh.exports=Er;function kS(r){return r&&typeof r.addRequest=="function"}function Er(r,e){if(!(this instanceof Er))return new Er(r,e);jh.call(this),this._promisifiedCallback=!1;let t=e;typeof r=="function"?this.callback=r:r&&(t=r),this.timeout=t&&t.timeout||null,this.options=t}NS(Er,jh);Er.prototype.callback=function(e,t){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')};Er.prototype.addRequest=function(e,t){let n=Object.assign({},t);n.host==null&&(n.host="localhost"),n.port==null&&(n.port=n.secureEndpoint?443:80);let i=Object.assign({},this.options,n);i.host&&i.path&&delete i.path,delete i.agent,delete i.hostname,delete i._defaultAgent,delete i.defaultPort,delete i.createConnection,e._last=!0,e.shouldKeepAlive=!1;let o,s=!1,a=this.timeout,l=this.freeSocket;function c(E){e._hadError||(e.emit("error",E),e._hadError=!0)}function u(){o=null,s=!0;let E=new Error('A "socket" was not created for HTTP request before '+a+"ms");E.code="ETIMEOUT",c(E)}function d(E){s||(o!=null&&(clearTimeout(o),o=null),c(E))}function m(E){if(!s)if(o!=null&&(clearTimeout(o),o=null),kS(E))E.addRequest(e,i);else if(E){let I=function(){l(E,i)};E.on("free",I),e.onSocket(E)}else{let I=new Error("no Duplex stream was returned to agent-base for `"+e.method+" "+e.path+"`");c(I)}}!this._promisifiedCallback&&this.callback.length>=3&&(this.callback=FS(this.callback,this),this._promisifiedCallback=!0),a>0&&(o=setTimeout(u,a));try{Promise.resolve(this.callback(e,i)).then(m,d)}catch(E){Promise.reject(E).catch(d)}};Er.prototype.freeSocket=function(e,t){e.destroy()}});var Hh=f((YD,Uh)=>{var pi=1e3,vi=pi*60,gi=vi*60,_i=gi*24,LS=_i*365.25;Uh.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return jS(r);if(t==="number"&&isNaN(r)===!1)return e.long?US(r):MS(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function jS(r){if(r=String(r),!(r.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*LS;case"days":case"day":case"d":return t*_i;case"hours":case"hour":case"hrs":case"hr":case"h":return t*gi;case"minutes":case"minute":case"mins":case"min":case"m":return t*vi;case"seconds":case"second":case"secs":case"sec":case"s":return t*pi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function MS(r){return r>=_i?Math.round(r/_i)+"d":r>=gi?Math.round(r/gi)+"h":r>=vi?Math.round(r/vi)+"m":r>=pi?Math.round(r/pi)+"s":r+"ms"}function US(r){return Go(r,_i,"day")||Go(r,gi,"hour")||Go(r,vi,"minute")||Go(r,pi,"second")||r+" ms"}function Go(r,e,t){if(!(r<e))return r<e*1.5?Math.floor(r/e)+" "+t:Math.ceil(r/e)+" "+t+"s"}});var Su=f((B,Gh)=>{B=Gh.exports=Cu.debug=Cu.default=Cu;B.coerce=XS;B.disable=VS;B.enable=BS;B.enabled=zS;B.humanize=Hh();B.instances=[];B.names=[];B.skips=[];B.formatters={};function HS(r){var e=0,t;for(t in r)e=(e<<5)-e+r.charCodeAt(t),e|=0;return B.colors[Math.abs(e)%B.colors.length]}function Cu(r){var e;function t(){if(!!t.enabled){var n=t,i=+new Date,o=i-(e||i);n.diff=o,n.prev=e,n.curr=i,e=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=B.coerce(s[0]),typeof s[0]!="string"&&s.unshift("%O");var l=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(u,d){if(u==="%%")return u;l++;var m=B.formatters[d];if(typeof m=="function"){var E=s[l];u=m.call(n,E),s.splice(l,1),l--}return u}),B.formatArgs.call(n,s);var c=t.log||B.log||console.log.bind(console);c.apply(n,s)}}return t.namespace=r,t.enabled=B.enabled(r),t.useColors=B.useColors(),t.color=HS(r),t.destroy=GS,typeof B.init=="function"&&B.init(t),B.instances.push(t),t}function GS(){var r=B.instances.indexOf(this);return r!==-1?(B.instances.splice(r,1),!0):!1}function BS(r){B.save(r),B.names=[],B.skips=[];var e,t=(typeof r=="string"?r:"").split(/[\s,]+/),n=t.length;for(e=0;e<n;e++)!t[e]||(r=t[e].replace(/\*/g,".*?"),r[0]==="-"?B.skips.push(new RegExp("^"+r.substr(1)+"$")):B.names.push(new RegExp("^"+r+"$")));for(e=0;e<B.instances.length;e++){var i=B.instances[e];i.enabled=B.enabled(i.namespace)}}function VS(){B.enable("")}function zS(r){if(r[r.length-1]==="*")return!0;var e,t;for(e=0,t=B.skips.length;e<t;e++)if(B.skips[e].test(r))return!1;for(e=0,t=B.names.length;e<t;e++)if(B.names[e].test(r))return!0;return!1}function XS(r){return r instanceof Error?r.stack||r.message:r}});var zh=f((Ie,Vh)=>{Ie=Vh.exports=Su();Ie.log=YS;Ie.formatArgs=$S;Ie.save=ZS;Ie.load=Bh;Ie.useColors=WS;Ie.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:KS();Ie.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function WS(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}Ie.formatters.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function $S(r){var e=this.useColors;if(r[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+r[0]+(e?"%c ":" ")+"+"+Ie.humanize(this.diff),!!e){var t="color: "+this.color;r.splice(1,0,t,"color: inherit");var n=0,i=0;r[0].replace(/%[a-zA-Z%]/g,function(o){o!=="%%"&&(n++,o==="%c"&&(i=n))}),r.splice(i,0,t)}}function YS(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function ZS(r){try{r==null?Ie.storage.removeItem("debug"):Ie.storage.debug=r}catch{}}function Bh(){var r;try{r=Ie.storage.debug}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}Ie.enable(Bh());function KS(){try{return window.localStorage}catch{}}});var Wh=f((ZD,Xh)=>{"use strict";Xh.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var Tu=f((KD,Yh)=>{"use strict";var JS=require("os"),$h=require("tty"),Ke=Wh(),{env:_e}=process,Kt;Ke("no-color")||Ke("no-colors")||Ke("color=false")||Ke("color=never")?Kt=0:(Ke("color")||Ke("colors")||Ke("color=true")||Ke("color=always"))&&(Kt=1);"FORCE_COLOR"in _e&&(_e.FORCE_COLOR==="true"?Kt=1:_e.FORCE_COLOR==="false"?Kt=0:Kt=_e.FORCE_COLOR.length===0?1:Math.min(parseInt(_e.FORCE_COLOR,10),3));function wu(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Ou(r,e){if(Kt===0)return 0;if(Ke("color=16m")||Ke("color=full")||Ke("color=truecolor"))return 3;if(Ke("color=256"))return 2;if(r&&!e&&Kt===void 0)return 0;let t=Kt||0;if(_e.TERM==="dumb")return t;if(process.platform==="win32"){let n=JS.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in _e)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in _e)||_e.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in _e)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(_e.TEAMCITY_VERSION)?1:0;if(_e.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in _e){let n=parseInt((_e.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(_e.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(_e.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(_e.TERM)||"COLORTERM"in _e?1:t}function QS(r){let e=Ou(r,r&&r.isTTY);return wu(e)}Yh.exports={supportsColor:QS,stdout:wu(Ou(!0,$h.isatty(1))),stderr:wu(Ou(!0,$h.isatty(2)))}});var Jh=f((de,Kh)=>{var ew=require("tty"),Bo=require("util");de=Kh.exports=Su();de.init=sw;de.log=iw;de.formatArgs=rw;de.save=ow;de.load=Zh;de.useColors=tw;de.colors=[6,2,3,4,5,1];try{xu=Tu(),xu&&xu.level>=2&&(de.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}var xu;de.inspectOpts=Object.keys(process.env).filter(function(r){return/^debug_/i.test(r)}).reduce(function(r,e){var t=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(i,o){return o.toUpperCase()}),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function tw(){return"colors"in de.inspectOpts?Boolean(de.inspectOpts.colors):ew.isatty(process.stderr.fd)}de.formatters.o=function(r){return this.inspectOpts.colors=this.useColors,Bo.inspect(r,this.inspectOpts).split(`
`).map(function(e){return e.trim()}).join(" ")};de.formatters.O=function(r){return this.inspectOpts.colors=this.useColors,Bo.inspect(r,this.inspectOpts)};function rw(r){var e=this.namespace,t=this.useColors;if(t){var n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o="  "+i+";1m"+e+" \x1B[0m";r[0]=o+r[0].split(`
`).join(`
`+o),r.push(i+"m+"+de.humanize(this.diff)+"\x1B[0m")}else r[0]=nw()+e+" "+r[0]}function nw(){return de.inspectOpts.hideDate?"":new Date().toISOString()+" "}function iw(){return process.stderr.write(Bo.format.apply(Bo,arguments)+`
`)}function ow(r){r==null?delete process.env.DEBUG:process.env.DEBUG=r}function Zh(){return process.env.DEBUG}function sw(r){r.inspectOpts={};for(var e=Object.keys(de.inspectOpts),t=0;t<e.length;t++)r.inspectOpts[e[t]]=de.inspectOpts[e[t]]}de.enable(Zh())});var Qh=f((JD,Iu)=>{typeof process>"u"||process.type==="renderer"?Iu.exports=zh():Iu.exports=Jh()});var rp=f((QD,tp)=>{var aw=require("net"),uw=require("tls"),Au=require("url"),ep=Eu(),cw=require("util").inherits,Vo=Qh()("http-proxy-agent");tp.exports=mi;function mi(r){if(!(this instanceof mi))return new mi(r);if(typeof r=="string"&&(r=Au.parse(r)),!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Vo("creating new HttpProxyAgent instance: %o",r),ep.call(this,r);var e=Object.assign({},r);this.secureProxy=e.protocol?/^https:?$/i.test(e.protocol):!1,e.host=e.hostname||e.host,e.port=+e.port||(this.secureProxy?443:80),e.host&&e.path&&(delete e.path,delete e.pathname),this.proxy=e}cw(mi,ep);mi.prototype.callback=function(e,t,n){var i=this.proxy,o=Au.parse(e.path);o.protocol==null&&(o.protocol="http:"),o.hostname==null&&(o.hostname=t.hostname||t.host),o.port==null&&(o.port=t.port),o.port==80&&delete o.port;var s=Au.format(o);e.path=s,i.auth&&e.setHeader("Proxy-Authorization","Basic "+Buffer.from(i.auth).toString("base64"));var a;if(this.secureProxy?a=uw.connect(i):a=aw.connect(i),e._header&&(Vo("regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0)){Vo("patching connection write() output buffer with updated header");var l=e.output[0],c=l.indexOf(`\r
\r
`)+4;e.output[0]=e._header+l.substring(c),Vo("output buffer: %o",e.output)}n(null,a)}});var ip=f((eq,np)=>{var en=1e3,tn=en*60,rn=tn*60,Cr=rn*24,lw=Cr*7,fw=Cr*365.25;np.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return dw(r);if(t==="number"&&isFinite(r))return e.long?pw(r):hw(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function dw(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*fw;case"weeks":case"week":case"w":return t*lw;case"days":case"day":case"d":return t*Cr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*rn;case"minutes":case"minute":case"mins":case"min":case"m":return t*tn;case"seconds":case"second":case"secs":case"sec":case"s":return t*en;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function hw(r){var e=Math.abs(r);return e>=Cr?Math.round(r/Cr)+"d":e>=rn?Math.round(r/rn)+"h":e>=tn?Math.round(r/tn)+"m":e>=en?Math.round(r/en)+"s":r+"ms"}function pw(r){var e=Math.abs(r);return e>=Cr?zo(r,e,Cr,"day"):e>=rn?zo(r,e,rn,"hour"):e>=tn?zo(r,e,tn,"minute"):e>=en?zo(r,e,en,"second"):r+" ms"}function zo(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Ru=f((tq,op)=>{"use strict";function vw(r){t.debug=t,t.default=t,t.coerce=l,t.disable=s,t.enable=o,t.enabled=a,t.humanize=ip(),Object.keys(r).forEach(function(c){t[c]=r[c]}),t.instances=[],t.names=[],t.skips=[],t.formatters={};function e(c){for(var u=0,d=0;d<c.length;d++)u=(u<<5)-u+c.charCodeAt(d),u|=0;return t.colors[Math.abs(u)%t.colors.length]}t.selectColor=e;function t(c){var u;function d(){if(!!d.enabled){for(var m=arguments.length,E=new Array(m),I=0;I<m;I++)E[I]=arguments[I];var F=d,M=Number(new Date),K=M-(u||M);F.diff=K,F.prev=u,F.curr=M,u=M,E[0]=t.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");var ve=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,function(J,De){if(J==="%%")return J;ve++;var Xe=t.formatters[De];if(typeof Xe=="function"){var qe=E[ve];J=Xe.call(F,qe),E.splice(ve,1),ve--}return J}),t.formatArgs.call(F,E);var ie=F.log||t.log;ie.apply(F,E)}}return d.namespace=c,d.enabled=t.enabled(c),d.useColors=t.useColors(),d.color=e(c),d.destroy=n,d.extend=i,typeof t.init=="function"&&t.init(d),t.instances.push(d),d}function n(){var c=t.instances.indexOf(this);return c!==-1?(t.instances.splice(c,1),!0):!1}function i(c,u){return t(this.namespace+(typeof u>"u"?":":u)+c)}function o(c){t.save(c),t.names=[],t.skips=[];var u,d=(typeof c=="string"?c:"").split(/[\s,]+/),m=d.length;for(u=0;u<m;u++)!d[u]||(c=d[u].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.substr(1)+"$")):t.names.push(new RegExp("^"+c+"$")));for(u=0;u<t.instances.length;u++){var E=t.instances[u];E.enabled=t.enabled(E.namespace)}}function s(){t.enable("")}function a(c){if(c[c.length-1]==="*")return!0;var u,d;for(u=0,d=t.skips.length;u<d;u++)if(t.skips[u].test(c))return!1;for(u=0,d=t.names.length;u<d;u++)if(t.names[u].test(c))return!0;return!1}function l(c){return c instanceof Error?c.stack||c.message:c}return t.enable(t.load()),t}op.exports=vw});var sp=f((Je,Wo)=>{"use strict";function Xo(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xo=function(t){return typeof t}:Xo=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xo(r)}Je.log=mw;Je.formatArgs=_w;Je.save=yw;Je.load=bw;Je.useColors=gw;Je.storage=Ew();Je.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gw(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function _w(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Wo.exports.humanize(this.diff),!!this.useColors){var e="color: "+this.color;r.splice(1,0,e,"color: inherit");var t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,function(i){i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}}function mw(){var r;return(typeof console>"u"?"undefined":Xo(console))==="object"&&console.log&&(r=console).log.apply(r,arguments)}function yw(r){try{r?Je.storage.setItem("debug",r):Je.storage.removeItem("debug")}catch{}}function bw(){var r;try{r=Je.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Ew(){try{return localStorage}catch{}}Wo.exports=Ru()(Je);var Cw=Wo.exports.formatters;Cw.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var up=f((Ce,Zo)=>{"use strict";var Sw=require("tty"),Yo=require("util");Ce.init=Rw;Ce.log=xw;Ce.formatArgs=Ow;Ce.save=Iw;Ce.load=Aw;Ce.useColors=ww;Ce.colors=[6,2,3,4,5,1];try{$o=Tu(),$o&&($o.stderr||$o).level>=2&&(Ce.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}var $o;Ce.inspectOpts=Object.keys(process.env).filter(function(r){return/^debug_/i.test(r)}).reduce(function(r,e){var t=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(i,o){return o.toUpperCase()}),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function ww(){return"colors"in Ce.inspectOpts?Boolean(Ce.inspectOpts.colors):Sw.isatty(process.stderr.fd)}function Ow(r){var e=this.namespace,t=this.useColors;if(t){var n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o="  ".concat(i,";1m").concat(e," \x1B[0m");r[0]=o+r[0].split(`
`).join(`
`+o),r.push(i+"m+"+Zo.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Tw()+e+" "+r[0]}function Tw(){return Ce.inspectOpts.hideDate?"":new Date().toISOString()+" "}function xw(){return process.stderr.write(Yo.format.apply(Yo,arguments)+`
`)}function Iw(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function Aw(){return process.env.DEBUG}function Rw(r){r.inspectOpts={};for(var e=Object.keys(Ce.inspectOpts),t=0;t<e.length;t++)r.inspectOpts[e[t]]=Ce.inspectOpts[e[t]]}Zo.exports=Ru()(Ce);var ap=Zo.exports.formatters;ap.o=function(r){return this.inspectOpts.colors=this.useColors,Yo.inspect(r,this.inspectOpts).split(`
`).map(function(e){return e.trim()}).join(" ")};ap.O=function(r){return this.inspectOpts.colors=this.useColors,Yo.inspect(r,this.inspectOpts)}});var cp=f((rq,Pu)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Pu.exports=sp():Pu.exports=up()});var pp=f((nq,hp)=>{var lp=require("net"),fp=require("tls"),Pw=require("url"),Dw=require("assert"),dp=Eu(),qw=require("util").inherits,Sr=cp()("https-proxy-agent");hp.exports=yi;function yi(r){if(!(this instanceof yi))return new yi(r);if(typeof r=="string"&&(r=Pw.parse(r)),!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Sr("creating new HttpsProxyAgent instance: %o",r),dp.call(this,r);var e=Object.assign({},r);this.secureProxy=e.protocol?/^https:?$/i.test(e.protocol):!1,e.host=e.hostname||e.host,e.port=+e.port||(this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in e)&&(e.ALPNProtocols=["http 1.1"]),e.host&&e.path&&(delete e.path,delete e.pathname),this.proxy=e,this.defaultPort=443}qw(yi,dp);yi.prototype.callback=function(e,t,n){var i=this.proxy,o;this.secureProxy?o=fp.connect(i):o=lp.connect(i);var s=[],a=0;function l(){var ie=o.read();ie?E(ie):o.once("readable",l)}function c(){o.removeListener("end",d),o.removeListener("error",m),o.removeListener("close",u),o.removeListener("readable",l)}function u(ie){Sr("onclose had error %o",ie)}function d(){Sr("onend")}function m(ie){c(),n(ie)}function E(ie){s.push(ie),a+=ie.length;var J=Buffer.concat(s,a),De=J.toString("ascii");if(!~De.indexOf(`\r
\r
`)){Sr("have not received end of HTTP headers yet..."),l();return}var Xe=De.substring(0,De.indexOf(`\r
`)),qe=+Xe.split(" ")[1];if(Sr("got proxy server response: %o",Xe),qe==200){var wt=o;s=J=null,t.secureEndpoint&&(Sr("upgrading proxy-connected socket to TLS connection: %o",t.host),t.socket=o,t.servername=t.servername||t.host,t.host=null,t.hostname=null,t.port=null,wt=fp.connect(t)),c(),e.once("socket",Nw),n(null,wt)}else c(),o.destroy(),o=new lp.Socket,o.readable=!0,s=J,e.once("socket",I),n(null,o)}function I(ie){Sr("replaying proxy buffer for failed request"),Dw(ie.listenerCount("data")>0),ie.push(s),s=null}o.on("error",m),o.on("close",u),o.on("end",d),l();var F=t.host+":"+t.port,M="CONNECT "+F+` HTTP/1.1\r
`,K=Object.assign({},i.headers);i.auth&&(K["Proxy-Authorization"]="Basic "+Buffer.from(i.auth).toString("base64"));var ve=t.host;Fw(t.port,t.secureEndpoint)||(ve+=":"+t.port),K.Host=ve,K.Connection="close",Object.keys(K).forEach(function(ie){M+=ie+": "+K[ie]+`\r
`}),o.write(M+`\r
`)};function Nw(r){r.resume()}function Fw(r,e){return Boolean(!e&&r===80||e&&r===443)}});var Ep=f(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});var ct=require("path"),Qe=require("fs"),_p=Object.prototype.toString;function Ko(r){return typeof r<"u"}function kw(r){return _p.call(r)==="[object Number]"}function At(r){return _p.call(r)==="[object String]"}function Lw(r){return r===!0||r===!1}function on(r){return JSON.parse(Qe.readFileSync(r,"utf8"))}var nn;(function(r){r.file="file",r.bundle="bundle",r.both="both"})(nn=Jt.MessageFormat||(Jt.MessageFormat={}));var mp;(function(r){r.standalone="standalone",r.languagePack="languagePack"})(mp=Jt.BundleFormat||(Jt.BundleFormat={}));var vp;(function(r){function e(t){var n=t;return n&&Ko(n.key)&&Ko(n.comment)}r.is=e})(vp||(vp={}));var yp,Jo,V,Qo;function jw(){if(V={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:nn.bundle},At(process.env.VSCODE_NLS_CONFIG))try{var r=JSON.parse(process.env.VSCODE_NLS_CONFIG),e=void 0,t=void 0;if(r.availableLanguages){var n=r.availableLanguages["*"];At(n)&&(e=n)}if(At(r.locale)&&(V.locale=r.locale.toLowerCase()),e===void 0?V.language=V.locale:e!=="en"&&(V.language=e),Lw(r._languagePackSupport)&&(V.languagePackSupport=r._languagePackSupport),At(r._cacheRoot)&&(V.cacheRoot=r._cacheRoot),At(r._languagePackId)&&(V.languagePackId=r._languagePackId),At(r._translationsConfigFile)){V.translationsConfigFile=r._translationsConfigFile;try{V.translationsConfig=on(V.translationsConfigFile)}catch{if(r._corruptedFile){var i=ct.dirname(r._corruptedFile);Qe.exists(i,function(s){s&&Qe.writeFile(r._corruptedFile,"corrupted","utf8",function(a){console.error(a)})})}}}}catch{}Qo=V.locale==="pseudo",yp=void 0,Jo=Object.create(null)}jw();function Mw(){return V.languagePackSupport===!0&&V.cacheRoot!==void 0&&V.languagePackId!==void 0&&V.translationsConfigFile!==void 0&&V.translationsConfig!==void 0}function Nu(r,e){var t;return Qo&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,function(n,i){var o=i[0],s=e[o],a=n;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),t}function Du(r){return function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(kw(e)){if(e>=r.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `+new Error("").stack);return}return Nu(r[e],n)}else{if(At(t))return console.warn("Message "+t+" didn't get externalized correctly."),Nu(t,n);console.error(`Broken localize call found. Stacktrace is
: `+new Error("").stack)}}}function Uw(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return Nu(e,t)}function Hw(r){var e;if(V.cacheLanguageResolution&&e)e=e;else{if(Qo||!V.language)e=".nls.json";else for(var t=V.language;t;){var n=".nls."+t+".json";if(Qe.existsSync(r+n)){e=n;break}else{var i=t.lastIndexOf("-");i>0?t=t.substring(0,i):(e=".nls.json",t=null)}}V.cacheLanguageResolution&&(e=e)}return r+e}function Gw(r){for(var e=V.language;e;){var t=ct.join(r,"nls.bundle."+e+".json");if(Qe.existsSync(t))return t;var n=e.lastIndexOf("-");n>0?e=e.substring(0,n):e=void 0}if(e===void 0){var t=ct.join(r,"nls.bundle.json");if(Qe.existsSync(t))return t}}function Bw(r){var e=on(ct.join(r,"nls.metadata.json")),t=Object.create(null);for(var n in e){var i=e[n];t[n]=i.messages}return t}function Vw(r,e){var t=V.translationsConfig[r.id];if(!!t){var n=on(t).contents,i=on(ct.join(e,"nls.metadata.json")),o=Object.create(null);for(var s in i){var a=i[s],l=n[r.outDir+"/"+s];if(l){for(var c=[],u=0;u<a.keys.length;u++){var d=a.keys[u],m=At(d)?d:d.key,E=l[m];E===void 0&&(E=a.messages[u]),c.push(E)}o[s]=c}else o[s]=a.messages}return o}}function zw(r){var e=new Date;Qe.utimes(r,e,e,function(){})}function qu(r,e){return Jo[r]=e,e}function Xw(r,e){var t,n=ct.join(V.cacheRoot,r.id+"-"+r.hash+".json"),i=!1,o=!1;try{return t=JSON.parse(Qe.readFileSync(n,{encoding:"utf8",flag:"r"})),zw(n),t}catch(s){if(s.code==="ENOENT")o=!0;else if(s instanceof SyntaxError)console.log("Syntax error parsing message bundle: "+s.message+"."),Qe.unlink(n,function(a){a&&console.error("Deleting corrupted bundle "+n+" failed.")}),i=!0;else throw s}if(t=Vw(r,e),!t||i)return t;if(o)try{Qe.writeFileSync(n,JSON.stringify(t),{encoding:"utf8",flag:"wx"})}catch(s){if(s.code==="EEXIST")return t;throw s}return t}function gp(r){try{return Bw(r)}catch(e){console.log("Generating default bundle from meta data failed.",e);return}}function Ww(r,e){var t;if(Mw())try{t=Xw(r,e)}catch(i){console.log("Load or create bundle failed ",i)}if(!t){if(V.languagePackSupport)return gp(e);var n=Gw(e);if(n)try{return on(n)}catch(i){console.log("Loading in the box message bundle failed.",i)}t=gp(e)}return t}function $w(r){for(var e,t=ct.dirname(r);e=ct.join(t,"nls.metadata.header.json"),!Qe.existsSync(e);){var n=ct.dirname(t);if(n===t){e=void 0;break}else t=n}return e}function bp(r){if(!r)return Uw;var e=ct.extname(r);if(e&&(r=r.substr(0,r.length-e.length)),V.messageFormat===nn.both||V.messageFormat===nn.bundle){var t=$w(r);if(t){var n=ct.dirname(t),i=Jo[n];if(i===void 0)try{var o=JSON.parse(Qe.readFileSync(t,"utf8"));try{var s=Ww(o,n);i=qu(n,s?{header:o,nlsBundle:s}:null)}catch(u){console.error("Failed to load nls bundle",u),i=qu(n,null)}}catch(u){console.error("Failed to read header file",u),i=qu(n,null)}if(i){var a=r.substr(n.length+1).replace(/\\/g,"/"),l=i.nlsBundle[a];return l===void 0?(console.error("Messages for file "+r+" not found. See console for details."),function(){return"Messages not found."}):Du(l)}}}if(V.messageFormat===nn.both||V.messageFormat===nn.file)try{var c=on(Hw(r));return Array.isArray(c)?Du(c):Ko(c.messages)&&Ko(c.keys)?Du(c.messages):(console.error("String bundle '"+r+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(u){u.code!=="ENOENT"&&console.error("Failed to load single file bundle",u)}return console.error("Failed to load message bundle for file "+r),function(){return"Failed to load message bundle. See console for details."}}Jt.loadMessageBundle=bp;function Yw(r){return r&&(At(r.locale)&&(V.locale=r.locale.toLowerCase(),V.language=V.locale,yp=void 0,Jo=Object.create(null)),r.messageFormat!==void 0&&(V.messageFormat=r.messageFormat),r.bundleFormat===mp.standalone&&V.languagePackSupport===!0&&(V.languagePackSupport=!1)),Qo=V.locale==="pseudo",bp}Jt.config=Yw});var xp=f(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});var Fu=require("url"),Zw=require("https"),Kw=require("http"),Jw=rp(),Qw=pp(),Cp=require("zlib"),Sp=Ep();Sp.config(process.env.VSCODE_NLS_CONFIG);var ue=Sp.loadMessageBundle(),wp=null,ku=!0;function e0(r,e){wp=r,ku=e}bi.configure=e0;function Op(r){var e=n0(r.url,{proxyUrl:wp,strictSSL:ku});return r=Lu({},r),r=Lu(r,{agent:e,strictSSL:ku}),typeof r.followRedirects!="number"&&(r.followRedirects=5),Tp(r).then(function(t){return new Promise(function(n,i){var o=t.res,s=o,a=o.headers&&o.headers["content-encoding"],l=!1;if(a==="gzip"){var c=Cp.createGunzip();o.pipe(c),s=c}else if(a==="deflate"){var u=Cp.createInflate();o.pipe(u),s=u}var d=[];s.on("data",function(m){return d.push(m)}),s.on("end",function(){if(!l){if(l=!0,r.followRedirects>0&&(o.statusCode>=300&&o.statusCode<=303||o.statusCode===307)){var m=o.headers.location;if(m){var E={type:r.type,url:m,user:r.user,password:r.password,responseType:r.responseType,headers:r.headers,timeout:r.timeout,followRedirects:r.followRedirects-1,data:r.data};Op(E).then(n,i);return}}var I={responseText:d.join(""),status:o.statusCode};o.statusCode>=200&&o.statusCode<300||o.statusCode===1223?n(I):i(I)}}),s.on("error",function(m){var E={responseText:ue("error","Unable to access {0}. Error: {1}",r.url,m.message),status:500};l=!0,i(E)})})},function(t){var n;return e?n=ue("error.cannot.connect.proxy","Unable to connect to {0} through a proxy . Error: {1}",r.url,t.message):n=ue("error.cannot.connect","Unable to connect to {0}. Error: {1}",r.url,t.message),Promise.reject({responseText:n,status:404})})}bi.xhr=Op;function Lu(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(n){return Object.keys(n).forEach(function(i){return r[i]=n[i]})}),r}function Tp(r){var e;return new Promise(function(t,n){var i=Fu.parse(r.url),o={hostname:i.hostname,port:i.port?parseInt(i.port):i.protocol==="https:"?443:80,path:i.path,method:r.type||"GET",headers:r.headers,agent:r.agent,rejectUnauthorized:typeof r.strictSSL=="boolean"?r.strictSSL:!0};r.user&&r.password&&(o.auth=r.user+":"+r.password);var s=function(a){a.statusCode>=300&&a.statusCode<400&&r.followRedirects&&r.followRedirects>0&&a.headers.location?t(Tp(Lu({},r,{url:a.headers.location,followRedirects:r.followRedirects-1}))):t({req:e,res:a})};i.protocol==="https:"?e=Zw.request(o,s):e=Kw.request(o,s),e.on("error",n),r.timeout&&e.setTimeout(r.timeout),r.data&&e.write(r.data),e.end()})}function t0(r){if(!(r<400))switch(r){case 400:return ue("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return ue("status.401","Unauthorized. The server is refusing to respond.");case 403:return ue("status.403","Forbidden. The server is refusing to respond.");case 404:return ue("status.404","Not Found. The requested location could not be found.");case 405:return ue("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return ue("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return ue("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return ue("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return ue("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return ue("status.410","Gone. The requested page is no longer available.");case 411:return ue("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return ue("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return ue("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return ue("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return ue("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return ue("status.500","Internal Server Error.");case 501:return ue("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 503:return ue("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return ue("status.416","HTTP status code {0}",r)}}bi.getErrorStatusDescription=t0;function r0(r){return r.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:r.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}function n0(r,e){e===void 0&&(e={});var t=Fu.parse(r),n=e.proxyUrl||r0(t);if(!n)return null;var i=Fu.parse(n);if(!/^https?:$/.test(i.protocol))return null;var o={host:i.hostname,port:Number(i.port),auth:i.auth,rejectUnauthorized:typeof e.strictSSL=="boolean"?e.strictSSL:!0};return t.protocol==="http:"?new Jw(o):new Qw(o)}});var Pp=f(Rt=>{"use strict";var Ip=Rt&&Rt.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.RequestService=Rt.RestHttpMethodEnum=void 0;var Ap=xp(),wr=Wr(),Rp;(function(r){r.Delete="DELETE",r.Get="GET",r.Post="POST"})(Rp=Rt.RestHttpMethodEnum||(Rt.RestHttpMethodEnum={}));var ju=class{constructor(){this._proxyStrictSSL=!1,this._connectionTimeoutMs=wr.DEFAULT_CONNECTION_TIMEOUT_MS}getEnvVars(){let e=Object.assign({},process.env),t=this.proxyUrl;t&&(e[wr.ENV_HTTP_PROXY]=t,e[wr.ENV_HTTPS_PROXY]=t);let n=this.instanceUrl;n&&(e[wr.ENV_SFDX_INSTANCE_URL]=n);let i=this.accessToken;return i&&(e[wr.ENV_SFDX_DEFAULTUSERNAME]=i),e}get instanceUrl(){return this._instanceUrl}set instanceUrl(e){this._instanceUrl=e}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get proxyUrl(){return this._proxyUrl}set proxyUrl(e){this._proxyUrl=e}get proxyStrictSSL(){return this._proxyStrictSSL}set proxyStrictSSL(e){this._proxyStrictSSL=e}get proxyAuthorization(){return this._proxyAuthorization}set proxyAuthorization(e){this._proxyAuthorization=e}get connectionTimeoutMs(){return this._connectionTimeoutMs||wr.DEFAULT_CONNECTION_TIMEOUT_MS}set connectionTimeoutMs(e){this._connectionTimeoutMs=e}execute(e,t=Rp.Post){return Ip(this,void 0,void 0,function*(){this.proxyUrl&&(0,Ap.configure)(this._proxyUrl,this._proxyStrictSSL);let n=[this.instanceUrl,e.getCommandUrl()],i=e.getQueryString(),o=i?n.join("/").concat("?",i):n.join("/"),s=e.getRequest(),a={type:t,url:o,timeout:this.connectionTimeoutMs,headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/json",Authorization:`OAuth ${this.accessToken}`,"Content-Length":s?Buffer.byteLength(s,"utf-8"):0,"Sforce-Call-Options":`client=${wr.CLIENT_ID}`},data:s};this.proxyAuthorization&&(a.headers["Proxy-Authorization"]=this.proxyAuthorization);try{let l=yield this.sendRequest(a);return Promise.resolve(l.responseText)}catch(l){let c=l;return Promise.reject(c.responseText)}})}sendRequest(e){return Ip(this,void 0,void 0,function*(){return(0,Ap.xhr)(e)})}};Rt.RequestService=ju});var qp=f(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.RestHttpMethodEnum=Qt.RequestService=Qt.BaseCommand=void 0;var i0=Ah();Object.defineProperty(Qt,"BaseCommand",{enumerable:!0,get:function(){return i0.BaseCommand}});var Dp=Pp();Object.defineProperty(Qt,"RequestService",{enumerable:!0,get:function(){return Dp.RequestService}});Object.defineProperty(Qt,"RestHttpMethodEnum",{enumerable:!0,get:function(){return Dp.RestHttpMethodEnum}})});var Fp=f(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0})});var kp=f(Or=>{"use strict";var o0=Or&&Or.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),s0=Or&&Or.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&o0(e,r,t)};Object.defineProperty(Or,"__esModule",{value:!0});s0(Fp(),Or)});var es=f(Ge=>{"use strict";var a0=Ge&&Ge.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Tr=Ge&&Ge.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&a0(e,r,t)};Object.defineProperty(Ge,"__esModule",{value:!0});Tr(es(),Ge);Tr(Sh(),Ge);Tr(Wr(),Ge);Tr(Oh(),Ge);Tr(Ih(),Ge);Tr(qp(),Ge);Tr(kp(),Ge)});var Mp=f(un=>{"use strict";var l0=un&&un.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(un,"__esModule",{value:!0});un.IsvContextUtil=void 0;var Ae=es(),Mu=class{setIsvDebuggerContext(e){return l0(this,void 0,void 0,function*(){let t=!1;if(e){let n=yield new Ae.ForceConfigGet().getConfig(e,Ae.SFDX_CONFIG_ISV_DEBUGGER_SID,Ae.SFDX_CONFIG_ISV_DEBUGGER_URL),i=n.get(Ae.SFDX_CONFIG_ISV_DEBUGGER_SID),o=n.get(Ae.SFDX_CONFIG_ISV_DEBUGGER_URL);typeof i!="undefined"&&typeof o!="undefined"&&(Ae.GlobalCliEnvironment.environmentVariables.set(Ae.ENV_SFDX_DEFAULTUSERNAME,i),Ae.GlobalCliEnvironment.environmentVariables.set(Ae.ENV_SFDX_INSTANCE_URL,o),t=!0)}return t})}resetCliEnvironmentVars(){Ae.GlobalCliEnvironment.environmentVariables.delete(Ae.ENV_SFDX_DEFAULTUSERNAME),Ae.GlobalCliEnvironment.environmentVariables.delete(Ae.ENV_SFDX_INSTANCE_URL),console.log(`Deleted environment variables ${Ae.ENV_SFDX_DEFAULTUSERNAME} and ${Ae.ENV_SFDX_INSTANCE_URL}`)}};un.IsvContextUtil=Mu});var Up=f(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.IsvContextUtil=void 0;var f0=Mp();Object.defineProperty(ts,"IsvContextUtil",{enumerable:!0,get:function(){return f0.IsvContextUtil}})});var Ei=f(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.SFDX_CORE_EXTENSION_NAME=er.SFDX_CORE_CONFIGURATION_NAME=er.SETTING_CLEAR_OUTPUT_TAB=void 0;er.SETTING_CLEAR_OUTPUT_TAB="clearOutputTab";er.SFDX_CORE_CONFIGURATION_NAME="salesforcedx-vscode-core";er.SFDX_CORE_EXTENSION_NAME="salesforcedx-vscode-core"});var is=f(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.SfdxCommandBuilder=tr.CommandBuilder=tr.Command=void 0;var rs=class{constructor(e){this.command=e.command,this.description=e.description,this.args=e.args,this.logName=e.logName}toString(){return this.description?this.description:`${this.command} ${this.args.join(" ")}`}toCommand(){return`${this.command} ${this.args.join(" ")}`}};tr.Command=rs;var ns=class{constructor(e){this.args=[],this.command=e}withDescription(e){return this.description=e,this}withArg(e){return e==="--json"?this.withJson():this.args.push(e),this}withFlag(e,t){return this.args.push(e,t),this}withJson(){return this.args.push("--json"),this.args.push("--loglevel","fatal"),this}withLogName(e){return this.logName=e,this}build(){return new rs(this)}};tr.CommandBuilder=ns;var Uu=class extends ns{constructor(){super("sfdx")}};tr.SfdxCommandBuilder=Uu});var Ci=f(Gp=>{"use strict";var d0=typeof window<"u"&&window,h0=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,p0=typeof global<"u"&&global,Hp=d0||p0||h0;Gp.root=Hp;(function(){if(!Hp)throw new Error("RxJS could not find any global context (window, self, global)")})()});var os=f(Bp=>{"use strict";function v0(r){return typeof r=="function"}Bp.isFunction=v0});var Hu=f(Vp=>{"use strict";Vp.isArray=Array.isArray||function(r){return r&&typeof r.length=="number"}});var Xp=f(zp=>{"use strict";function g0(r){return r!=null&&typeof r=="object"}zp.isObject=g0});var ss=f(Wp=>{"use strict";Wp.errorObject={e:{}}});var Gu=f(Zp=>{"use strict";var $p=ss(),Yp;function _0(){try{return Yp.apply(this,arguments)}catch(r){return $p.errorObject.e=r,$p.errorObject}}function m0(r){return Yp=r,_0}Zp.tryCatch=m0});var Kp=f(as=>{"use strict";var y0=as&&as.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},b0=function(r){y0(e,r);function e(t){r.call(this),this.errors=t;var n=Error.call(this,t?t.length+` errors occurred during unsubscription:
  `+t.map(function(i,o){return o+1+") "+i.toString()}).join(`
  `):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return e}(Error);as.UnsubscriptionError=b0});var ln=f(ev=>{"use strict";var E0=Hu(),C0=Xp(),S0=os(),Jp=Gu(),cn=ss(),us=Kp(),w0=function(){function r(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var n=this,i=n._parent,o=n._parents,s=n._unsubscribe,a=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var l=-1,c=o?o.length:0;i;)i.remove(this),i=++l<c&&o[l]||null;if(S0.isFunction(s)){var u=Jp.tryCatch(s).call(this);u===cn.errorObject&&(e=!0,t=t||(cn.errorObject.e instanceof us.UnsubscriptionError?Qp(cn.errorObject.e.errors):[cn.errorObject.e]))}if(E0.isArray(a))for(l=-1,c=a.length;++l<c;){var d=a[l];if(C0.isObject(d)){var u=Jp.tryCatch(d.unsubscribe).call(d);if(u===cn.errorObject){e=!0,t=t||[];var m=cn.errorObject.e;m instanceof us.UnsubscriptionError?t=t.concat(Qp(m.errors)):t.push(m)}}}if(e)throw new us.UnsubscriptionError(t)}},r.prototype.add=function(e){if(!e||e===r.EMPTY)return r.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new r(e);case"object":if(t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(typeof t._addParent!="function"){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(t),t._addParent(this),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.prototype._addParent=function(e){var t=this,n=t._parent,i=t._parents;!n||n===e?this._parent=e:i?i.indexOf(e)===-1&&i.push(e):this._parents=[e]},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();ev.Subscription=w0;function Qp(r){return r.reduce(function(e,t){return e.concat(t instanceof us.UnsubscriptionError?t.errors:t)},[])}});var Bu=f(tv=>{"use strict";tv.empty={closed:!0,next:function(r){},error:function(r){throw r},complete:function(){}}});var ls=f(cs=>{"use strict";var O0=Ci(),Vu=O0.root.Symbol;cs.rxSubscriber=typeof Vu=="function"&&typeof Vu.for=="function"?Vu.for("rxSubscriber"):"@@rxSubscriber";cs.$$rxSubscriber=cs.rxSubscriber});var $u=f(fs=>{"use strict";var iv=fs&&fs.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},rv=os(),T0=ln(),zu=Bu(),Xu=ls(),Wu=function(r){iv(e,r);function e(t,n,i){switch(r.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=zu.empty;break;case 1:if(!t){this.destination=zu.empty;break}if(typeof t=="object"){if(x0(t)){var o=t[Xu.rxSubscriber]();this.syncErrorThrowable=o.syncErrorThrowable,this.destination=o,o.add(this)}else this.syncErrorThrowable=!0,this.destination=new nv(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new nv(this,t,n,i);break}}return e.prototype[Xu.rxSubscriber]=function(){return this},e.create=function(t,n,i){var o=new e(t,n,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,n=t._parent,i=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=n,this._parents=i,this},e}(T0.Subscription);fs.Subscriber=Wu;var nv=function(r){iv(e,r);function e(t,n,i,o){r.call(this),this._parentSubscriber=t;var s,a=this;rv.isFunction(n)?s=n:n&&(s=n.next,i=n.error,o=n.complete,n!==zu.empty&&(a=Object.create(n),rv.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=i,this._complete=o}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber;if(this._error)n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)n.syncErrorValue=t,n.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),t}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};n.syncErrorThrowable?(this.__tryOrSetError(n,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(i){throw this.unsubscribe(),i}},e.prototype.__tryOrSetError=function(t,n,i){try{n.call(this._context,i)}catch(o){return t.syncErrorValue=o,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Wu);function x0(r){return r instanceof Wu||"syncErrorThrowable"in r&&r[Xu.rxSubscriber]}});var av=f(sv=>{"use strict";var Yu=$u(),ov=ls(),I0=Bu();function A0(r,e,t){if(r){if(r instanceof Yu.Subscriber)return r;if(r[ov.rxSubscriber])return r[ov.rxSubscriber]()}return!r&&!e&&!t?new Yu.Subscriber(I0.empty):new Yu.Subscriber(r,e,t)}sv.toSubscriber=A0});var cv=f(Si=>{"use strict";var R0=Ci();function uv(r){var e,t=r.Symbol;return typeof t=="function"?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}Si.getSymbolObservable=uv;Si.observable=uv(R0.root);Si.$$observable=Si.observable});var fv=f(lv=>{"use strict";function P0(){}lv.noop=P0});var hv=f(Zu=>{"use strict";var D0=fv();function q0(){for(var r=[],e=0;e<arguments.length;e++)r[e-0]=arguments[e];return dv(r)}Zu.pipe=q0;function dv(r){return r?r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}:D0.noop}Zu.pipeFromArray=dv});var rr=f(pv=>{"use strict";var et=Ci(),N0=av(),F0=cv(),k0=hv(),L0=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this.operator,o=N0.toSubscriber(e,t,n);if(i?i.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},r.prototype.forEach=function(e,t){var n=this;if(t||(et.root.Rx&&et.root.Rx.config&&et.root.Rx.config.Promise?t=et.root.Rx.config.Promise:et.root.Promise&&(t=et.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(i,o){var s;s=n.subscribe(function(a){if(s)try{e(a)}catch(l){o(l),s.unsubscribe()}else e(a)},o,i)})},r.prototype._subscribe=function(e){return this.source.subscribe(e)},r.prototype[F0.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.length===0?this:k0.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;if(e||(et.root.Rx&&et.root.Rx.config&&et.root.Rx.config.Promise?e=et.root.Rx.config.Promise:et.root.Promise&&(e=et.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(n,i){var o;t.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},r.create=function(e){return new r(e)},r}();pv.Observable=L0});var _v=f(ds=>{"use strict";var j0=ds&&ds.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},M0=rr(),U0=Gu(),H0=os(),vv=ss(),G0=ln(),gv=Object.prototype.toString;function B0(r){return!!r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function V0(r){return!!r&&typeof r.on=="function"&&typeof r.off=="function"}function z0(r){return!!r&&gv.call(r)==="[object NodeList]"}function X0(r){return!!r&&gv.call(r)==="[object HTMLCollection]"}function W0(r){return!!r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}var $0=function(r){j0(e,r);function e(t,n,i,o){r.call(this),this.sourceObj=t,this.eventName=n,this.selector=i,this.options=o}return e.create=function(t,n,i,o){return H0.isFunction(i)&&(o=i,i=void 0),new e(t,n,o,i)},e.setupSubscription=function(t,n,i,o,s){var a;if(z0(t)||X0(t))for(var l=0,c=t.length;l<c;l++)e.setupSubscription(t[l],n,i,o,s);else if(W0(t)){var u=t;t.addEventListener(n,i,s),a=function(){return u.removeEventListener(n,i,s)}}else if(V0(t)){var d=t;t.on(n,i),a=function(){return d.off(n,i)}}else if(B0(t)){var m=t;t.addListener(n,i),a=function(){return m.removeListener(n,i)}}else throw new TypeError("Invalid event target");o.add(new G0.Subscription(a))},e.prototype._subscribe=function(t){var n=this.sourceObj,i=this.eventName,o=this.options,s=this.selector,a=s?function(){for(var l=[],c=0;c<arguments.length;c++)l[c-0]=arguments[c];var u=U0.tryCatch(s).apply(void 0,l);u===vv.errorObject?t.error(vv.errorObject.e):t.next(u)}:function(l){return t.next(l)};e.setupSubscription(n,i,a,t,o)},e}(M0.Observable);ds.FromEventObservable=$0});var yv=f(mv=>{"use strict";var Y0=_v();mv.fromEvent=Y0.FromEventObservable.create});var Ku=f(()=>{"use strict";var Z0=rr(),K0=yv();Z0.Observable.fromEvent=K0.fromEvent});var Ev=f(bv=>{"use strict";var J0=Hu();function Q0(r){return!J0.isArray(r)&&r-parseFloat(r)+1>=0}bv.isNumeric=Q0});var Cv=f(hs=>{"use strict";var eO=hs&&hs.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},tO=ln(),rO=function(r){eO(e,r);function e(t,n){r.call(this)}return e.prototype.schedule=function(t,n){return n===void 0&&(n=0),this},e}(tO.Subscription);hs.Action=rO});var wv=f(ps=>{"use strict";var nO=ps&&ps.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Sv=Ci(),iO=Cv(),oO=function(r){nO(e,r);function e(t,n){r.call(this,t,n),this.scheduler=t,this.pending=!1,this.work=n}return e.prototype.schedule=function(t,n){if(n===void 0&&(n=0),this.closed)return this;this.state=t,this.pending=!0;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),Sv.root.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1?n:Sv.root.clearInterval(n)&&void 0||void 0},e.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,n){var i=!1,o=void 0;try{this.work(t)}catch(s){i=!0,o=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var t=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null},e}(iO.Action);ps.AsyncAction=oO});var Tv=f(Ov=>{"use strict";var sO=function(){function r(e,t){t===void 0&&(t=r.now),this.SchedulerAction=e,this.now=t}return r.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},r.now=Date.now?Date.now:function(){return+new Date},r}();Ov.Scheduler=sO});var xv=f(vs=>{"use strict";var aO=vs&&vs.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},uO=Tv(),cO=function(r){aO(e,r);function e(){r.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return e.prototype.flush=function(t){var n=this.actions;if(this.active){n.push(t);return}var i;this.active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this.active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},e}(uO.Scheduler);vs.AsyncScheduler=cO});var Av=f(Iv=>{"use strict";var lO=wv(),fO=xv();Iv.async=new fO.AsyncScheduler(lO.AsyncAction)});var Rv=f(gs=>{"use strict";var dO=gs&&gs.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},hO=Ev(),pO=rr(),Ju=Av(),vO=function(r){dO(e,r);function e(t,n){t===void 0&&(t=0),n===void 0&&(n=Ju.async),r.call(this),this.period=t,this.scheduler=n,(!hO.isNumeric(t)||t<0)&&(this.period=0),(!n||typeof n.schedule!="function")&&(this.scheduler=Ju.async)}return e.create=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=Ju.async),new e(t,n)},e.dispatch=function(t){var n=t.index,i=t.subscriber,o=t.period;i.next(n),!i.closed&&(t.index+=1,this.schedule(t,o))},e.prototype._subscribe=function(t){var n=0,i=this.period,o=this.scheduler;t.add(o.schedule(e.dispatch,i,{index:n,subscriber:t,period:i}))},e}(pO.Observable);gs.IntervalObservable=vO});var Dv=f(Pv=>{"use strict";var gO=Rv();Pv.interval=gO.IntervalObservable.create});var qv=f(()=>{"use strict";var _O=rr(),mO=Dv();_O.Observable.interval=mO.interval});var Nv=f(_s=>{"use strict";var yO=_s&&_s.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},bO=function(r){yO(e,r);function e(){var t=r.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return e}(Error);_s.ObjectUnsubscribedError=bO});var Fv=f(ms=>{"use strict";var EO=ms&&ms.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},CO=ln(),SO=function(r){EO(e,r);function e(t,n){r.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,!(!n||n.length===0||t.isStopped||t.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(CO.Subscription);ms.SubjectSubscription=SO});var Mv=f(fn=>{"use strict";var tc=fn&&fn.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},kv=rr(),wO=$u(),Qu=ln(),wi=Nv(),OO=Fv(),TO=ls(),Lv=function(r){tc(e,r);function e(t){r.call(this,t),this.destination=t}return e}(wO.Subscriber);fn.SubjectSubscriber=Lv;var jv=function(r){tc(e,r);function e(){r.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return e.prototype[TO.rxSubscriber]=function(){return new Lv(this)},e.prototype.lift=function(t){var n=new ec(this,this);return n.operator=t,n},e.prototype.next=function(t){if(this.closed)throw new wi.ObjectUnsubscribedError;if(!this.isStopped)for(var n=this.observers,i=n.length,o=n.slice(),s=0;s<i;s++)o[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new wi.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,i=n.length,o=n.slice(),s=0;s<i;s++)o[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new wi.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),o=0;o<n;o++)i[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new wi.ObjectUnsubscribedError;return r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new wi.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),Qu.Subscription.EMPTY):this.isStopped?(t.complete(),Qu.Subscription.EMPTY):(this.observers.push(t),new OO.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new kv.Observable;return t.source=this,t},e.create=function(t,n){return new ec(t,n)},e}(kv.Observable);fn.Subject=jv;var ec=function(r){tc(e,r);function e(t,n){r.call(this),this.destination=t,this.source=n}return e.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},e.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var n=this.source;return n?this.source.subscribe(t):Qu.Subscription.EMPTY},e}(jv);fn.AnonymousSubject=ec});var zv=f((iN,Vv)=>{"use strict";var Bv=require("child_process"),Uv=Bv.spawn,xO=Bv.exec;Vv.exports=function(r,e,t){if(typeof e=="function"&&t===void 0&&(t=e,e=void 0),r=parseInt(r),Number.isNaN(r)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},i={};switch(n[r]=[],i[r]=1,process.platform){case"win32":xO("taskkill /pid "+r+" /T /F",t);break;case"darwin":rc(r,n,i,function(o){return Uv("pgrep",["-P",o])},function(){Hv(n,e,t)});break;default:rc(r,n,i,function(o){return Uv("ps",["-o","pid","--no-headers","--ppid",o])},function(){Hv(n,e,t)});break}};function Hv(r,e,t){var n={};try{Object.keys(r).forEach(function(i){r[i].forEach(function(o){n[o]||(Gv(o,e),n[o]=1)}),n[i]||(Gv(i,e),n[i]=1)})}catch(i){if(t)return t(i);throw i}if(t)return t()}function Gv(r,e){try{process.kill(parseInt(r,10),e)}catch(t){if(t.code!=="ESRCH")throw t}}function rc(r,e,t,n,i){var o=n(r),s="";o.stdout.on("data",function(c){var c=c.toString("ascii");s+=c});var a=function(l){if(delete t[r],l!=0){Object.keys(t).length==0&&i();return}s.match(/\d+/g).forEach(function(c){c=parseInt(c,10),e[r].push(c),e[c]=[],t[c]=1,rc(c,e,t,n,i)})};o.on("close",a)}});var Zv=f((oN,Yv)=>{Yv.exports=$v;$v.sync=AO;var Xv=require("fs");function IO(r,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var n=0;n<t.length;n++){var i=t[n].toLowerCase();if(i&&r.substr(-i.length).toLowerCase()===i)return!0}return!1}function Wv(r,e,t){return!r.isSymbolicLink()&&!r.isFile()?!1:IO(e,t)}function $v(r,e,t){Xv.stat(r,function(n,i){t(n,n?!1:Wv(i,r,e))})}function AO(r,e){return Wv(Xv.statSync(r),r,e)}});var tg=f((sN,eg)=>{eg.exports=Jv;Jv.sync=RO;var Kv=require("fs");function Jv(r,e,t){Kv.stat(r,function(n,i){t(n,n?!1:Qv(i,e))})}function RO(r,e){return Qv(Kv.statSync(r),e)}function Qv(r,e){return r.isFile()&&PO(r,e)}function PO(r,e){var t=r.mode,n=r.uid,i=r.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),s=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),l=parseInt("010",8),c=parseInt("001",8),u=a|l,d=t&c||t&l&&i===s||t&a&&n===o||t&u&&o===0;return d}});var ng=f((uN,rg)=>{var aN=require("fs"),ys;process.platform==="win32"||global.TESTING_WINDOWS?ys=Zv():ys=tg();rg.exports=nc;nc.sync=DO;function nc(r,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){nc(r,e||{},function(o,s){o?i(o):n(s)})})}ys(r,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),t(n,i)})}function DO(r,e){try{return ys.sync(r,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var lg=f((cN,cg)=>{var dn=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ig=require("path"),qO=dn?";":":",og=ng(),sg=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),ag=(r,e)=>{let t=e.colon||qO,n=r.match(/\//)||dn&&r.match(/\\/)?[""]:[...dn?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],i=dn?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=dn?i.split(t):[""];return dn&&r.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},ug=(r,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=ag(r,e),s=[],a=c=>new Promise((u,d)=>{if(c===n.length)return e.all&&s.length?u(s):d(sg(r));let m=n[c],E=/^".*"$/.test(m)?m.slice(1,-1):m,I=ig.join(E,r),F=!E&&/^\.[\\\/]/.test(r)?r.slice(0,2)+I:I;u(l(F,c,0))}),l=(c,u,d)=>new Promise((m,E)=>{if(d===i.length)return m(a(u+1));let I=i[d];og(c+I,{pathExt:o},(F,M)=>{if(!F&&M)if(e.all)s.push(c+I);else return m(c+I);return m(l(c,u,d+1))})});return t?a(0).then(c=>t(null,c),t):a(0)},NO=(r,e)=>{e=e||{};let{pathEnv:t,pathExt:n,pathExtExe:i}=ag(r,e),o=[];for(let s=0;s<t.length;s++){let a=t[s],l=/^".*"$/.test(a)?a.slice(1,-1):a,c=ig.join(l,r),u=!l&&/^\.[\\\/]/.test(r)?r.slice(0,2)+c:c;for(let d=0;d<n.length;d++){let m=u+n[d];try{if(og.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw sg(r)};cg.exports=ug;ug.sync=NO});var dg=f((lN,ic)=>{"use strict";var fg=(r={})=>{let e=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};ic.exports=fg;ic.exports.default=fg});var gg=f((fN,vg)=>{"use strict";var hg=require("path"),FO=lg(),kO=dg();function pg(r,e){let t=r.options.env||process.env,n=process.cwd(),i=r.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(r.options.cwd)}catch{}let s;try{s=FO.sync(r.command,{path:t[kO({env:t})],pathExt:e?hg.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return s&&(s=hg.resolve(i?r.options.cwd:"",s)),s}function LO(r){return pg(r)||pg(r,!0)}vg.exports=LO});var _g=f((dN,sc)=>{"use strict";var oc=/([()\][%!^"`<>&|;, *?])/g;function jO(r){return r=r.replace(oc,"^$1"),r}function MO(r,e){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(oc,"^$1"),e&&(r=r.replace(oc,"^$1")),r}sc.exports.command=jO;sc.exports.argument=MO});var yg=f((hN,mg)=>{"use strict";mg.exports=/^#!(.*)/});var Eg=f((pN,bg)=>{"use strict";var UO=yg();bg.exports=(r="")=>{let e=r.match(UO);if(!e)return null;let[t,n]=e[0].replace(/#! ?/,"").split(" "),i=t.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var Sg=f((vN,Cg)=>{"use strict";var ac=require("fs"),HO=Eg();function GO(r){let t=Buffer.alloc(150),n;try{n=ac.openSync(r,"r"),ac.readSync(n,t,0,150,0),ac.closeSync(n)}catch{}return HO(t.toString())}Cg.exports=GO});var xg=f((gN,Tg)=>{"use strict";var BO=require("path"),wg=gg(),Og=_g(),VO=Sg(),zO=process.platform==="win32",XO=/\.(?:com|exe)$/i,WO=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function $O(r){r.file=wg(r);let e=r.file&&VO(r.file);return e?(r.args.unshift(r.file),r.command=e,wg(r)):r.file}function YO(r){if(!zO)return r;let e=$O(r),t=!XO.test(e);if(r.options.forceShell||t){let n=WO.test(e);r.command=BO.normalize(r.command),r.command=Og.command(r.command),r.args=r.args.map(o=>Og.argument(o,n));let i=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${i}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function ZO(r,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let n={command:r,args:e,options:t,file:void 0,original:{command:r,args:e}};return t.shell?n:YO(n)}Tg.exports=ZO});var Rg=f((_N,Ag)=>{"use strict";var uc=process.platform==="win32";function cc(r,e){return Object.assign(new Error(`${e} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${r.command}`,path:r.command,spawnargs:r.args})}function KO(r,e){if(!uc)return;let t=r.emit;r.emit=function(n,i){if(n==="exit"){let o=Ig(i,e,"spawn");if(o)return t.call(r,"error",o)}return t.apply(r,arguments)}}function Ig(r,e){return uc&&r===1&&!e.file?cc(e.original,"spawn"):null}function JO(r,e){return uc&&r===1&&!e.file?cc(e.original,"spawnSync"):null}Ag.exports={hookChildProcess:KO,verifyENOENT:Ig,verifyENOENTSync:JO,notFoundError:cc}});var qg=f((mN,hn)=>{"use strict";var Pg=require("child_process"),lc=xg(),fc=Rg();function Dg(r,e,t){let n=lc(r,e,t),i=Pg.spawn(n.command,n.args,n.options);return fc.hookChildProcess(i,n),i}function QO(r,e,t){let n=lc(r,e,t),i=Pg.spawnSync(n.command,n.args,n.options);return i.error=i.error||fc.verifyENOENTSync(i.status,n),i}hn.exports=Dg;hn.exports.spawn=Dg;hn.exports.sync=QO;hn.exports._parse=lc;hn.exports._enoent=fc});var xi=f(Ue=>{"use strict";var Es=Ue&&Ue.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.CliCommandExecution=Ue.CompositeCliCommandExecution=Ue.CompositeCliCommandExecutor=Ue.CliCommandExecutor=Ue.GlobalCliEnvironment=void 0;var eT=require("os");Ku();qv();var pn=rr(),bs=Mv(),tT=zv(),rT=qg(),Oi=class{};Ue.GlobalCliEnvironment=Oi;Oi.environmentVariables=new Map;var Ti=class{constructor(e,t,n=!0){this.command=e,this.options=n?Ti.patchEnv(t,Oi.environmentVariables):t}static patchEnv(e,t){let n=Object.create(null);return Object.assign(n,process.env),t.forEach((i,o)=>{n[o]=i}),n&&(n.SFDX_TOOL="salesforce-vscode-extensions"),typeof e.env!="undefined"&&Object.assign(n,e.env),e.env=n,e}execute(e){let t=rT(this.command.command,this.command.args,this.options);return new Ss(this.command,t,e)}};Ue.CliCommandExecutor=Ti;var dc=class{constructor(e){this.command=e}execute(e){return new Cs(this.command,e)}};Ue.CompositeCliCommandExecutor=dc;var Cs=class{constructor(e,t){this.exitSubject=new bs.Subject,this.errorSubject=new bs.Subject,this.stdout=new bs.Subject,this.stderr=new bs.Subject,this.command=e,this.cancellationToken=t,this.processExitSubject=this.exitSubject.asObservable(),this.processErrorSubject=this.errorSubject.asObservable(),this.stdoutSubject=this.stdout.asObservable(),this.stderrSubject=this.stderr.asObservable();let n;t&&(n=pn.Observable.interval(1e3).subscribe(o=>Es(this,void 0,void 0,function*(){if(t.isCancellationRequested)try{this.exitSubject.next()}catch(s){console.log(s)}}))),this.processErrorSubject.subscribe(i=>{n&&n.unsubscribe()}),this.processExitSubject.subscribe(i=>{n&&n.unsubscribe()})}successfulExit(){this.exitSubject.next(0)}failureExit(e){e&&this.stderr.next(`${e}${eT.EOL}`),this.exitSubject.next(1)}};Ue.CompositeCliCommandExecution=Cs;var Ss=class{constructor(e,t,n){this.command=e,this.cancellationToken=n,this.childProcessPid=t.pid;let i;this.processExitSubject=pn.Observable.fromEvent(t,"exit"),this.processExitSubject.subscribe(o=>{i&&i.unsubscribe()}),this.processErrorSubject=pn.Observable.fromEvent(t,"error"),this.processErrorSubject.subscribe(o=>{i&&i.unsubscribe()}),this.stdoutSubject=pn.Observable.fromEvent(t.stdout,"data"),this.stderrSubject=pn.Observable.fromEvent(t.stderr,"data"),n&&(i=pn.Observable.interval(1e3).subscribe(s=>Es(this,void 0,void 0,function*(){if(n.isCancellationRequested)try{yield this.killExecution()}catch(a){console.log(a)}})))}killExecution(e="SIGKILL"){return Es(this,void 0,void 0,function*(){return nT(this.childProcessPid,e)})}};Ue.CliCommandExecution=Ss;function nT(r,e){return Es(this,void 0,void 0,function*(){return new Promise((t,n)=>{tT(r,e,i=>{i?n(i):t()})})})}});var ws=f(vn=>{"use strict";var iT=vn&&vn.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(vn,"__esModule",{value:!0});vn.CommandOutput=void 0;var hc=class{constructor(){this.stdoutBuffer="",this.stderrBuffer=""}getCmdResult(e){return iT(this,void 0,void 0,function*(){return e.stdoutSubject.subscribe(t=>{this.stdoutBuffer+=t.toString()}),e.stderrSubject.subscribe(t=>{this.stderrBuffer+=t.toString()}),new Promise((t,n)=>{e.processExitSubject.subscribe(i=>i!==void 0&&String(i)==="0"?t(this.stdoutBuffer):n(this.stderrBuffer||this.stdoutBuffer))})})}};vn.CommandOutput=hc});var Ng=f(gn=>{"use strict";var oT=gn&&gn.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(gn,"__esModule",{value:!0});gn.ForceConfigGet=void 0;var sT=is(),aT=xi(),uT=ws(),pc=class{getConfig(e,...t){return oT(this,void 0,void 0,function*(){let n=new sT.SfdxCommandBuilder().withArg("force:config:get");t.forEach(a=>n.withArg(a));let i=new aT.CliCommandExecutor(n.withJson().build(),{cwd:e}).execute(),s=yield new uT.CommandOutput().getCmdResult(i);try{let a=new Map;return JSON.parse(s).result.forEach(c=>a.set(c.key,c.value)),Promise.resolve(a)}catch(a){return Promise.reject(a)}})}};gn.ForceConfigGet=pc});var Fg=f(_n=>{"use strict";var cT=_n&&_n.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(_n,"__esModule",{value:!0});_n.ForceOrgDisplay=void 0;var lT=is(),fT=xi(),dT=ws(),vc=class{getOrgInfo(e){return cT(this,void 0,void 0,function*(){let t=new fT.CliCommandExecutor(new lT.SfdxCommandBuilder().withArg("force:org:display").withJson().build(),{cwd:e}).execute(),i=yield new dT.CommandOutput().getCmdResult(t);try{let o=JSON.parse(i).result;return Promise.resolve(o)}catch(o){return Promise.reject(i)}})}};_n.ForceOrgDisplay=vc});var kg=f(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.LocalCommandExecution=void 0;var hT=require("events");Ku();var Os=rr(),He=class{constructor(e){this.cmdEmitter=new hT.EventEmitter,this.command=e,this.processExitSubject=Os.Observable.fromEvent(this.cmdEmitter,He.EXIT_EVENT),this.processErrorSubject=Os.Observable.fromEvent(this.cmdEmitter,He.ERROR_EVENT),this.stdoutSubject=Os.Observable.fromEvent(this.cmdEmitter,He.STDOUT_EVENT),this.stderrSubject=Os.Observable.fromEvent(this.cmdEmitter,He.STDERR_EVENT)}};Ts.LocalCommandExecution=He;He.EXIT_EVENT="exitEvent";He.ERROR_EVENT="errorEvent";He.STDOUT_EVENT="stdoutEvent";He.STDERR_EVENT="stderrEvent";He.SUCCESS_CODE=0;He.FAILURE_CODE=1});var _c=f(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.workspaceUtils=void 0;var Lg=require("vscode");function jg(r=Lg.workspace){return r&&r.workspaceFolders&&r.workspaceFolders.length>0}function gc(){return jg()?Lg.workspace.workspaceFolders[0]:{}}function pT(){return gc().uri?gc().uri.fsPath:""}xs.workspaceUtils={hasRootWorkspace:jg,getRootWorkspace:gc,getRootWorkspacePath:pT}});var Gg=f(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.projectPaths=Se.fileExtensionsMatch=Se.getRelativeProjectPath=Se.getTestResultsFolder=Se.ensureDirectoryExists=void 0;var mc=require("@salesforce/core"),Mg=require("fs"),we=require("path"),vT=mn(),Ug=_c(),gT="orgs",_T="metadata",Is="tools",yc="testresults",mT="apex",yT="debug",bT="logs",ET="apex.db",CT="lwc",ST="sfdx-config.json";function bc(r){Mg.existsSync(r)||(bc(we.dirname(r)),Mg.mkdirSync(r))}Se.ensureDirectoryExists=bc;function wT(r,e){let t=we.join(r,mc.Global.STATE_FOLDER,Is,yc,e);return bc(t),t}Se.getTestResultsFolder=wT;function OT(r="",e){let t;for(let n of e)if(n.startsWith(we.sep)||(n=we.sep+n),n.endsWith(we.sep)||(n=n+we.sep),t=r.indexOf(n),t!==-1){t+=1;break}return t!==-1?r.slice(t):r}Se.getRelativeProjectPath=OT;function TT(r,e){var t;return((t=r.path.split(".").pop())===null||t===void 0?void 0:t.toLowerCase())===e.toLowerCase()}Se.fileExtensionsMatch=TT;function xT(){return Ug.workspaceUtils.hasRootWorkspace()?we.join(Ug.workspaceUtils.getRootWorkspacePath(),mc.Global.SFDX_STATE_FOLDER):""}function IT(){let r=vT.WorkspaceContextUtil.getInstance().username;return we.join(Se.projectPaths.stateFolder(),gT,String(r),_T)}function AT(){return we.join(Ii(),yc,mT)}function RT(){return we.join(Ii(),ET)}function PT(){return we.join(Hg(),CT)}function Hg(){return we.join(Ii(),yc)}function DT(){return we.join(Ii(),yT,bT)}function qT(){return we.join(Se.projectPaths.stateFolder(),ST)}function Ii(){return we.join(Se.projectPaths.stateFolder(),Is)}function NT(){return mc.Global.STATE_FOLDER}function FT(){return we.join(Se.projectPaths.relativeStateFolder(),Is)}Se.projectPaths={stateFolder:xT,metadataFolder:IT,testResultsFolder:Hg,apexTestResultsFolder:AT,apexLanguageServerDatabase:RT,debugLogsFolder:DT,sfdxProjectConfig:qT,toolsFolder:Ii,lwcTestResultsFolder:PT,relativeStateFolder:NT,relativeToolsFolder:FT,TOOLS:Is}});var Sc=f(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.Message=ye.Localization=ye.MISSING_LABEL_MSG=ye.LOCALE_JA=ye.DEFAULT_LOCALE=ye.BASE_FILE_EXTENSION=ye.BASE_FILE_NAME=void 0;var Bg=require("util");ye.BASE_FILE_NAME="i18n";ye.BASE_FILE_EXTENSION="js";ye.DEFAULT_LOCALE="en";ye.LOCALE_JA="ja";ye.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";var Ec=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};ye.Localization=Ec;var Cc=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...t){let n=this.getLabel(e);if(!n)return console.warn(`Missing label for key: ${e}`),n=`${ye.MISSING_LABEL_MSG} ${e}`,t.length>=1&&t.forEach(i=>{n+=` (${i})`}),n;if(t.length>=1){let i=n.split("%s").length-1;return t.length!==i&&console.log(`Arguments do not match for label '${e}', got ${t.length} but want ${i}`),t.unshift(n),Bg.format.apply(Bg,t)}return n}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}};ye.Message=Cc});var wc=f(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.MISSING_LABEL_MSG=Oe.Message=Oe.Localization=Oe.LOCALE_JA=Oe.DEFAULT_LOCALE=Oe.BASE_FILE_NAME=Oe.BASE_FILE_EXTENSION=void 0;var Ir=Sc();Object.defineProperty(Oe,"BASE_FILE_EXTENSION",{enumerable:!0,get:function(){return Ir.BASE_FILE_EXTENSION}});Object.defineProperty(Oe,"BASE_FILE_NAME",{enumerable:!0,get:function(){return Ir.BASE_FILE_NAME}});Object.defineProperty(Oe,"DEFAULT_LOCALE",{enumerable:!0,get:function(){return Ir.DEFAULT_LOCALE}});Object.defineProperty(Oe,"LOCALE_JA",{enumerable:!0,get:function(){return Ir.LOCALE_JA}});Object.defineProperty(Oe,"Localization",{enumerable:!0,get:function(){return Ir.Localization}});Object.defineProperty(Oe,"Message",{enumerable:!0,get:function(){return Ir.Message}});Object.defineProperty(Oe,"MISSING_LABEL_MSG",{enumerable:!0,get:function(){return Ir.MISSING_LABEL_MSG}})});var Vg=f(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.messages=void 0;As.messages={sfdx_cli_not_found:"Salesforce CLI is not installed. Install it from [%s](%s)",telemetry_legal_dialog_message:"You agree that Salesforce Extensions for VS Code may collect usage information, user environment, and crash reports for product improvements. Learn how to [opt out](%s).",telemetry_legal_dialog_button_text:"Read more",progress_notification_text:"Running %s",notification_successful_execution_text:"%s successfully ran",notification_canceled_execution_text:"%s was canceled",notification_unsuccessful_execution_text:"%s failed to run",notification_show_button_text:"Show",notification_show_in_status_bar_button_text:"Show Only in Status Bar",error_no_default_username:'No default org is set. Run "SFDX: Create a Default Scratch Org" or "SFDX: Authorize an Org" to set one.',cannot_determine_workspace:"Unable to determine workspace folders for workspace",channel_name:"Salesforce CLI",channel_starting_message:"Starting ",channel_end_with_exit_code:"ended with exit code %s",channel_end_with_sfdx_not_found:"Salesforce CLI is not installed. Install it from https://developer.salesforce.com/tools/sfdxcli",channel_end_with_error:"ended with error %s",channel_end:"ended",predicates_no_folder_opened_text:"No folder opened. Open a Salesforce DX project in VS Code.",predicates_no_sfdx_project_found_text:"No sfdx-project.json found in the root directory of your open project. Open a Salesforce DX project in VS Code.",trace_flags_unknown_user:"Unknown user",trace_flags_failed_to_create_debug_level:"Failed to create a debug level"}});var zg=f(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.messages=void 0;Rs.messages={sfdx_cli_not_found:"Salesforce CLI \u304C\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002[%s](%s) \u304B\u3089\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044\u3002",telemetry_legal_dialog_message:"VS Code \u306E Salesforce \u62E1\u5F35\u6A5F\u80FD\u304C\u88FD\u54C1\u306E\u6539\u5584\u306E\u305F\u3081\u306B\u3001\u5229\u7528\u72B6\u6CC1\u3001\u30E6\u30FC\u30B6\u74B0\u5883\u3001\u30AF\u30E9\u30C3\u30B7\u30E5\u30EC\u30DD\u30FC\u30C8\u3092\u53CE\u96C6\u3059\u308B\u3053\u3068\u306B\u540C\u610F\u3057\u307E\u3057\u305F\u3002[\u30AA\u30D7\u30C8\u30A2\u30A6\u30C8\u306E\u65B9\u6CD5\u306B\u3064\u3044\u3066\u53C2\u7167\u3059\u308B](%s)\u3002",telemetry_legal_dialog_button_text:"\u3055\u3089\u306B\u8868\u793A",progress_notification_text:"%s \u3092\u5B9F\u884C\u3057\u3066\u3044\u307E\u3059\u3002",notification_successful_execution_text:"%s \u304C\u6B63\u5E38\u306B\u5B9F\u884C\u3055\u308C\u307E\u3057\u305F\u3002",notification_canceled_execution_text:"%s \u304C\u30AD\u30E3\u30F3\u30BB\u30EB\u3055\u308C\u307E\u3057\u305F\u3002",notification_unsuccessful_execution_text:"%s \u304C\u5931\u6557\u3057\u307E\u3057\u305F\u3002",notification_show_button_text:"\u8868\u793A",notification_show_in_status_bar_button_text:"\u30B9\u30C6\u30FC\u30BF\u30B9\u30D0\u30FC\u3060\u3051\u306B\u8868\u793A",error_no_default_username:'\u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u7D44\u7E54\u304C\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002"SFDX: \u30C7\u30D5\u30A9\u30EB\u30C8\u306E\u30B9\u30AF\u30E9\u30C3\u30C1\u7D44\u7E54\u3092\u4F5C\u6210" \u307E\u305F\u306F "SFDX: \u7D44\u7E54\u3092\u8A8D\u8A3C" \u3092\u5B9F\u884C\u3057\u7D44\u7E54\u3092\u8A2D\u5B9A\u3057\u3066\u304F\u3060\u3055\u3044\u3002',channel_name:"Salesforce CLI",channel_starting_message:"\u958B\u59CB\u3057\u3066\u3044\u307E\u3059: ",channel_end_with_exit_code:"\u304C\u7D42\u4E86\u30B3\u30FC\u30C9 %s \u3067\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002",channel_end_with_sfdx_not_found:"Salesforce CLI \u304C\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002https://developer.salesforce.com/tools/sfdxcli \u304B\u3089\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3057\u3066\u304F\u3060\u3055\u3044\u3002",channel_end_with_error:"\u304C\u30A8\u30E9\u30FC\u3067\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002%s",channel_end:"\u304C\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002",predicates_no_folder_opened_text:"\u30D5\u30A9\u30EB\u30C0\u304C\u958B\u304B\u308C\u3066\u3044\u307E\u305B\u3093\u3002VS Code \u3067 Salesforce DX \u5F62\u5F0F\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002",predicates_no_sfdx_project_found_text:"\u958B\u304B\u308C\u305F\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306E\u30EB\u30FC\u30C8\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306B sfdx-project.json \u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002VS Code \u3067 Salesforce DX \u5F62\u5F0F\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u3092\u958B\u3044\u3066\u304F\u3060\u3055\u3044\u3002"}});var nr=f(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.nls=void 0;var Ai=wc(),Xg=Sc(),kT=Vg(),LT=zg(),jT=[Ai.DEFAULT_LOCALE,Xg.LOCALE_JA];function MT(r){let e=new Ai.Message(kT.messages),t=r?r.locale:Ai.DEFAULT_LOCALE;return t===Xg.LOCALE_JA?new Ai.Message(LT.messages,e):(jT.indexOf(t)===-1&&console.error(`Cannot find ${t}, defaulting to en`),e)}function UT(){let r=process.env.VSCODE_NLS_CONFIG;return r?JSON.parse(r):null}Ps.nls=new Ai.Localization(MT(UT()))});var xc=f(yn=>{"use strict";var Ar=yn&&yn.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(yn,"__esModule",{value:!0});yn.TraceFlags=void 0;var HT=bn(),Oc=nr(),Tc=class{constructor(e){this.LOG_TIMER_LENGTH_MINUTES=30,this.MILLISECONDS_PER_MINUTE=6e4,this.connection=e}ensureTraceFlags(){return Ar(this,void 0,void 0,function*(){let e=this.connection.getUsername();if(!e)throw new Error(Oc.nls.localize("error_no_default_username"));let n=(yield this.getUserIdOrThrow(e)).Id,i=yield this.getTraceFlagForUser(n);if(i){if(!(yield this.updateDebugLevel(i.DebugLevelId)))return!1;let o=this.calculateExpirationDate(i.ExpirationDate?new Date(i.ExpirationDate):new Date);return yield this.updateTraceFlag(i.Id,o)}else{let o=yield this.createDebugLevel();if(!o)throw new Error(Oc.nls.localize("trace_flags_failed_to_create_debug_level"));let s=this.calculateExpirationDate(new Date);if(!(yield this.createTraceFlag(n,o,s)))return!1}return!0})}updateDebugLevel(e){return Ar(this,void 0,void 0,function*(){let t={Id:e,ApexCode:"FINEST",Visualforce:"FINER"};return(yield this.connection.tooling.update("DebugLevel",t)).success})}createDebugLevel(){return Ar(this,void 0,void 0,function*(){let e=`ReplayDebuggerLevels${Date.now()}`,t={developerName:e,MasterLabel:e,ApexCode:"FINEST",Visualforce:"FINER"},n=yield this.connection.tooling.create("DebugLevel",t);return n.success&&n.id?n.id:void 0})}updateTraceFlag(e,t){return Ar(this,void 0,void 0,function*(){let n={Id:e,StartDate:Date.now(),ExpirationDate:t.toUTCString()};return(yield this.connection.tooling.update("TraceFlag",n)).success})}createTraceFlag(e,t,n){return Ar(this,void 0,void 0,function*(){let i={tracedentityid:e,logtype:"developer_log",debuglevelid:t,StartDate:Date.now(),ExpirationDate:n.toUTCString()},o=yield this.connection.tooling.create("TraceFlag",i);if(o.success&&o.id)return HT.TraceFlagsRemover.getInstance(this.connection).addNewTraceFlagId(o.id),o.id})}isValidDateLength(e){let t=new Date().valueOf();return e.getTime()-t>this.LOG_TIMER_LENGTH_MINUTES*this.MILLISECONDS_PER_MINUTE}calculateExpirationDate(e){return this.isValidDateLength(e)||(e=new Date(Date.now()+this.LOG_TIMER_LENGTH_MINUTES*this.MILLISECONDS_PER_MINUTE)),e}getUserIdOrThrow(e){return Ar(this,void 0,void 0,function*(){let t=`SELECT id FROM User WHERE username='${e}'`,n=yield this.connection.query(t);if(!n.totalSize||n.totalSize===0)throw new Error(Oc.nls.localize("trace_flags_unknown_user"));return n.records[0]})}getTraceFlagForUser(e){return Ar(this,void 0,void 0,function*(){let t=`
      SELECT id, logtype, startdate, expirationdate, debuglevelid, debuglevel.apexcode, debuglevel.visualforce
      FROM TraceFlag
      WHERE logtype='DEVELOPER_LOG' AND TracedEntityId='${e}'
    `,n=yield this.connection.tooling.query(t);if(n.totalSize>0)return n.records[0]})}};yn.TraceFlags=Tc});var Wg=f(En=>{"use strict";var GT=En&&En.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(En,"__esModule",{value:!0});En.TraceFlagsRemover=void 0;var Pt=class{constructor(e){if(this.newTraceFlagIds=new Array,!e)throw Error("connection passed to TraceFlagsRemover is invalid");this.connection=e}static getInstance(e){return Pt._instance||(Pt._instance=new Pt(e)),Pt._instance}static resetInstance(){Pt._instance=void 0}addNewTraceFlagId(e){!e||this.newTraceFlagIds.push(e)}removeNewTraceFlags(){return GT(this,void 0,void 0,function*(){for(;this.newTraceFlagIds&&this.newTraceFlagIds.length>0;){let e=this.newTraceFlagIds.pop();e&&(yield this.connection.tooling.delete("TraceFlag",e))}})}};En.TraceFlagsRemover=Pt});var Zg=f(Te=>{"use strict";var BT=Te&&Te.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Te,"__esModule",{value:!0});Te.fileUtils=Te.asyncFilter=Te.flushFilePaths=Te.flushFilePath=Te.extractJsonObject=Te.isNullOrUndefined=void 0;var VT=require("fs");function zT(r){return r==null}Te.isNullOrUndefined=zT;function $g(r){let e=r.substring(r.indexOf("{"),r.lastIndexOf("}")+1);return JSON.parse(e)}Te.extractJsonObject=$g;function Ic(r){if(r==="")return r;let e=VT.realpathSync.native(r);return/^win32/.test(process.platform)&&(e=e.charAt(0).toLowerCase()+e.slice(1)),e}Te.flushFilePath=Ic;function Yg(r){for(let e=0;e<r.length;e++)r[e]=Ic(r[e]);return r}Te.flushFilePaths=Yg;function XT(r,e){return BT(this,void 0,void 0,function*(){let t=yield Promise.all(r.map(e));return r.filter((n,i)=>t[i])})}Te.asyncFilter=XT;Te.fileUtils={flushFilePaths:Yg,flushFilePath:Ic,extractJsonObject:$g}});var Qg=f(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.isAlphaNumSpaceString=tt.isRecordIdFormat=tt.isAlphaNumString=tt.isIntegerInRange=tt.isInteger=void 0;function Kg(r){return r!==void 0&&!/\D/.test(r)&&Number.isSafeInteger(Number.parseInt(r))}tt.isInteger=Kg;function WT(r,e){return r!==void 0&&Kg(r)&&Number.parseInt(r)>=e[0]&&Number.parseInt(r)<=e[1]}tt.isIntegerInRange=WT;function Jg(r){return r!==void 0&&r!==""&&!/\W/.test(r)}tt.isAlphaNumString=Jg;function $T(r="",e){return Jg(r)&&r.startsWith(e)&&(r.length===15||r.length===18)}tt.isRecordIdFormat=$T;function YT(r){return r!==void 0&&/^\w+( *\w*)*$/.test(r)}tt.isAlphaNumSpaceString=YT});var bn=f(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.isRecordIdFormat=W.isIntegerInRange=W.isInteger=W.isAlphaNumString=W.isAlphaNumSpaceString=W.fileUtils=W.isNullOrUndefined=W.extractJsonObject=W.asyncFilter=W.TraceFlagsRemover=W.TraceFlags=W.projectPaths=W.getRelativeProjectPath=W.getTestResultsFolder=W.fileExtensionsMatch=W.ensureDirectoryExists=void 0;var Ri=Gg();Object.defineProperty(W,"ensureDirectoryExists",{enumerable:!0,get:function(){return Ri.ensureDirectoryExists}});Object.defineProperty(W,"fileExtensionsMatch",{enumerable:!0,get:function(){return Ri.fileExtensionsMatch}});Object.defineProperty(W,"getTestResultsFolder",{enumerable:!0,get:function(){return Ri.getTestResultsFolder}});Object.defineProperty(W,"getRelativeProjectPath",{enumerable:!0,get:function(){return Ri.getRelativeProjectPath}});Object.defineProperty(W,"projectPaths",{enumerable:!0,get:function(){return Ri.projectPaths}});var ZT=xc();Object.defineProperty(W,"TraceFlags",{enumerable:!0,get:function(){return ZT.TraceFlags}});var KT=Wg();Object.defineProperty(W,"TraceFlagsRemover",{enumerable:!0,get:function(){return KT.TraceFlagsRemover}});var Ds=Zg();Object.defineProperty(W,"asyncFilter",{enumerable:!0,get:function(){return Ds.asyncFilter}});Object.defineProperty(W,"extractJsonObject",{enumerable:!0,get:function(){return Ds.extractJsonObject}});Object.defineProperty(W,"isNullOrUndefined",{enumerable:!0,get:function(){return Ds.isNullOrUndefined}});Object.defineProperty(W,"fileUtils",{enumerable:!0,get:function(){return Ds.fileUtils}});var Pi=Qg();Object.defineProperty(W,"isAlphaNumSpaceString",{enumerable:!0,get:function(){return Pi.isAlphaNumSpaceString}});Object.defineProperty(W,"isAlphaNumString",{enumerable:!0,get:function(){return Pi.isAlphaNumString}});Object.defineProperty(W,"isInteger",{enumerable:!0,get:function(){return Pi.isInteger}});Object.defineProperty(W,"isIntegerInRange",{enumerable:!0,get:function(){return Pi.isIntegerInRange}});Object.defineProperty(W,"isRecordIdFormat",{enumerable:!0,get:function(){return Pi.isRecordIdFormat}})});var e_=f(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ForceDeployResultParser=Rr.CONFLICT_ERROR_NAME=void 0;var JT=bn();Rr.CONFLICT_ERROR_NAME="sourceConflictDetected";var Ac=class{constructor(e){try{this.response=(0,JT.extractJsonObject)(e)}catch(t){let n=new Error("Error parsing deploy result");throw n.name="DeployParserFail",n}}getErrors(){if(this.response.status===1)return this.response}getSuccesses(){let{status:e,result:t,partialSuccess:n}=this.response;if(e===0){let{pushedSource:i}=t;return i?{status:e,result:{deployedSource:i}}:this.response}if(n)return{status:e,result:{deployedSource:n}}}hasConflicts(){return this.response.status===1&&this.response.name===Rr.CONFLICT_ERROR_NAME}};Rr.ForceDeployResultParser=Ac});var t_=f(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.OrgCreateResultParser=void 0;var QT=bn(),Rc=class{constructor(e){try{e&&(this.response=(0,QT.extractJsonObject)(e))}catch(t){let n=new Error("Error parsing org create result");throw n.name="OrgCreateParserFail",n}}createIsSuccessful(){return!!(this.response&&this.response.status===0)}getResult(){return this.createIsSuccessful()?this.response:this.response}};qs.OrgCreateResultParser=Rc});var r_=f(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.OrgOpenContainerResultParser=void 0;var Pc=class{constructor(e){try{let t=e.substring(e.indexOf("{"),e.lastIndexOf("}")+1);this.response=JSON.parse(t)}catch(t){let n=new Error("Error parsing org open result");throw n.name="OrgOpenContainerParserFail",n}}openIsSuccessful(){return!!(this.response&&this.response.status===0)}getResult(){return this.openIsSuccessful()?this.response:this.response}};Ns.OrgOpenContainerResultParser=Pc});var n_=f(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.DiffResultParser=void 0;var ex=bn(),Dc=class{constructor(e){try{this.response=(0,ex.extractJsonObject)(e)}catch(t){let n=new Error("Error parsing diff result");throw n.name="DiffResultParserFail",n}}isSuccessful(){return!!(this.response&&this.response.status===0)}getSuccessResponse(){if(this.isSuccessful())return this.response}getErrorResponse(){if(!this.isSuccessful())return this.response}};Fs.DiffResultParser=Dc});var ks=f($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.DiffResultParser=$.OrgOpenContainerResultParser=$.OrgCreateResultParser=$.CONFLICT_ERROR_NAME=$.ForceDeployResultParser=$.LocalCommandExecution=$.ForceOrgDisplay=$.ForceConfigGet=$.CommandOutput=$.GlobalCliEnvironment=$.CompositeCliCommandExecution=$.CompositeCliCommandExecutor=$.CliCommandExecution=$.CliCommandExecutor=$.SfdxCommandBuilder=$.CommandBuilder=void 0;var i_=is();Object.defineProperty($,"CommandBuilder",{enumerable:!0,get:function(){return i_.CommandBuilder}});Object.defineProperty($,"SfdxCommandBuilder",{enumerable:!0,get:function(){return i_.SfdxCommandBuilder}});var Di=xi();Object.defineProperty($,"CliCommandExecutor",{enumerable:!0,get:function(){return Di.CliCommandExecutor}});Object.defineProperty($,"CliCommandExecution",{enumerable:!0,get:function(){return Di.CliCommandExecution}});Object.defineProperty($,"CompositeCliCommandExecutor",{enumerable:!0,get:function(){return Di.CompositeCliCommandExecutor}});Object.defineProperty($,"CompositeCliCommandExecution",{enumerable:!0,get:function(){return Di.CompositeCliCommandExecution}});Object.defineProperty($,"GlobalCliEnvironment",{enumerable:!0,get:function(){return Di.GlobalCliEnvironment}});var tx=ws();Object.defineProperty($,"CommandOutput",{enumerable:!0,get:function(){return tx.CommandOutput}});var rx=Ng();Object.defineProperty($,"ForceConfigGet",{enumerable:!0,get:function(){return rx.ForceConfigGet}});var nx=Fg();Object.defineProperty($,"ForceOrgDisplay",{enumerable:!0,get:function(){return nx.ForceOrgDisplay}});var ix=kg();Object.defineProperty($,"LocalCommandExecution",{enumerable:!0,get:function(){return ix.LocalCommandExecution}});var o_=e_();Object.defineProperty($,"ForceDeployResultParser",{enumerable:!0,get:function(){return o_.ForceDeployResultParser}});Object.defineProperty($,"CONFLICT_ERROR_NAME",{enumerable:!0,get:function(){return o_.CONFLICT_ERROR_NAME}});var ox=t_();Object.defineProperty($,"OrgCreateResultParser",{enumerable:!0,get:function(){return ox.OrgCreateResultParser}});var sx=r_();Object.defineProperty($,"OrgOpenContainerResultParser",{enumerable:!0,get:function(){return sx.OrgOpenContainerResultParser}});var ax=n_();Object.defineProperty($,"DiffResultParser",{enumerable:!0,get:function(){return ax.DiffResultParser}})});var u_=f(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.getRootWorkspacePath=ir.getRootWorkspace=ir.hasRootWorkspace=void 0;var s_=require("vscode");function a_(r=s_.workspace){return r&&r.workspaceFolders&&r.workspaceFolders.length>0}ir.hasRootWorkspace=a_;function qc(){return a_()?s_.workspace.workspaceFolders[0]:{}}ir.getRootWorkspace=qc;function ux(){return qc().uri?qc().uri.fsPath:""}ir.getRootWorkspacePath=ux});var Cn=f(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.workspaceUtils=gt.getRootWorkspacePath=gt.getRootWorkspace=gt.hasRootWorkspace=void 0;var Nc=u_();Object.defineProperty(gt,"hasRootWorkspace",{enumerable:!0,get:function(){return Nc.hasRootWorkspace}});Object.defineProperty(gt,"getRootWorkspace",{enumerable:!0,get:function(){return Nc.getRootWorkspace}});Object.defineProperty(gt,"getRootWorkspacePath",{enumerable:!0,get:function(){return Nc.getRootWorkspacePath}});var cx=_c();Object.defineProperty(gt,"workspaceUtils",{enumerable:!0,get:function(){return cx.workspaceUtils}})});var c_=f(Sn=>{"use strict";var Fc=Sn&&Sn.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.ConfigAggregatorProvider=void 0;var lx=require("@salesforce/core"),kc=Cn(),Dt=class{constructor(){this.configAggregators=new Map}static getInstance(){return Dt.instance===void 0&&(Dt.instance=new Dt),Dt.instance}getConfigAggregator(){return Fc(this,void 0,void 0,function*(){let e=kc.workspaceUtils.getRootWorkspacePath(),t=this.configAggregators.get(e);return t||(t=yield this.createConfigAggregator(),this.configAggregators.set(e,t)),t})}reloadConfigAggregators(){return Fc(this,void 0,void 0,function*(){let e=kc.workspaceUtils.getRootWorkspacePath(),t=this.configAggregators.get(e);t&&(yield t.reload())})}createConfigAggregator(){return Fc(this,void 0,void 0,function*(){let e,t=this.getCurrentDirectory();this.ensureCurrentDirectoryInsideProject(t);try{e=yield lx.ConfigAggregator.create()}finally{this.getCurrentDirectory()!==t&&this.changeCurrentDirectoryTo(t)}return e})}getCurrentDirectory(){return process.cwd()}ensureCurrentDirectoryInsideProject(e){let t=kc.workspaceUtils.getRootWorkspacePath();t&&e!==t&&this.changeCurrentDirectoryTo(t)}changeCurrentDirectoryTo(e){e&&process.chdir(e)}};Sn.ConfigAggregatorProvider=Dt;Dt.defaultBaseProcessDirectoryInVSCE="/"});var Lc=f(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.ConfigAggregatorProvider=void 0;var fx=c_();Object.defineProperty(Ls,"ConfigAggregatorProvider",{enumerable:!0,get:function(){return fx.ConfigAggregatorProvider}})});var jc=f(qt=>{"use strict";var _t=qt&&qt.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(qt,"__esModule",{value:!0});qt.ConfigUtil=qt.ConfigSource=void 0;var rt=require("@salesforce/core"),Pr=Lc(),qi;(function(r){r[r.Local=0]="Local",r[r.Global=1]="Global",r[r.None=2]="None"})(qi=qt.ConfigSource||(qt.ConfigSource={}));var Ni=class{static getConfigSource(e){return _t(this,void 0,void 0,function*(){switch((yield Pr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getLocation(e)){case"Local":return qi.Local;case"Global":return qi.Global;default:return qi.None}})}static getUserConfiguredApiVersion(){return _t(this,void 0,void 0,function*(){let t=(yield Pr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(rt.OrgConfigProperties.ORG_API_VERSION);return t?String(t):void 0})}static getDefaultUsernameOrAlias(){return _t(this,void 0,void 0,function*(){let t=(yield Pr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(rt.OrgConfigProperties.TARGET_ORG);return t?String(t):void 0})}static isGlobalDefaultUsername(){return _t(this,void 0,void 0,function*(){return(yield Ni.getConfigSource(rt.OrgConfigProperties.TARGET_ORG))===qi.Global})}static getTemplatesDirectory(){return _t(this,void 0,void 0,function*(){let t=(yield Pr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(rt.OrgConfigProperties.ORG_CUSTOM_METADATA_TEMPLATES);return t?String(t):void 0})}static isTelemetryDisabled(){return _t(this,void 0,void 0,function*(){return(yield Pr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(rt.SfConfigProperties.DISABLE_TELEMETRY)==="true"})}static getDefaultDevHubUsernameOrAlias(){return _t(this,void 0,void 0,function*(){let t=(yield Pr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(rt.OrgConfigProperties.TARGET_DEV_HUB);return t?String(t):void 0})}static getGlobalDefaultDevHubUsernameOrAlias(){return _t(this,void 0,void 0,function*(){let t=(yield rt.Config.create({isGlobal:!0})).get(rt.OrgConfigProperties.TARGET_DEV_HUB);return t?String(t):void 0})}static getAllAliasesFor(e){return _t(this,void 0,void 0,function*(){let t=yield rt.StateAggregator.getInstance();return rt.StateAggregator.clearInstance(),t.aliases.getAll(e)})}static getUsername(){return _t(this,void 0,void 0,function*(){let t=(yield Pr.ConfigAggregatorProvider.getInstance().getConfigAggregator()).getPropertyValue(rt.OrgConfigProperties.TARGET_ORG);if(!t)return;let n=yield rt.StateAggregator.getInstance(),i=t?n.aliases.getUsername(String(t)):void 0;return i?String(i):void 0})}};qt.ConfigUtil=Ni});var l_=f(dt=>{"use strict";var dx=dt&&dt.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(dt,"__esModule",{value:!0});dt.isCLITelemetryAllowed=dt.disableCLITelemetry=dt.ENV_SFDX_DISABLE_TELEMETRY=void 0;var hx=ks(),px=jc();dt.ENV_SFDX_DISABLE_TELEMETRY="SFDX_DISABLE_TELEMETRY";function vx(){hx.GlobalCliEnvironment.environmentVariables.set(dt.ENV_SFDX_DISABLE_TELEMETRY,"true")}dt.disableCLITelemetry=vx;function gx(){return dx(this,void 0,void 0,function*(){try{return!(yield px.ConfigUtil.isTelemetryDisabled())}catch(r){console.log("Error checking cli settings: "+r)}return!0})}dt.isCLITelemetryAllowed=gx});var Be=f((WN,f_)=>{"use strict";var _x=function(){function r(){}return r.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];r.enableDebug&&console.info(r.TAG+e,t)},r.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];r.disableWarnings||console.warn(r.TAG+e,t)},r.enableDebug=!1,r.disableWarnings=!1,r.TAG="ApplicationInsights:",r}();f_.exports=_x});var I_=f((k,x_)=>{k=x_.exports=X;var Q;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Q=function(){var r=Array.prototype.slice.call(arguments,0);r.unshift("SEMVER"),console.log.apply(console,r)}:Q=function(){};k.SEMVER_SPEC_VERSION="2.0.0";var Uc=256,js=Number.MAX_SAFE_INTEGER||9007199254740991,Mc=16,te=k.re=[],C=k.src=[],z=0,wn=z++;C[wn]="0|[1-9]\\d*";var On=z++;C[On]="[0-9]+";var Vc=z++;C[Vc]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var h_=z++;C[h_]="("+C[wn]+")\\.("+C[wn]+")\\.("+C[wn]+")";var p_=z++;C[p_]="("+C[On]+")\\.("+C[On]+")\\.("+C[On]+")";var Hc=z++;C[Hc]="(?:"+C[wn]+"|"+C[Vc]+")";var Gc=z++;C[Gc]="(?:"+C[On]+"|"+C[Vc]+")";var zc=z++;C[zc]="(?:-("+C[Hc]+"(?:\\."+C[Hc]+")*))";var Xc=z++;C[Xc]="(?:-?("+C[Gc]+"(?:\\."+C[Gc]+")*))";var Bc=z++;C[Bc]="[0-9A-Za-z-]+";var Li=z++;C[Li]="(?:\\+("+C[Bc]+"(?:\\."+C[Bc]+")*))";var Wc=z++,v_="v?"+C[h_]+C[zc]+"?"+C[Li]+"?";C[Wc]="^"+v_+"$";var $c="[v=\\s]*"+C[p_]+C[Xc]+"?"+C[Li]+"?",Yc=z++;C[Yc]="^"+$c+"$";var In=z++;C[In]="((?:<|>)?=?)";var Ms=z++;C[Ms]=C[On]+"|x|X|\\*";var Us=z++;C[Us]=C[wn]+"|x|X|\\*";var Dr=z++;C[Dr]="[v=\\s]*("+C[Us]+")(?:\\.("+C[Us]+")(?:\\.("+C[Us]+")(?:"+C[zc]+")?"+C[Li]+"?)?)?";var xn=z++;C[xn]="[v=\\s]*("+C[Ms]+")(?:\\.("+C[Ms]+")(?:\\.("+C[Ms]+")(?:"+C[Xc]+")?"+C[Li]+"?)?)?";var g_=z++;C[g_]="^"+C[In]+"\\s*"+C[Dr]+"$";var __=z++;C[__]="^"+C[In]+"\\s*"+C[xn]+"$";var m_=z++;C[m_]="(?:^|[^\\d])(\\d{1,"+Mc+"})(?:\\.(\\d{1,"+Mc+"}))?(?:\\.(\\d{1,"+Mc+"}))?(?:$|[^\\d])";var Xs=z++;C[Xs]="(?:~>?)";var Hs=z++;C[Hs]="(\\s*)"+C[Xs]+"\\s+";te[Hs]=new RegExp(C[Hs],"g");var mx="$1~",y_=z++;C[y_]="^"+C[Xs]+C[Dr]+"$";var b_=z++;C[b_]="^"+C[Xs]+C[xn]+"$";var Ws=z++;C[Ws]="(?:\\^)";var Gs=z++;C[Gs]="(\\s*)"+C[Ws]+"\\s+";te[Gs]=new RegExp(C[Gs],"g");var yx="$1^",E_=z++;C[E_]="^"+C[Ws]+C[Dr]+"$";var C_=z++;C[C_]="^"+C[Ws]+C[xn]+"$";var Zc=z++;C[Zc]="^"+C[In]+"\\s*("+$c+")$|^$";var Kc=z++;C[Kc]="^"+C[In]+"\\s*("+v_+")$|^$";var Fi=z++;C[Fi]="(\\s*)"+C[In]+"\\s*("+$c+"|"+C[Dr]+")";te[Fi]=new RegExp(C[Fi],"g");var bx="$1$2$3",S_=z++;C[S_]="^\\s*("+C[Dr]+")\\s+-\\s+("+C[Dr]+")\\s*$";var w_=z++;C[w_]="^\\s*("+C[xn]+")\\s+-\\s+("+C[xn]+")\\s*$";var O_=z++;C[O_]="(<|>)?=?\\s*\\*";for(or=0;or<z;or++)Q(or,C[or]),te[or]||(te[or]=new RegExp(C[or]));var or;k.parse=qr;function qr(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof X)return r;if(typeof r!="string"||r.length>Uc)return null;var t=e.loose?te[Yc]:te[Wc];if(!t.test(r))return null;try{return new X(r,e)}catch{return null}}k.valid=Ex;function Ex(r,e){var t=qr(r,e);return t?t.version:null}k.clean=Cx;function Cx(r,e){var t=qr(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null}k.SemVer=X;function X(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof X){if(r.loose===e.loose)return r;r=r.version}else if(typeof r!="string")throw new TypeError("Invalid Version: "+r);if(r.length>Uc)throw new TypeError("version is longer than "+Uc+" characters");if(!(this instanceof X))return new X(r,e);Q("SemVer",r,e),this.options=e,this.loose=!!e.loose;var t=r.trim().match(e.loose?te[Yc]:te[Wc]);if(!t)throw new TypeError("Invalid Version: "+r);if(this.raw=r,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>js||this.major<0)throw new TypeError("Invalid major version");if(this.minor>js||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>js||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<js)return i}return n}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};X.prototype.toString=function(){return this.version};X.prototype.compare=function(r){return Q("SemVer.compare",this.version,this.options,r),r instanceof X||(r=new X(r,this.options)),this.compareMain(r)||this.comparePre(r)};X.prototype.compareMain=function(r){return r instanceof X||(r=new X(r,this.options)),Tn(this.major,r.major)||Tn(this.minor,r.minor)||Tn(this.patch,r.patch)};X.prototype.comparePre=function(r){if(r instanceof X||(r=new X(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;var e=0;do{var t=this.prerelease[e],n=r.prerelease[e];if(Q("prerelease compare",e,t,n),t===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(t===void 0)return-1;if(t===n)continue;return Tn(t,n)}while(++e)};X.prototype.inc=function(r,e){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var t=this.prerelease.length;--t>=0;)typeof this.prerelease[t]=="number"&&(this.prerelease[t]++,t=-2);t===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+r)}return this.format(),this.raw=this.version,this};k.inc=Sx;function Sx(r,e,t,n){typeof t=="string"&&(n=t,t=void 0);try{return new X(r,t).inc(e,n).version}catch{return null}}k.diff=wx;function wx(r,e){if(Jc(r,e))return null;var t=qr(r),n=qr(e),i="";if(t.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in t)if((s==="major"||s==="minor"||s==="patch")&&t[s]!==n[s])return i+s;return o}k.compareIdentifiers=Tn;var d_=/^[0-9]+$/;function Tn(r,e){var t=d_.test(r),n=d_.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1}k.rcompareIdentifiers=Ox;function Ox(r,e){return Tn(e,r)}k.major=Tx;function Tx(r,e){return new X(r,e).major}k.minor=xx;function xx(r,e){return new X(r,e).minor}k.patch=Ix;function Ix(r,e){return new X(r,e).patch}k.compare=Nt;function Nt(r,e,t){return new X(r,t).compare(new X(e,t))}k.compareLoose=Ax;function Ax(r,e){return Nt(r,e,!0)}k.rcompare=Rx;function Rx(r,e,t){return Nt(e,r,t)}k.sort=Px;function Px(r,e){return r.sort(function(t,n){return k.compare(t,n,e)})}k.rsort=Dx;function Dx(r,e){return r.sort(function(t,n){return k.rcompare(t,n,e)})}k.gt=ki;function ki(r,e,t){return Nt(r,e,t)>0}k.lt=Bs;function Bs(r,e,t){return Nt(r,e,t)<0}k.eq=Jc;function Jc(r,e,t){return Nt(r,e,t)===0}k.neq=T_;function T_(r,e,t){return Nt(r,e,t)!==0}k.gte=Qc;function Qc(r,e,t){return Nt(r,e,t)>=0}k.lte=el;function el(r,e,t){return Nt(r,e,t)<=0}k.cmp=Vs;function Vs(r,e,t,n){switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return Jc(r,t,n);case"!=":return T_(r,t,n);case">":return ki(r,t,n);case">=":return Qc(r,t,n);case"<":return Bs(r,t,n);case"<=":return el(r,t,n);default:throw new TypeError("Invalid operator: "+e)}}k.Comparator=nt;function nt(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof nt){if(r.loose===!!e.loose)return r;r=r.value}if(!(this instanceof nt))return new nt(r,e);Q("comparator",r,e),this.options=e,this.loose=!!e.loose,this.parse(r),this.semver===ji?this.value="":this.value=this.operator+this.semver.version,Q("comp",this)}var ji={};nt.prototype.parse=function(r){var e=this.options.loose?te[Zc]:te[Kc],t=r.match(e);if(!t)throw new TypeError("Invalid comparator: "+r);this.operator=t[1],this.operator==="="&&(this.operator=""),t[2]?this.semver=new X(t[2],this.options.loose):this.semver=ji};nt.prototype.toString=function(){return this.value};nt.prototype.test=function(r){return Q("Comparator.test",r,this.options.loose),this.semver===ji?!0:(typeof r=="string"&&(r=new X(r,this.options)),Vs(r,this.operator,this.semver,this.options))};nt.prototype.intersects=function(r,e){if(!(r instanceof nt))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var t;if(this.operator==="")return t=new se(r.value,e),zs(this.value,t,e);if(r.operator==="")return t=new se(this.value,e),zs(r.semver,t,e);var n=(this.operator===">="||this.operator===">")&&(r.operator===">="||r.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(r.operator==="<="||r.operator==="<"),o=this.semver.version===r.semver.version,s=(this.operator===">="||this.operator==="<=")&&(r.operator===">="||r.operator==="<="),a=Vs(this.semver,"<",r.semver,e)&&(this.operator===">="||this.operator===">")&&(r.operator==="<="||r.operator==="<"),l=Vs(this.semver,">",r.semver,e)&&(this.operator==="<="||this.operator==="<")&&(r.operator===">="||r.operator===">");return n||i||o&&s||a||l};k.Range=se;function se(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof se)return r.loose===!!e.loose&&r.includePrerelease===!!e.includePrerelease?r:new se(r.raw,e);if(r instanceof nt)return new se(r.value,e);if(!(this instanceof se))return new se(r,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=r,this.set=r.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+r);this.format()}se.prototype.format=function(){return this.range=this.set.map(function(r){return r.join(" ").trim()}).join("||").trim(),this.range};se.prototype.toString=function(){return this.range};se.prototype.parseRange=function(r){var e=this.options.loose;r=r.trim();var t=e?te[w_]:te[S_];r=r.replace(t,Gx),Q("hyphen replace",r),r=r.replace(te[Fi],bx),Q("comparator trim",r,te[Fi]),r=r.replace(te[Hs],mx),r=r.replace(te[Gs],yx),r=r.split(/\s+/).join(" ");var n=e?te[Zc]:te[Kc],i=r.split(" ").map(function(o){return Nx(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new nt(o,this.options)},this),i};se.prototype.intersects=function(r,e){if(!(r instanceof se))throw new TypeError("a Range is required");return this.set.some(function(t){return t.every(function(n){return r.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};k.toComparators=qx;function qx(r,e){return new se(r,e).set.map(function(t){return t.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Nx(r,e){return Q("comp",r,e),r=Lx(r,e),Q("caret",r),r=Fx(r,e),Q("tildes",r),r=Mx(r,e),Q("xrange",r),r=Hx(r,e),Q("stars",r),r}function Re(r){return!r||r.toLowerCase()==="x"||r==="*"}function Fx(r,e){return r.trim().split(/\s+/).map(function(t){return kx(t,e)}).join(" ")}function kx(r,e){var t=e.loose?te[b_]:te[y_];return r.replace(t,function(n,i,o,s,a){Q("tilde",r,n,i,o,s,a);var l;return Re(i)?l="":Re(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Re(s)?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Q("replaceTilde pr",a),l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Q("tilde return",l),l})}function Lx(r,e){return r.trim().split(/\s+/).map(function(t){return jx(t,e)}).join(" ")}function jx(r,e){Q("caret",r,e);var t=e.loose?te[C_]:te[E_];return r.replace(t,function(n,i,o,s,a){Q("caret",r,n,i,o,s,a);var l;return Re(i)?l="":Re(o)?l=">="+i+".0.0 <"+(+i+1)+".0.0":Re(s)?i==="0"?l=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Q("replaceCaret pr",a),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Q("no pr"),i==="0"?o==="0"?l=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):l=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":l=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Q("caret return",l),l})}function Mx(r,e){return Q("replaceXRanges",r,e),r.split(/\s+/).map(function(t){return Ux(t,e)}).join(" ")}function Ux(r,e){r=r.trim();var t=e.loose?te[__]:te[g_];return r.replace(t,function(n,i,o,s,a,l){Q("xRange",r,n,i,o,s,a,l);var c=Re(o),u=c||Re(s),d=u||Re(a),m=d;return i==="="&&m&&(i=""),c?i===">"||i==="<"?n="<0.0.0":n="*":i&&m?(u&&(s=0),a=0,i===">"?(i=">=",u?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",u?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):u?n=">="+o+".0.0 <"+(+o+1)+".0.0":d&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Q("xRange return",n),n})}function Hx(r,e){return Q("replaceStars",r,e),r.trim().replace(te[O_],"")}function Gx(r,e,t,n,i,o,s,a,l,c,u,d,m){return Re(t)?e="":Re(n)?e=">="+t+".0.0":Re(i)?e=">="+t+"."+n+".0":e=">="+e,Re(l)?a="":Re(c)?a="<"+(+l+1)+".0.0":Re(u)?a="<"+l+"."+(+c+1)+".0":d?a="<="+l+"."+c+"."+u+"-"+d:a="<="+a,(e+" "+a).trim()}se.prototype.test=function(r){if(!r)return!1;typeof r=="string"&&(r=new X(r,this.options));for(var e=0;e<this.set.length;e++)if(Bx(this.set[e],r,this.options))return!0;return!1};function Bx(r,e,t){for(var n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(n=0;n<r.length;n++)if(Q(r[n].semver),r[n].semver!==ji&&r[n].semver.prerelease.length>0){var i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}k.satisfies=zs;function zs(r,e,t){try{e=new se(e,t)}catch{return!1}return e.test(r)}k.maxSatisfying=Vx;function Vx(r,e,t){var n=null,i=null;try{var o=new se(e,t)}catch{return null}return r.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new X(n,t))}),n}k.minSatisfying=zx;function zx(r,e,t){var n=null,i=null;try{var o=new se(e,t)}catch{return null}return r.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new X(n,t))}),n}k.minVersion=Xx;function Xx(r,e){r=new se(r,e);var t=new X("0.0.0");if(r.test(t)||(t=new X("0.0.0-0"),r.test(t)))return t;t=null;for(var n=0;n<r.set.length;++n){var i=r.set[n];i.forEach(function(o){var s=new X(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!t||ki(t,s))&&(t=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return t&&r.test(t)?t:null}k.validRange=Wx;function Wx(r,e){try{return new se(r,e).range||"*"}catch{return null}}k.ltr=$x;function $x(r,e,t){return tl(r,e,"<",t)}k.gtr=Yx;function Yx(r,e,t){return tl(r,e,">",t)}k.outside=tl;function tl(r,e,t,n){r=new X(r,n),e=new se(e,n);var i,o,s,a,l;switch(t){case">":i=ki,o=el,s=Bs,a=">",l=">=";break;case"<":i=Bs,o=Qc,s=ki,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zs(r,e,n))return!1;for(var c=0;c<e.set.length;++c){var u=e.set[c],d=null,m=null;if(u.forEach(function(E){E.semver===ji&&(E=new nt(">=0.0.0")),d=d||E,m=m||E,i(E.semver,d.semver,n)?d=E:s(E.semver,m.semver,n)&&(m=E)}),d.operator===a||d.operator===l||(!m.operator||m.operator===a)&&o(r,m.semver))return!1;if(m.operator===l&&s(r,m.semver))return!1}return!0}k.prerelease=Zx;function Zx(r,e){var t=qr(r,e);return t&&t.prerelease.length?t.prerelease:null}k.intersects=Kx;function Kx(r,e,t){return r=new se(r,t),e=new se(e,t),r.intersects(e)}k.coerce=Jx;function Jx(r){if(r instanceof X)return r;if(typeof r!="string")return null;var e=r.match(te[m_]);return e==null?null:qr(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var nl=f(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var Qx=require("path"),eI=I_(),R_=require("module"),tI=Object.keys(process.binding("natives")),A_=R_.prototype.require;function rI(r){var e={};return function(n){var i=A_.apply(this,arguments);if(r[n]){var o=R_._resolveFilename(n,this);if(e.hasOwnProperty(o))return e[o];var s=void 0;if(tI.indexOf(n)<0)try{s=A_.call(this,Qx.join(n,"package.json")).version}catch{return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var l=i,c=0,u=r[n];c<u.length;c++){var d=u[c];eI.satisfies(s,d.versionSpecifier)&&(l=d.patch(l,o))}return e[o]=l}return i}}rl.makePatchingRequire=rI});var P_=f((YN,nI)=>{nI.exports={_from:"diagnostic-channel@0.2.0",_id:"diagnostic-channel@0.2.0",_inBundle:!1,_integrity:"sha512-awkcaaNNi0RfUGJf7r2+K4oJs1OyiIG2m/Jwvyi0OeQxdw+UU/iwbiejTPa3tUeyXtBcp2fef0JOJNdD62r/zg==",_location:"/diagnostic-channel",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"diagnostic-channel@0.2.0",name:"diagnostic-channel",escapedName:"diagnostic-channel",rawSpec:"0.2.0",saveSpec:null,fetchSpec:"0.2.0"},_requiredBy:["/applicationinsights"],_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-0.2.0.tgz",_shasum:"cc99af9612c23fb1fff13612c72f2cbfaa8d5a17",_spec:"diagnostic-channel@0.2.0",_where:"/home/circleci/cli/packages/salesforcedx-utils-vscode/node_modules/applicationinsights",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},bundleDependencies:!1,dependencies:{semver:"^5.3.0"},deprecated:!1,description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],homepage:"https://github.com/Microsoft/node-diagnostic-channel",license:"MIT",main:"./dist/src/channel.js",name:"diagnostic-channel",repository:{type:"git",url:"git+https://github.com/Microsoft/node-diagnostic-channel.git"},scripts:{build:"tsc",clean:"rimraf ./dist",lint:"tslint -c tslint.json -p tsconfig.json",test:"mocha ./dist/tests/**/*.js"},types:"./dist/src/channel.d.ts",version:"0.2.0"}});var me=f($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var iI=nl(),oI=nl();$s.makePatchingRequire=oI.makePatchingRequire;var D_=function(r){return!0},sI=function(){function r(){this.version=P_().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return r.prototype.shouldPublish=function(e){var t=this.subscribers[e];return t?t.some(function(n){var i=n.filter;return!i||i(!1)}):!1},r.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},r.prototype.subscribe=function(e,t,n){n===void 0&&(n=D_),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:n})},r.prototype.unsubscribe=function(e,t,n){n===void 0&&(n=D_);var i=this.subscribers[e];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===t&&i[o].filter===n)return i.splice(o,1),!0}return!1},r.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(t){return t},Object.getOwnPropertyNames(this.knownPatches).forEach(function(t){return delete e.knownPatches[t]})},r.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},r.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},r.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},r.prototype.getPatchesObject=function(){return this.knownPatches},r}();global.diagnosticsSource||(global.diagnosticsSource=new sI,q_=require("module"),q_.prototype.require=iI.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var q_;$s.channel=global.diagnosticsSource});var F_=f(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});var N_=me(),aI=function(r){var e=r.prototype._emit;return r.prototype._emit=function(t,n){var i=e.apply(this,arguments);if(!n){var o=i;o||(o=e.call(this,t,!0)),N_.channel.publish("bunyan",{level:t.level,result:o})}return i},r};Mi.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:aI};function uI(){N_.channel.registerMonkeyPatch("bunyan",Mi.bunyan)}Mi.enable=uI});var L_=f(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var il=me(),k_=require("stream"),cI=function(r){var e=new k_.Writable,t=new k_.Writable;e.write=function(c){if(!c)return!0;var u=c.toString();return il.channel.publish("console",{message:u}),!0},t.write=function(c){if(!c)return!0;var u=c.toString();return il.channel.publish("console",{message:u,stderr:!0}),!0};for(var n=new r.Console(e,t),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(c){var u=r[c];u&&(r[c]=function(){if(n[c])try{n[c].apply(n,arguments)}catch{}return u.apply(r,arguments)})},s=0,a=i;s<a.length;s++){var l=a[s];o(l)}return r};Ui.console={versionSpecifier:">= 4.0.0",patch:cI};function lI(){il.channel.registerMonkeyPatch("console",Ui.console),require("console")}Ui.enable=lI});var j_=f(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});var ol=me(),fI=function(r){var e=r.Server.prototype.connect;return r.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=ol.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=ol.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},r};Hi.mongoCore2={versionSpecifier:">= 2.0.0 < 2.2.0",patch:fI};function dI(){ol.channel.registerMonkeyPatch("mongodb-core",Hi.mongoCore2)}Hi.enable=dI});var M_=f(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var Ys=me(),hI=function(r){var e=r.instrument({operationIdGenerator:{next:function(){return Ys.channel.bindToContext(function(n){return n()})}}}),t={};return e.on("started",function(n){t[n.requestId]||(t[n.requestId]=n)}),e.on("succeeded",function(n){var i=t[n.requestId];i&&delete t[n.requestId],n.operationId(function(){return Ys.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})})}),e.on("failed",function(n){var i=t[n.requestId];i&&delete t[n.requestId],n.operationId(function(){return Ys.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})})}),r};Gi.mongo2={versionSpecifier:">= 2.0.0 <= 2.2.x",patch:hI};function pI(){Ys.channel.registerMonkeyPatch("mongodb",Gi.mongo2)}Gi.enable=pI});var H_=f(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});var Zs=me(),U_=require("path"),vI=function(r,e){var t=function(l,c){return function(u,d){var m=l[u];m&&(l[u]=function(){for(var I=arguments.length-1,F=arguments.length-1;F>=0;--F)if(typeof arguments[F]=="function"){I=F;break}else if(typeof arguments[F]<"u")break;var M=arguments[I],K={result:null,startTime:null};typeof M=="function"&&(d?(K.startTime=process.hrtime(),arguments[I]=Zs.channel.bindToContext(d(K,M))):arguments[I]=Zs.channel.bindToContext(M));var ve=m.apply(this,arguments);return K.result=ve,ve})}},n=function(l,c){return t(l.prototype,c+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(U_.dirname(e)+"/lib/Connection");i.forEach(function(l){return n(o,"Connection")(l)}),t(o,"Connection")("createQuery",function(l,c){return function(u){var d=process.hrtime(l.startTime),m=d[0]*1e3+d[1]/1e6|0;Zs.channel.publish("mysql",{query:l.result,callbackArgs:arguments,err:u,duration:m}),c.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(U_.dirname(e)+"/lib/Pool");return s.forEach(function(l){return n(a,"Pool")(l)}),r};Bi.mysql={versionSpecifier:">= 2.0.0 <= 2.14.x",patch:vI};function gI(){Zs.channel.registerMonkeyPatch("mysql",Bi.mysql)}Bi.enable=gI});var B_=f(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});var G_=me();function _I(r){var e=r.prototype.connect;return r.prototype.connect=function(n){n&&(arguments[0]=G_.channel.bindToContext(n)),e.apply(this,arguments)},r}Vi.postgresPool1={versionSpecifier:"1.x",patch:_I};function mI(){G_.channel.registerMonkeyPatch("pg-pool",Vi.postgresPool1)}Vi.enable=mI});var V_=f(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var sl=me(),yI=require("events");function bI(r,e){var t=r.Client.prototype.query,n="__diagnosticOriginalFunc";return r.Client.prototype.query=function(o,s,a){var l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0},c=process.hrtime(),u;function d(m){m&&m[n]&&(m=m[n]);var E=sl.channel.bindToContext(function(I,F){var M=process.hrtime(c);if(l.result=F&&{rowCount:F.rowCount,command:F.command},l.error=I,l.duration=Math.ceil(M[0]*1e3+M[1]/1e6),sl.channel.publish("postgres",l),I){if(m)return m.apply(this,arguments);u&&u instanceof yI.EventEmitter&&u.emit("error",I)}else m&&m.apply(this,arguments)});try{return Object.defineProperty(E,n,{value:m}),E}catch{return m}}try{typeof o=="string"?s instanceof Array?(l.query.preparable={text:o,args:s},a=d(a)):(l.query.text=o,a?a=d(a):s=d(s)):(typeof o.name=="string"?l.query.plan=o.name:o.values instanceof Array?l.query.preparable={text:o.text,args:o.values}:l.query.text=o.text,a?a=d(a):s?s=d(s):o.callback=d(o.callback))}catch{return t.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,u=t.apply(this,arguments),u},r}zi.postgres6={versionSpecifier:"6.x",patch:bI};function EI(){sl.channel.registerMonkeyPatch("pg",zi.postgres6)}zi.enable=EI});var z_=f(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var al=me(),CI=function(r){var e=r.RedisClient.prototype.internal_send_command;return r.RedisClient.prototype.internal_send_command=function(t){if(t){var n=t.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime();t.callback=al.channel.bindToContext(function(s,a){var l=process.hrtime(o),c=l[0]*1e3+l[1]/1e6|0;al.channel.publish("redis",{duration:c,address:i,commandObj:t,err:s,result:a}),typeof n=="function"&&n.apply(this,arguments)}),t.callback.pubsubBound=!0}}return e.call(this,t)},r};Xi.redis={versionSpecifier:">= 2.0.0 < 3.0.0",patch:CI};function SI(){al.channel.registerMonkeyPatch("redis",Xi.redis)}Xi.enable=SI});var W_=f(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});var X_=me(),wI=function(r){var e=r.Logger.prototype.log,t,n=function(i,o,s){var a;return t===r.config.npm.levels?a="npm":t===r.config.syslog.levels?a="syslog":a="unknown",X_.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return r.Logger.prototype.log=function(){return t=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),e.apply(this,arguments)},r};Wi.winston={versionSpecifier:"2.x",patch:wI};function OI(){X_.channel.registerMonkeyPatch("winston",Wi.winston)}Wi.enable=OI});var nm=f(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});var $_=F_();it.bunyan=$_;var Y_=L_();it.console=Y_;var Z_=j_();it.mongodbCore=Z_;var K_=M_();it.mongodb=K_;var J_=H_();it.mysql=J_;var Q_=B_();it.pgPool=Q_;var em=V_();it.pg=em;var tm=z_();it.redis=tm;var rm=W_();it.winston=rm;function TI(){$_.enable(),Y_.enable(),Z_.enable(),K_.enable(),J_.enable(),em.enable(),Q_.enable(),tm.enable(),rm.enable()}it.enable=TI});var Ks=f(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;if(An.IsInitialized){mt=nm(),im=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",om=im.split(","),ul={bunyan:mt.bunyan,console:mt.console,mongodb:mt.mongodb,mongodbCore:mt.mongodbCore,mysql:mt.mysql,redis:mt.redis,pg:mt.pg,pgPool:mt.pgPool,winston:mt.winston};for(cl in ul)om.indexOf(cl)===-1&&ul[cl].enable()}var mt,im,om,ul,cl;function xI(r){!An.IsInitialized||me().channel.addContextPreservation(r)}An.registerContextPreservation=xI});var am=f((ll,sm)=>{(function(r,e){typeof ll=="object"&&typeof sm<"u"?e():typeof define=="function"&&define.amd?define(e):e()})(ll,function(){"use strict";var r=function(S){if(S.Zone)throw new Error("Zone already loaded.");var O=function(){function _(g,h){this._properties=null,this._parent=g,this._name=h?h.name||"unnamed":"<root>",this._properties=h&&h.properties||{},this._zoneDelegate=new A(this,this._parent&&this._parent._zoneDelegate,h)}return _.assertZonePatched=function(){if(S.Promise!==Ne)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(_,"current",{get:function(){return y.zone},enumerable:!0,configurable:!0}),Object.defineProperty(_,"currentTask",{get:function(){return T},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),_.prototype.get=function(g){var h=this.getZoneWith(g);if(h)return h._properties[g]},_.prototype.getZoneWith=function(g){for(var h=this;h;){if(h._properties.hasOwnProperty(g))return h;h=h._parent}return null},_.prototype.fork=function(g){if(!g)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,g)},_.prototype.wrap=function(g,h){if(typeof g!="function")throw new Error("Expecting function got: "+g);var p=this._zoneDelegate.intercept(this,g,h),w=this;return function(){return w.runGuarded(p,this,arguments,h)}},_.prototype.run=function(g,h,p,w){h===void 0&&(h=null),p===void 0&&(p=null),w===void 0&&(w=null),y=new j(y,this);try{return this._zoneDelegate.invoke(this,g,h,p,w)}finally{y=y.parent}},_.prototype.runGuarded=function(g,h,p,w){h===void 0&&(h=null),p===void 0&&(p=null),w===void 0&&(w=null),y=new j(y,this);try{try{return this._zoneDelegate.invoke(this,g,h,p,w)}catch(N){if(this._zoneDelegate.handleError(this,N))throw N}}finally{y=y.parent}},_.prototype.runTask=function(g,h,p){if(g.runCount++,g.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+g.zone.name+"; Execution: "+this.name+")");var w=T;T=g,y=new j(y,this);try{g.type=="macroTask"&&g.data&&!g.data.isPeriodic&&(g.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,g,h,p)}catch(N){if(this._zoneDelegate.handleError(this,N))throw N}}finally{y=y.parent,T=w}},_.prototype.scheduleMicroTask=function(g,h,p,w){return this._zoneDelegate.scheduleTask(this,new R("microTask",this,g,h,p,w,null))},_.prototype.scheduleMacroTask=function(g,h,p,w,N){return this._zoneDelegate.scheduleTask(this,new R("macroTask",this,g,h,p,w,N))},_.prototype.scheduleEventTask=function(g,h,p,w,N){return this._zoneDelegate.scheduleTask(this,new R("eventTask",this,g,h,p,w,N))},_.prototype.cancelTask=function(g){var h=this._zoneDelegate.cancelTask(this,g);return g.runCount=-1,g.cancelFn=null,h},_}();O.__symbol__=P;var A=function(){function _(g,h,p){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=g,this._parentDelegate=h,this._forkZS=p&&(p&&p.onFork?p:h._forkZS),this._forkDlgt=p&&(p.onFork?h:h._forkDlgt),this._forkCurrZone=p&&(p.onFork?this.zone:h.zone),this._interceptZS=p&&(p.onIntercept?p:h._interceptZS),this._interceptDlgt=p&&(p.onIntercept?h:h._interceptDlgt),this._interceptCurrZone=p&&(p.onIntercept?this.zone:h.zone),this._invokeZS=p&&(p.onInvoke?p:h._invokeZS),this._invokeDlgt=p&&(p.onInvoke?h:h._invokeDlgt),this._invokeCurrZone=p&&(p.onInvoke?this.zone:h.zone),this._handleErrorZS=p&&(p.onHandleError?p:h._handleErrorZS),this._handleErrorDlgt=p&&(p.onHandleError?h:h._handleErrorDlgt),this._handleErrorCurrZone=p&&(p.onHandleError?this.zone:h.zone),this._scheduleTaskZS=p&&(p.onScheduleTask?p:h._scheduleTaskZS),this._scheduleTaskDlgt=p&&(p.onScheduleTask?h:h._scheduleTaskDlgt),this._scheduleTaskCurrZone=p&&(p.onScheduleTask?this.zone:h.zone),this._invokeTaskZS=p&&(p.onInvokeTask?p:h._invokeTaskZS),this._invokeTaskDlgt=p&&(p.onInvokeTask?h:h._invokeTaskDlgt),this._invokeTaskCurrZone=p&&(p.onInvokeTask?this.zone:h.zone),this._cancelTaskZS=p&&(p.onCancelTask?p:h._cancelTaskZS),this._cancelTaskDlgt=p&&(p.onCancelTask?h:h._cancelTaskDlgt),this._cancelTaskCurrZone=p&&(p.onCancelTask?this.zone:h.zone),this._hasTaskZS=p&&(p.onHasTask?p:h._hasTaskZS),this._hasTaskDlgt=p&&(p.onHasTask?h:h._hasTaskDlgt),this._hasTaskCurrZone=p&&(p.onHasTask?this.zone:h.zone)}return _.prototype.fork=function(g,h){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,g,h):new O(g,h)},_.prototype.intercept=function(g,h,p){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,g,h,p):h},_.prototype.invoke=function(g,h,p,w,N){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,g,h,p,w,N):h.apply(p,w)},_.prototype.handleError=function(g,h){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,g,h):!0},_.prototype.scheduleTask=function(g,h){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,g,h);if(h.scheduleFn)h.scheduleFn(h);else if(h.type=="microTask")Zt(h);else throw new Error("Task is missing scheduleFn.");return h}finally{g==this.zone&&this._updateTaskCount(h.type,1)}},_.prototype.invokeTask=function(g,h,p,w){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,g,h,p,w):h.callback.apply(p,w)}finally{g==this.zone&&h.type!="eventTask"&&!(h.data&&h.data.isPeriodic)&&this._updateTaskCount(h.type,-1)}},_.prototype.cancelTask=function(g,h){var p;if(this._cancelTaskZS)p=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,g,h);else if(h.cancelFn)p=h.cancelFn(h);else throw new Error("Task does not support cancellation, or is already canceled.");return g==this.zone&&this._updateTaskCount(h.type,-1),p},_.prototype.hasTask=function(g,h){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,g,h)},_.prototype._updateTaskCount=function(g,h){var p=this._taskCounts,w=p[g],N=p[g]=w+h;if(N<0)throw new Error("More tasks executed then were scheduled.");if(w==0||N==0){var oe={microTask:p.microTask>0,macroTask:p.macroTask>0,eventTask:p.eventTask>0,change:g};try{this.hasTask(this.zone,oe)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(g,h)}}},_}(),R=function(){function _(g,h,p,w,N,oe,Le){this.runCount=0,this.type=g,this.zone=h,this.source=p,this.data=N,this.scheduleFn=oe,this.cancelFn=Le,this.callback=w;var $e=this;this.invoke=function(){U++;try{return h.runTask($e,this,arguments)}finally{U==1&&ai(),U--}}}return _.prototype.toString=function(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId:Object.prototype.toString.call(this)},_.prototype.toJSON=function(){return{type:this.type,source:this.source,data:this.data,zone:this.zone.name,invoke:this.invoke,scheduleFn:this.scheduleFn,cancelFn:this.cancelFn,runCount:this.runCount,callback:this.callback}},_}(),j=function(){function _(g,h){this.parent=g,this.zone=h}return _}();function P(_){return"__zone_symbol__"+_}var L=P("setTimeout"),v=P("Promise"),b=P("then"),y=new j(null,new O(null,null)),T=null,x=[],D=!1,Z=[],U=0;function pe(){U===0&&x.length===0&&(S[v]?S[v].resolve(0)[b](ai):S[L](ai,0))}function Zt(_){pe(),x.push(_)}function xt(_){var g=_&&_.rejection;g&&console.error("Unhandled Promise rejection:",g instanceof Error?g.message:g,"; Zone:",_.zone.name,"; Task:",_.task&&_.task.source,"; Value:",g,g instanceof Error?g.stack:void 0),console.error(_)}function ai(){if(!D){for(D=!0;x.length;){var _=x;x=[];for(var g=0;g<_.length;g++){var h=_[g];try{h.zone.runTask(h,null,null)}catch(w){xt(w)}}}for(;Z.length;)for(var p=function(){var w=Z.shift();try{w.zone.runGuarded(function(){throw w})}catch(N){xt(N)}};Z.length;)p();D=!1}}function ui(_){return _&&_.then}function ao(_){return _}function oE(_){return Ne.reject(_)}var at=P("state"),_r=P("value"),sE="Promise.then",uo=null,Ef=!0,co=!1,Cf=0;function lo(_,g){return function(h){mr(_,g,h)}}function mr(_,g,h){if(_[at]===uo)if(h instanceof Ne&&h.hasOwnProperty(at)&&h.hasOwnProperty(_r)&&h[at]!==uo)Sf(h),mr(_,h[at],h[_r]);else if(ui(h))h.then(lo(_,g),lo(_,!1));else{_[at]=g;var p=_[_r];_[_r]=h;for(var w=0;w<p.length;)wf(_,p[w++],p[w++],p[w++],p[w++]);if(p.length==0&&g==co){_[at]=Cf;try{throw new Error("Uncaught (in promise): "+h+(h&&h.stack?`
`+h.stack:""))}catch(oe){var N=oe;N.rejection=h,N.promise=_,N.zone=O.current,N.task=O.currentTask,Z.push(N),pe()}}}return _}function Sf(_){if(_[at]===Cf){_[at]=co;for(var g=0;g<Z.length;g++)if(_===Z[g].promise){Z.splice(g,1);break}}}function wf(_,g,h,p,w){Sf(_);var N=_[at]?p||ao:w||oE;g.scheduleMicroTask(sE,function(){try{mr(h,!0,g.run(N,null,[_[_r]]))}catch(oe){mr(h,!1,oe)}})}var Ne=function(){function _(g){var h=this;if(!(h instanceof _))throw new Error("Must be an instanceof Promise.");h[at]=uo,h[_r]=[];try{g&&g(lo(h,Ef),lo(h,co))}catch(p){mr(h,!1,p)}}return _.toString=function(){return"function ZoneAwarePromise() { [native code] }"},_.resolve=function(g){return mr(new this(null),Ef,g)},_.reject=function(g){return mr(new this(null),co,g)},_.race=function(g){var h,p,w=new this(function(Ye,ci){ka=[Ye,ci],h=ka[0],p=ka[1];var ka});function N(Ye){w&&(w=h(Ye))}function oe(Ye){w&&(w=p(Ye))}for(var Le=0,$e=g;Le<$e.length;Le++){var je=$e[Le];ui(je)||(je=this.resolve(je)),je.then(N,oe)}return w},_.all=function(g){for(var h,p,w=new this(function(Ye,ci){h=Ye,p=ci}),N=0,oe=[],Le=0,$e=g;Le<$e.length;Le++){var je=$e[Le];ui(je)||(je=this.resolve(je)),je.then(function(Ye){return function(ci){oe[Ye]=ci,N--,N||h(oe)}}(N),p),N++}return N||h(oe),w},_.prototype.then=function(g,h){var p=new this.constructor(null),w=O.current;return this[at]==uo?this[_r].push(w,p,g,h):wf(this,w,p,g,h),p},_.prototype.catch=function(g){return this.then(null,g)},_}();Ne.resolve=Ne.resolve,Ne.reject=Ne.reject,Ne.race=Ne.race,Ne.all=Ne.all;var qa=S[P("Promise")]=S.Promise;S.Promise=Ne;function Of(_){var g=_.prototype,h=g[P("then")]=g.then;g.then=function(p,w){var N=this;return new Ne(function(oe,Le){h.call(N,oe,Le)}).then(p,w)}}if(qa&&(Of(qa),typeof S.fetch<"u")){var Br=void 0;try{Br=S.fetch()}catch{Br=S.fetch("about:blank")}Br.then(function(){return null},function(){return null}),Br.constructor!=qa&&Br.constructor!=Ne&&Of(Br.constructor)}Promise[O.__symbol__("uncaughtPromiseErrors")]=Z;var Vr;(function(_){_[_.blackList=0]="blackList",_[_.transition=1]="transition"})(Vr||(Vr={}));var Fe=S[P("Error")]=S.Error,fo={},Tf;S.Error=ke;var PP=null,Na="stackRewrite",ho=function(_,g){if(!_[g]){var h=P(g);_[g]={configurable:!0,enumerable:!0,get:function(){if(!this[h]){var p=this[P("error")];p&&(this[h]=p[g])}return this[h]},set:function(p){this[h]=p}}}},xf=function(_,g){_[g]||(_[g]={configurable:!0,enumerable:!0,writable:!0,value:function(){var h=this[P("error")],p=h&&h[g]||this[g];if(p)return p.apply(h,arguments)}})},aE=function(){for(var _=Object.create(null),g=new Fe,h=Object.getOwnPropertyNames(g),p=0;p<h.length;p++){var w=h[p];Object.prototype.hasOwnProperty.call(g,w)&&ho(_,w)}var N=Fe.prototype;if(N)for(var oe=Object.getOwnPropertyNames(N),p=0;p<oe.length;p++){var w=oe[p];w!=="constructor"&&w!=="toString"&&w!=="toSource"&&ho(_,w)}return ho(_,"originalStack"),ho(_,"zoneAwareStack"),xf(_,"toString"),xf(_,"toSource"),_},Fa=aE(),uE=function(_){if(_===ke.prototype)return Fa;var g=Object.create(null),h=Object.getOwnPropertyNames(Fa),p=Object.getOwnPropertyNames(_);return h.forEach(function(w){p.filter(function(N){return N===w}).length===0&&(g[w]=Fa[w])}),g};function ke(){if(!(this instanceof ke))return ke.apply(Object.create(ke.prototype),arguments);var _=Fe.apply(this,arguments);if(this[P("error")]=_,_.originalStack=_.stack,ke[Na]&&_.originalStack){for(var g=_.originalStack.split(`
`),h=y,p=0;g[p]!==Tf&&p<g.length;)p++;for(;p<g.length&&h;p++){var w=g[p];if(w.trim()){var N=fo.hasOwnProperty(w)&&fo[w];N===Vr.blackList?(g.splice(p,1),p--):N===Vr.transition?h.parent?(g[p]+=" ["+h.parent.zone.name+" => "+h.zone.name+"]",h=h.parent):h=null:g[p]+=" ["+h.zone.name+"]"}}_.stack=_.zoneAwareStack=g.join(`
`)}return Object.defineProperties(this,uE(Object.getPrototypeOf(this))),this}ke.prototype=Fe.prototype,ke[O.__symbol__("blacklistedStackFrames")]=fo,ke[Na]=!1,Fe.hasOwnProperty("stackTraceLimit")&&(Fe.stackTraceLimit=Math.max(Fe.stackTraceLimit,15),Object.defineProperty(ke,"stackTraceLimit",{get:function(){return Fe.stackTraceLimit},set:function(_){return Fe.stackTraceLimit=_}})),Fe.hasOwnProperty("captureStackTrace")&&Object.defineProperty(ke,"captureStackTrace",{value:function(g,h){Fe.captureStackTrace(g,h)}}),Object.defineProperty(ke,"prepareStackTrace",{get:function(){return Fe.prepareStackTrace},set:function(_){return!_||typeof _!="function"?Fe.prepareStackTrace=_:Fe.prepareStackTrace=function(g,h){if(h)for(var p=0;p<h.length;p++){var w=h[p];if(w.getFunctionName()==="zoneCaptureStackTrace"){h.splice(p,1);break}}return _.apply(this,[g,h])}}});var po=O.current.fork({name:"detect",onInvoke:function(_,g,h,p,w,N,oe){return _.invoke(h,p,w,N,oe)},onHandleError:function(_,g,h,p){if(p.originalStack&&Error===ke)for(var w=p.originalStack.split(/\n/),N=!1,oe=!1,Le=!1;w.length;){var $e=w.shift();if(/:\d+:\d+/.test($e)){var je=$e.split("(")[0].split("@")[0],Ye=Vr.transition;if(je.indexOf("ZoneAwareError")!==-1&&(Tf=$e),je.indexOf("runGuarded")!==-1?oe=!0:je.indexOf("runTask")!==-1?Le=!0:je.indexOf("run")!==-1?N=!0:Ye=Vr.blackList,fo[$e]=Ye,N&&oe&&Le){ke[Na]=!0;break}}}return!1}}),cE=function(){po.run(function(){po.runGuarded(function(){throw new Error("blacklistStackFrames")})})};return po.runTask(po.scheduleMacroTask("detect",cE,null,function(){return null},null)),S.Zone=O}(typeof window=="object"&&window||typeof self=="object"&&self||global);var e=function(S){return"__zone_symbol__"+S},t=typeof window=="object"&&window||typeof self=="object"&&self||global;function n(S,O){for(var A=S.length-1;A>=0;A--)typeof S[A]=="function"&&(S[A]=Zone.current.wrap(S[A],O+"_"+A));return S}var i=!("nw"in t)&&typeof process<"u"&&{}.toString.call(process)==="[object process]",o=e("eventTasks"),s="addEventListener",a="removeEventListener";function l(S,O,A,R,j){var P=S[o];if(P)for(var L=0;L<P.length;L++){var v=P[L],b=v.data,y=b.handler;if((b.handler===O||y.listener===O)&&b.useCapturing===R&&b.eventName===A)return j&&P.splice(L,1),v}return null}function c(S,O,A,R){var j=S[o];if(j){for(var P=[],L=j.length-1;L>=0;L--){var v=j[L],b=v.data;b.eventName===O&&b.useCapturing===A&&(P.push(v),R&&j.splice(L,1))}return P}return null}function u(S,O,A){var R=S[o];R||(R=S[o]=[]),A?R.unshift(O):R.push(O)}var d=function(S,O){return{useCapturing:O[2],eventName:O[0],handler:O[1],target:S||t,name:O[0],invokeAddFunc:function(A,R){return R&&R.invoke?this.target[A](this.eventName,R.invoke,this.useCapturing):this.target[A](this.eventName,R,this.useCapturing)},invokeRemoveFunc:function(A,R){return R&&R.invoke?this.target[A](this.eventName,R.invoke,this.useCapturing):this.target[A](this.eventName,R,this.useCapturing)}}};function m(S,O,A,R,j,P){A===void 0&&(A=!0),R===void 0&&(R=!1),j===void 0&&(j=!1),P===void 0&&(P=d);var L=e(S),v=e(O),b=A?!1:void 0;function y(x){var D=x.data;return u(D.target,x,j),D.invokeAddFunc(L,x)}function T(x){var D=x.data;return l(D.target,x.invoke,D.eventName,D.useCapturing,!0),D.invokeRemoveFunc(v,x)}return function(D,Z){var U=P(D,Z);U.useCapturing=U.useCapturing||b;var pe=null;typeof U.handler=="function"?pe=U.handler:U.handler&&U.handler.handleEvent&&(pe=function(ao){return U.handler.handleEvent(ao)});var Zt=!1;try{Zt=U.handler&&U.handler.toString()==="[object FunctionWrapper]"}catch{return}if(!pe||Zt)return U.invokeAddFunc(L,U.handler);if(!R){var xt=l(U.target,U.handler,U.eventName,U.useCapturing,!1);if(xt)return U.invokeAddFunc(L,xt)}var ai=Zone.current,ui=U.target.constructor.name+"."+S+":"+U.eventName;ai.scheduleEventTask(ui,pe,U,y,T)}}function E(S,O,A){O===void 0&&(O=!0),A===void 0&&(A=d);var R=e(S),j=O?!1:void 0;return function(L,v){var b=A(L,v);b.useCapturing=b.useCapturing||j;var y=l(b.target,b.handler,b.eventName,b.useCapturing,!0);y?y.zone.cancelTask(y):b.invokeRemoveFunc(R,b.handler)}}function I(S,O){O===void 0&&(O=!0);var A=e(S),R=O?!1:void 0;return function(P,L){var v=P||t;if(L.length===0){v[o]=[],v[A]();return}var b=L[0],y=L[1]||R;c(v,b,y,!0),v[A](b)}}function F(S){var O=e(S);return function(R,j){var P=j[0],L=R||t;return L[o]?L[o].filter(function(v){return v.data.eventName===P}).map(function(v){return v.data.handler}):[]}}var M=m(s,a),K=E(a),ve=e("originalInstance");function ie(S,O){try{return Function("f","return function "+S+"(){return f(this, arguments)}")(O)}catch{return function(){return O(this,arguments)}}}function J(S,O,A){for(var R=S;R&&Object.getOwnPropertyNames(R).indexOf(O)===-1;)R=Object.getPrototypeOf(R);!R&&S[O]&&(R=S);var j=e(O),P;return R&&!(P=R[j])&&(P=R[j]=R[O],R[O]=ie(O,A(P,j,O))),P}function De(S,O,A){var R=null;function j(P){var L=P.data;return L.args[L.callbackIndex]=function(){P.invoke.apply(this,arguments)},R.apply(L.target,L.args),P}R=J(S,O,function(P){return function(L,v){var b=A(L,v);if(b.callbackIndex>=0&&typeof v[b.callbackIndex]=="function"){var y=Zone.current.scheduleMacroTask(b.name,v[b.callbackIndex],b,j,null);return y}else return P.apply(L,v)}})}var Xe=function(S){return function(O,A){return S(O,A),O}},qe="addListener",wt="prependListener",Vt="removeListener",hr="removeAllListeners",Ot="listeners",zt="on",pr=Xe(m(qe,Vt,!1,!0,!1)),Xt=Xe(m(wt,Vt,!1,!0,!0)),Ia=Xe(E(Vt,!1)),Aa=Xe(I(hr,!1)),Ra=F(Ot);function Pa(S){return S&&S.addListener?(J(S,qe,function(){return pr}),J(S,wt,function(){return Xt}),J(S,Vt,function(){return Ia}),J(S,hr,function(){return Aa}),J(S,Ot,function(){return Ra}),S[zt]=S[qe],!0):!1}var Gr;try{Gr=require("events")}catch{}Gr&&Gr.EventEmitter&&Pa(Gr.EventEmitter.prototype);var Wt;try{Wt=require("fs")}catch{}var vr=["access","appendFile","chmod","chown","close","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readdir","readFile","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","write","writeFile"];Wt&&vr.filter(function(S){return!!Wt[S]&&typeof Wt[S]=="function"}).forEach(function(S){De(Wt,S,function(O,A){return{name:"fs."+S,args:A,callbackIndex:A.length>0?A.length-1:-1,target:O}})});function $t(S,O,A,R){var j=null,P=null;O+=R,A+=R;var L={};function v(y){var T=y.data;return T.args[0]=function(){y.invoke.apply(this,arguments),delete L[T.handleId]},T.handleId=j.apply(S,T.args),L[T.handleId]=y,y}function b(y){return delete L[y.data.handleId],P(y.data.handleId)}j=J(S,O,function(y){return function(T,x){if(typeof x[0]=="function"){var D=Zone.current,Z={handleId:null,isPeriodic:R==="Interval",delay:R==="Timeout"||R==="Interval"?x[1]||0:null,args:x},U=D.scheduleMacroTask(O,x[0],Z,v,b);if(!U)return U;var pe=U.data.handleId;return pe.ref&&pe.unref&&(U.ref=pe.ref.bind(pe),U.unref=pe.unref.bind(pe)),U}else return y.apply(S,x)}}),P=J(S,A,function(y){return function(T,x){var D=typeof x[0]=="number"?L[x[0]]:x[0];D&&typeof D.type=="string"?(D.cancelFn&&D.data.isPeriodic||D.runCount===0)&&D.zone.cancelTask(D):y.apply(S,x)}})}var Ee="set",ae="clear",gr=typeof window=="object"&&window||typeof self=="object"&&self||global,Yt=require("timers");$t(Yt,Ee,ae,"Timeout"),$t(Yt,Ee,ae,"Interval"),$t(Yt,Ee,ae,"Immediate");var io=global.setTimeout!==Yt.setTimeout;io&&($t(gr,Ee,ae,"Timeout"),$t(gr,Ee,ae,"Interval"),$t(gr,Ee,ae,"Immediate")),Da();var We;try{We=require("crypto")}catch{}if(We){var si=We.randomBytes;We.randomBytes=function(O,A){if(A){var R=Zone.current,j=We.constructor.name+".randomBytes";return si(O,R.wrap(A,j))}else return si(O)}.bind(We);var oo=We.pbkdf2;We.pbkdf2=function(){for(var O=[],A=0;A<arguments.length;A++)O[A]=arguments[A];var R=O[O.length-1];if(typeof R=="function"){var j=Zone.current,P=We.constructor.name+".pbkdf2";return O[O.length-1]=j.wrap(R,P),oo.apply(void 0,O)}else return oo.apply(void 0,O)}.bind(We)}var Tt;try{Tt=require("_http_client")}catch{}if(Tt&&Tt.ClientRequest){var so=Tt.ClientRequest.bind(Tt);Tt.ClientRequest=function(S,O){if(O){var A=Zone.current;return new so(S,A.wrap(O,"http.ClientRequest"))}else return new so(S)}}function Da(){var S=null;function O(A){var R=A.data;return R[0]=function(){A.invoke.apply(this,arguments)},S.apply(process,R),A}S=J(process,"nextTick",function(A){return function(R,j){if(typeof j[0]=="function"){var P=Zone.current,L=P.scheduleMicroTask("nextTick",j[0],j,O);return L}else return A.apply(process,j)}})}})});var Rn=f(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var um=Be(),II=Ks(),AI=function(){function r(){}return r.getCurrentContext=function(){return r.enabled?Zone.current.get("context"):null},r.generateContextObject=function(e,t,n,i){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t},customProperties:new RI(i)}:null},r.runWithContext=function(e,t){if(r.enabled){var n=Zone.current.fork({name:"AI-"+(e&&e.operation.parentId||"Unknown"),properties:{context:e}});n.run(t)}else t()},r.wrapCallback=function(e){return r.enabled?Zone.current.wrap(e,"User-wrapped method"):e},r.enable=function(){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}if(!r.hasEverEnabled){this.hasEverEnabled=!0;try{typeof Zone>"u"&&am()}catch{um.warn("Failed to require zone.js")}II.registerContextPreservation(function(e){return Zone.current.wrap(e,"AI-ContextPreservation")}),this.patchError(),this.patchTimers(["setTimeout","setInterval"])}this.enabled=!0}},r.disable=function(){this.enabled=!1},r.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},r.patchTimers=function(e){e.forEach(function(t){var n=global[t];global[t]=function(){var i=n.apply(this,arguments);return i.toString=function(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)},i}})},r.patchError=function(){var e=global.Error;function t(){if(!(this instanceof t))return t.apply(Object.create(t.prototype),arguments);var s=e.stackRewrite;if(e.prepareStackTrace){e.stackRewrite=!1;var a=e.prepareStackTrace;e.prepareStackTrace=function(E,I){for(var F=!1,M=0;M<I.length;M++){var K=I[M].getFileName();if(K)if(K.indexOf("AutoCollection/CorrelationContextManager")===-1&&K.indexOf("AutoCollection\\CorrelationContextManager")===-1){if(F)break}else F=!0}return M=Math.max(0,M-1),F&&I.splice(0,M),a(E,I)}}if(e.apply(this,arguments),e.stackRewrite=s,this.stack&&typeof this.stack=="string"){var l=this.stack.split(`
`);l.length>3&&l[2].trim().indexOf("at Error.AppInsightsAsyncCorrelatedErrorWrapper")===0&&l.splice(2,1),this.stack=l.map(function(E){var I=E.indexOf(") [");return I>-1&&(E=E.substr(0,I+1)),E}).join(`
`)}for(var c=Object.getOwnPropertyNames(this).concat(Object.keys(this)),u=0;u<c.length;u++){var d=c[u],m=Zone.__symbol__(d);Object.defineProperty(this,d,{enumerable:!1}),Object.defineProperty(this,m,{enumerable:!1,writable:!0})}return this}t.prototype=e.prototype;for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var o=n[i];t[o]||Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}global.Error=t},r.enabled=!1,r.hasEverEnabled=!1,r}();fl.CorrelationContextManager=AI;var RI=function(){function r(e){this.props=[],this.addHeaderData(e)}return r.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},r.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},r.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},r.prototype.setProperty=function(e,t){if(r.bannedCharacters.test(e)||r.bannedCharacters.test(t)){um.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+t);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=t;return}}this.props.push({key:e,value:t})},r.bannedCharacters=/[,=]/,r}()});var Ft=f((cF,cm)=>{"use strict";var PI=function(){function r(){}return r}();cm.exports=PI});var fm=f((dl,lm)=>{"use strict";var DI=dl&&dl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qI=Ft(),NI=function(r){DI(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return e}(qI);lm.exports=NI});var hl=f((lF,dm)=>{"use strict";var FI=function(){function r(){}return r}();dm.exports=FI});var pm=f((fF,hm)=>{"use strict";var kI=function(){function r(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return r}();hm.exports=kI});var gm=f((pl,vm)=>{"use strict";var LI=pl&&pl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jI=hl(),MI=function(r){LI(e,r);function e(){return r.call(this)||this}return e}(jI);vm.exports=MI});var gl=f((dF,_m)=>{"use strict";var vl;(function(r){r[r.Measurement=0]="Measurement",r[r.Aggregation=1]="Aggregation"})(vl||(vl={}));_m.exports=vl});var ym=f((hF,mm)=>{"use strict";var UI=gl(),HI=function(){function r(){this.kind=UI.Measurement}return r}();mm.exports=HI});var Em=f((pF,bm)=>{"use strict";var GI=function(){function r(){this.ver=1,this.sampleRate=100,this.tags={}}return r}();bm.exports=GI});var ml=f((_l,Cm)=>{"use strict";var BI=_l&&_l.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),VI=Ft(),zI=function(r){BI(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return e}(VI);Cm.exports=zI});var wm=f((yl,Sm)=>{"use strict";var XI=yl&&yl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),WI=Ft(),$I=function(r){XI(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return e}(WI);Sm.exports=$I});var Tm=f((vF,Om)=>{"use strict";var YI=function(){function r(){this.hasFullStack=!0,this.parsedStack=[]}return r}();Om.exports=YI});var Im=f((bl,xm)=>{"use strict";var ZI=bl&&bl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),KI=Ft(),JI=function(r){ZI(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t}return e}(KI);xm.exports=JI});var Rm=f((El,Am)=>{"use strict";var QI=El&&El.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eA=Ft(),tA=function(r){QI(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return e}(eA);Am.exports=tA});var Dm=f((Cl,Pm)=>{"use strict";var rA=Cl&&Cl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nA=ml(),iA=function(r){rA(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return e}(nA);Pm.exports=iA});var Nm=f((Sl,qm)=>{"use strict";var oA=Sl&&Sl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sA=Ft(),aA=function(r){oA(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return e}(sA);qm.exports=aA});var km=f((wl,Fm)=>{"use strict";var uA=wl&&wl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cA=Ft(),lA=function(r){uA(e,r);function e(){var t=r.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return e}(cA);Fm.exports=lA});var jm=f((gF,Lm)=>{"use strict";var Ol;(function(r){r[r.Verbose=0]="Verbose",r[r.Information=1]="Information",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.Critical=4]="Critical"})(Ol||(Ol={}));Lm.exports=Ol});var Um=f((_F,Mm)=>{"use strict";var fA=function(){function r(){}return r}();Mm.exports=fA});var Tl=f(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.AvailabilityData=fm();he.Base=hl();he.ContextTagKeys=pm();he.Data=gm();he.DataPoint=ym();he.DataPointType=gl();he.Domain=Ft();he.Envelope=Em();he.EventData=ml();he.ExceptionData=wm();he.ExceptionDetails=Tm();he.MessageData=Im();he.MetricData=Rm();he.PageViewData=Dm();he.RemoteDependencyData=Nm();he.RequestData=km();he.SeverityLevel=jm();he.StackFrame=Um()});var Hm=f(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var Nr=Tl(),dA=function(){function r(){}return r.TYPE_HTTP="Http",r.TYPE_AI="Http (tracked component)",r}();Js.RemoteDependencyDataConstants=dA;function hA(r){return"properties"in r||r instanceof Nr.EventData||r instanceof Nr.ExceptionData||r instanceof Nr.MessageData||r instanceof Nr.MetricData||r instanceof Nr.PageViewData||r instanceof Nr.RemoteDependencyData||r instanceof Nr.RequestData}Js.domainSupportsProperties=hA});var Gm=f(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});function pA(r){switch(r){case Ve.Event:return"EventData";case Ve.Exception:return"ExceptionData";case Ve.Trace:return"MessageData";case Ve.Metric:return"MetricData";case Ve.Request:return"RequestData";case Ve.Dependency:return"RemoteDependencyData"}}Pn.telemetryTypeToBaseType=pA;function vA(r){switch(r){case"EventData":return Ve.Event;case"ExceptionData":return Ve.Exception;case"MessageData":return Ve.Trace;case"MetricData":return Ve.Metric;case"RequestData":return Ve.Request;case"RemoteDependencyData":return Ve.Dependency}}Pn.baseTypeToTelemetryType=vA;var Ve;(function(r){r[r.Event=0]="Event",r[r.Exception=1]="Exception",r[r.Trace=2]="Trace",r[r.Metric=3]="Metric",r[r.Request=4]="Request",r[r.Dependency=5]="Dependency"})(Ve=Pn.TelemetryType||(Pn.TelemetryType={}))});var Bm=f(Qs=>{"use strict";function gA(r){for(var e in r)Qs.hasOwnProperty(e)||(Qs[e]=r[e])}Object.defineProperty(Qs,"__esModule",{value:!0});gA(Gm())});var ht=f(ea=>{"use strict";function xl(r){for(var e in r)ea.hasOwnProperty(e)||(ea[e]=r[e])}Object.defineProperty(ea,"__esModule",{value:!0});xl(Hm());xl(Tl());xl(Bm())});var Wm=f(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});var Vm=ht(),zm=me(),Dn=[],Xm=function(r){Dn.forEach(function(e){var t=r.data.message;t.lastIndexOf(`
`)==t.length-1&&(t=t.substring(0,t.length-1)),e.trackTrace({message:t,severity:r.data.stderr?Vm.SeverityLevel.Warning:Vm.SeverityLevel.Information})})};function _A(r,e){r?(Dn.length===0&&zm.channel.subscribe("console",Xm),Dn.push(e)):(Dn=Dn.filter(function(t){return t!=e}),Dn.length===0&&zm.channel.unsubscribe("console",Xm))}Il.enable=_A});var Zm=f(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});var qn=ht(),$m=me(),Nn=[],mA={10:qn.SeverityLevel.Verbose,20:qn.SeverityLevel.Verbose,30:qn.SeverityLevel.Information,40:qn.SeverityLevel.Warning,50:qn.SeverityLevel.Error,60:qn.SeverityLevel.Critical},Ym=function(r){Nn.forEach(function(e){var t=mA[r.data.level];e.trackTrace({message:r.data.result,severity:t})})};function yA(r,e){r?(Nn.length===0&&$m.channel.subscribe("bunyan",Ym),Nn.push(e)):(Nn=Nn.filter(function(t){return t!=e}),Nn.length===0&&$m.channel.unsubscribe("bunyan",Ym))}Al.enable=yA});var Qm=f(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});var be=ht(),Km=me(),Fn=[],bA={syslog:function(r){var e={emerg:be.SeverityLevel.Critical,alert:be.SeverityLevel.Critical,crit:be.SeverityLevel.Critical,error:be.SeverityLevel.Error,warning:be.SeverityLevel.Warning,notice:be.SeverityLevel.Information,info:be.SeverityLevel.Information,debug:be.SeverityLevel.Verbose};return e[r]===void 0?be.SeverityLevel.Information:e[r]},npm:function(r){var e={error:be.SeverityLevel.Error,warn:be.SeverityLevel.Warning,info:be.SeverityLevel.Information,verbose:be.SeverityLevel.Verbose,debug:be.SeverityLevel.Verbose,silly:be.SeverityLevel.Verbose};return e[r]===void 0?be.SeverityLevel.Information:e[r]},unknown:function(r){return be.SeverityLevel.Information}},Jm=function(r){Fn.forEach(function(e){var t=bA[r.data.levelKind](r.data.level);e.trackTrace({message:r.data.message,severity:t,properties:r.data.meta})})};function EA(r,e){r?(Fn.length===0&&Km.channel.subscribe("winston",Jm),Fn.push(e)):(Fn=Fn.filter(function(t){return t!=e}),Fn.length===0&&Km.channel.unsubscribe("winston",Jm))}Rl.enable=EA});var ty=f((TF,ey)=>{"use strict";var CA=Ks(),SA=function(){function r(e){if(r.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,r.INSTANCE=this}return r.prototype.enable=function(e,t){CA.IsInitialized&&(Wm().enable(e&&t,this._client),Zm().enable(e,this._client),Qm().enable(e,this._client))},r.prototype.isInitialized=function(){return this._isInitialized},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1,!1)},r._methodNames=["debug","info","log","warn","error"],r}();ey.exports=SA});var ny=f((xF,ry)=>{"use strict";var wA=function(){function r(e){if(r.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._client=e}return Object.defineProperty(r,"UNCAUGHT_EXCEPTION_HANDLER_NAME",{get:function(){return"uncaughtException"},enumerable:!0,configurable:!0}),Object.defineProperty(r,"UNHANDLED_REJECTION_HANDLER_NAME",{get:function(){return"unhandledRejection"},enumerable:!0,configurable:!0}),r.prototype.isInitialized=function(){return this._isInitialized},r.prototype.enable=function(e){var t=this;if(e){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var i=function(o,s){if(t._client.trackException({exception:s}),t._client.flush({isAppCrashing:!0}),o)throw s};this._exceptionListenerHandle=i.bind(this,!0),this._rejectionListenerHandle=i.bind(this,!1),process.on(r.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(r.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)}}else this._exceptionListenerHandle&&(process.removeListener(r.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(r.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r.INSTANCE=null,r}();ry.exports=wA});var Dl=f((IF,iy)=>{"use strict";var Pl=require("os"),OA=Be(),TA=function(){function r(e){if(r.INSTANCE)throw new Error("Performance tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._isInitialized=!1,this._client=e}return r.prototype.enable=function(e){var t=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=Pl.cpus(),this._lastRequests={totalRequestCount:r._totalRequestCount,totalFailedRequestCount:r._totalFailedRequestCount,time:+new Date},this._handle=setInterval(function(){return t.trackPerformance()},6e4),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},r.countRequest=function(e,t){var n=this;if(!!r.isEnabled()){var i=+new Date;if(!e||!t){OA.warn("AutoCollectPerformance.countRequest was called with invalid parameters: ",!!e,!!t);return}typeof t.once=="function"&&t.once("finish",function(){var o=+new Date;n._lastRequestExecutionTime=o-i,r._totalRequestCount++,t.statusCode>=400&&r._totalFailedRequestCount++})}},r.prototype.isInitialized=function(){return this._isInitialized},r.isEnabled=function(){return r.INSTANCE&&r.INSTANCE._isEnabled},r.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork()},r.prototype._trackCpu=function(){var e=Pl.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,i=0,o=0,s=0,a=0;!!e&&a<e.length;a++){var l=e[a],c=this._lastCpus[a],u="% cpu("+a+") ",d=l.model,m=l.speed,E=l.times,I=c.times,F=E.user-I.user||0;t+=F;var M=E.sys-I.sys||0;n+=M;var K=E.nice-I.nice||0;i+=K;var ve=E.idle-I.idle||0;o+=ve;var ie=E.irq-I.irq||0;s+=ie}var J=t+n+i+o+s||1;this._client.trackMetric({name:"\\Processor(_Total)\\% Processor Time",value:(J-o)/J*100}),this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\% Processor Time",value:t/J*100})}this._lastCpus=e},r.prototype._trackMemory=function(){var e=Pl.freemem(),t=process.memoryUsage().rss;this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\Private Bytes",value:t}),this._client.trackMetric({name:"\\Memory\\Available Bytes",value:e})},r.prototype._trackNetwork=function(){var e=this._lastRequests,t={totalRequestCount:r._totalRequestCount,totalFailedRequestCount:r._totalFailedRequestCount,time:+new Date},n=t.totalRequestCount-e.totalRequestCount||0,i=t.totalFailedRequestCount-e.totalFailedRequestCount||0,o=t.time-e.time,s=o/1e3;if(o>0){var a=n/s,l=i/s;this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",value:a}),this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time",value:r._lastRequestExecutionTime})}this._lastRequests=t},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r._totalRequestCount=0,r._totalFailedRequestCount=0,r._lastRequestExecutionTime=0,r}();iy.exports=TA});var kn=f((AF,oy)=>{"use strict";oy.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context"}});var kt=f((Fl,ay)=>{"use strict";var ql=Fl&&Fl.__assign||Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},xA=require("http"),sy=require("https"),Nl=require("url"),ta=require("constants"),ra=Be(),IA=kn(),AA=function(){function r(){}return r.getCookie=function(e,t){var n="";if(e&&e.length&&typeof t=="string")for(var i=e+"=",o=t.split(";"),s=0;s<o.length;s++){var t=o[s];if(t=r.trim(t),t&&t.indexOf(i)===0){n=t.substring(i.length,o[s].length);break}}return n},r.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},r.int32ArrayToBase64=function(e){var t=function(s,a){return String.fromCharCode(s>>a&255)},n=function(s){return t(s,24)+t(s,16)+t(s,8)+t(s,0)},i=e.map(n).join(""),o=new Buffer(i,"binary").toString("base64");return o.substr(0,o.indexOf("="))},r.random32=function(){return 4294967296*Math.random()|0},r.randomu32=function(){return r.random32()+2147483648},r.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t="",n,i=0;i<4;i++)n=r.random32(),t+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+Math.random()*4|0];return t.substr(0,8)+t.substr(9,4)+"4"+t.substr(13,3)+o+t.substr(16,3)+t.substr(19,12)},r.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},r.isError=function(e){return e instanceof Error},r.isPrimitive=function(e){var t=typeof e;return t==="string"||t==="number"||t==="boolean"},r.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},r.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,o=Math.floor(e/(1e3*60*60*24));t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+t},r.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},r.extractObject=function(e){return e instanceof Error?r.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},r.validateStringMap=function(e){if(typeof e!="object"){ra.info("Invalid properties dropped from payload");return}var t={};for(var n in e){var i="",o=e[n],s=typeof o;if(r.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){ra.info("key: "+n+" was function; will not serialize");continue}else{var a=r.isArray(o)?o:r.extractObject(o);try{r.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(l){i=o.constructor.name.toString()+" (Error: "+l.message+")",ra.info("key: "+n+", could not be serialized")}}t[n]=i.substring(0,r.MAX_PROPERTY_LENGTH)}return t},r.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!t)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(o.test(Nl.parse(t).hostname))return!1}return!0},r.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[IA.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==t)return s[1]}},r.makeRequest=function(e,t,n,i){t&&t.indexOf("//")===0&&(t="https:"+t);var o=Nl.parse(t),s=ql({},n,{host:o.hostname,port:o.port,path:o.pathname}),a=void 0;if(o.protocol==="https:"&&(a=e.proxyHttpsUrl||void 0),o.protocol==="http:"&&(a=e.proxyHttpUrl||void 0),a){a.indexOf("//")===0&&(a="http:"+a);var l=Nl.parse(a);l.protocol==="https:"?(ra.info("Proxies that use HTTPS are not supported"),a=void 0):s=ql({},s,{host:l.hostname,port:l.port||"80",path:t,headers:ql({},s.headers,{Host:o.hostname})})}var c=o.protocol==="https:"&&!a;return c&&e.httpsAgent!==void 0?s.agent=e.httpsAgent:!c&&e.httpAgent!==void 0?s.agent=e.httpAgent:c&&(s.agent=r.tlsRestrictedAgent),c?sy.request(s,i):xA.request(s,i)},r.MAX_PROPERTY_LENGTH=8192,r.tlsRestrictedAgent=new sy.Agent({secureOptions:ta.SSL_OP_NO_SSLv2|ta.SSL_OP_NO_SSLv3|ta.SSL_OP_NO_TLSv1|ta.SSL_OP_NO_TLSv1_1}),r}();ay.exports=AA});var kl=f((RF,uy)=>{"use strict";var RA=function(){function r(){}return r.prototype.getUrl=function(){return this.url},r.prototype.RequestParser=function(){this.startTime=+new Date},r.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(t){if(typeof t=="string")i.error=t;else if(t instanceof Error)i.error=t.message;else if(typeof t=="object")for(var o in t)i[o]=t[o]&&t[o].toString&&t[o].toString()}this.properties=i},r.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},r}();uy.exports=RA});var ia=f((PF,cy)=>{"use strict";var na=kt(),Ll=Be(),PA=function(){function r(){}return r.queryCorrelationId=function(e,t){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId";if(r.completedLookups.hasOwnProperty(n)){t(r.completedLookups[n]);return}else if(r.pendingLookups[n]){r.pendingLookups[n].push(t);return}r.pendingLookups[n]=[t];var i=function(){if(!!r.pendingLookups[n]){var o={method:"GET",disableAppInsightsAutoCollection:!0};Ll.info(r.TAG,o);var s=na.makeRequest(e,n,o,function(a){if(a.statusCode===200){var l="";a.setEncoding("utf-8"),a.on("data",function(c){l+=c}),a.on("end",function(){Ll.info(r.TAG,l);var c=r.correlationIdPrefix+l;r.completedLookups[n]=c,r.pendingLookups[n]&&r.pendingLookups[n].forEach(function(u){return u(c)}),delete r.pendingLookups[n]})}else a.statusCode>=400&&a.statusCode<500?(r.completedLookups[n]=void 0,delete r.pendingLookups[n]):setTimeout(i,e.correlationIdRetryIntervalMs)});s&&(s.on("error",function(a){Ll.warn(r.TAG,a)}),s.end())}};setTimeout(i,0)},r.cancelCorrelationIdQuery=function(e,t){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId",i=r.pendingLookups[n];i&&(r.pendingLookups[n]=i.filter(function(o){return o!=t}),r.pendingLookups[n].length==0&&delete r.pendingLookups[n])},r.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var t=(r.currentRootId++).toString(16);return r.appendSuffix(e,t,"_")}else return r.generateRootId()},r.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n=e[0]==="|"?1:0;return e.substring(n,t)},r.generateRootId=function(){return"|"+na.w3cTraceId()+"."},r.appendSuffix=function(e,t,n){if(e.length+t.length<r.requestIdMaxLength)return e+t+n;var i=r.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_")break}if(i<=1)return r.generateRootId();for(t=na.randomu32().toString(16);t.length<8;)t="0"+t;return e.substring(0,i)+t+"#"},r.TAG="CorrelationIdManager",r.correlationIdPrefix="cid-v1:",r.pendingLookups={},r.completedLookups={},r.requestIdMaxLength=1024,r.currentRootId=na.randomu32(),r}();cy.exports=PA});var fy=f((Ml,ly)=>{"use strict";var DA=Ml&&Ml.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$i=require("url"),jl=ht(),qA=kt(),NA=kn(),FA=kl(),kA=ia(),LA=function(r){DA(e,r);function e(t,n){var i=r.call(this)||this;return n&&n.method&&t&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(t,n),i.startTime=+new Date),i}return e.prototype.onError=function(t){this._setStatus(void 0,t)},e.prototype.onResponse=function(t){this._setStatus(t.statusCode,void 0),this.correlationId=qA.getCorrelationContextTarget(t,NA.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(t,n){var i=$i.parse(this.url);i.search=void 0,i.hash=void 0;var o=this.method.toUpperCase()+" "+i.pathname,s=jl.RemoteDependencyDataConstants.TYPE_HTTP,a=i.hostname;this.correlationId?(s=jl.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==kA.correlationIdPrefix&&(a=i.hostname+" | "+this.correlationId)):s=jl.RemoteDependencyDataConstants.TYPE_HTTP;var l={id:n,name:o,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:a};if(t){for(var c in t)l[c]||(l[c]=t[c]);if(t.properties)for(var c in t.properties)l.properties[c]=t.properties[c]}return l},e._getUrlFromRequestOptions=function(t,n){if(typeof t=="string")t=$i.parse(t);else{var i=t;t={},i&&Object.keys(i).forEach(function(a){t[a]=i[a]})}if(t.path){var o=$i.parse(t.path);t.pathname=o.pathname,t.search=o.search}if(t.host&&t.port){var s=$i.parse("http://"+t.host);!s.port&&t.port&&(t.hostname=t.host,delete t.host)}return t.protocol=t.protocol||n.agent&&n.agent.protocol||void 0,t.hostname=t.hostname||"localhost",$i.format(t)},e}(FA);ly.exports=LA});var hy=f(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});var dy=me(),Ln=[];jn.subscriber=function(r){Ln.forEach(function(e){var t=r.data.startedData&&r.data.startedData.databaseName||"Unknown database";e.trackDependency({target:t,data:r.data.event.commandName,name:r.data.event.commandName,duration:r.data.event.duration,success:r.data.succeeded,resultCode:r.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})};function jA(r,e){r?(Ln.length===0&&dy.channel.subscribe("mongodb",jn.subscriber),Ln.push(e)):(Ln=Ln.filter(function(t){return t!=e}),Ln.length===0&&dy.channel.unsubscribe("mongodb",jn.subscriber))}jn.enable=jA});var vy=f(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});var py=me(),Mn=[];Un.subscriber=function(r){Mn.forEach(function(e){var t=r.data.query||{},n=t.sql||"Unknown query",i=!r.data.err,o=t._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;e.trackDependency({target:a,data:n,name:n,duration:r.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"mysql"})})};function MA(r,e){r?(Mn.length===0&&py.channel.subscribe("mysql",Un.subscriber),Mn.push(e)):(Mn=Mn.filter(function(t){return t!=e}),Mn.length===0&&py.channel.unsubscribe("mysql",Un.subscriber))}Un.enable=MA});var _y=f(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});var gy=me(),Hn=[];Gn.subscriber=function(r){Hn.forEach(function(e){r.data.commandObj.command!=="info"&&e.trackDependency({target:r.data.address,name:r.data.commandObj.command,data:r.data.commandObj.command,duration:r.data.duration,success:!r.data.err,resultCode:r.data.err?"1":"0",dependencyTypeName:"redis"})})};function UA(r,e){r?(Hn.length===0&&gy.channel.subscribe("redis",Gn.subscriber),Hn.push(e)):(Hn=Hn.filter(function(t){return t!=e}),Hn.length===0&&gy.channel.unsubscribe("redis",Gn.subscriber))}Gn.enable=UA});var yy=f(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});var my=me(),Bn=[];Vn.subscriber=function(r){Bn.forEach(function(e){var t=r.data.query,n=t.preparable&&t.preparable.text||t.plan||t.text||"unknown query",i=!r.data.error,o=r.data.database.host+":"+r.data.database.port;e.trackDependency({target:o,data:n,name:n,duration:r.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"postgres"})})};function HA(r,e){r?(Bn.length===0&&my.channel.subscribe("postgres",Vn.subscriber),Bn.push(e)):(Bn=Bn.filter(function(t){return t!=e}),Bn.length===0&&my.channel.unsubscribe("postgres",Vn.subscriber))}Vn.enable=HA});var oa=f((kF,by)=>{"use strict";var Fr=require("http"),zn=require("https"),GA=Be(),BA=kt(),yt=kn(),VA=fy(),zA=Rn(),XA=Ks(),WA=function(){function r(e){if(r.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._client=e}return r.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),XA.IsInitialized&&(hy().enable(e,this._client),vy().enable(e,this._client),_y().enable(e,this._client),yy().enable(e,this._client))},r.prototype.isInitialized=function(){return this._isInitialized},r.prototype._initialize=function(){var e=this;this._isInitialized=!0;var t=Fr.get,n=Fr.request,i=zn.request,o=function(s,a){var l=!a[r.disableCollectionRequestOption]&&!s[r.alreadyAutoCollectedFlag];s[r.alreadyAutoCollectedFlag]=!0,s&&a&&l&&r.trackRequest(e._client,{options:a,request:s})};Fr.request=function(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var c=n.call.apply(n,[Fr,s].concat(a));return o(c,s),c},zn.request=function(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var c=i.call.apply(i,[zn,s].concat(a));return o(c,s),c},Fr.get=function(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var c=(u=Fr.request).call.apply(u,[Fr,s].concat(a));return c.end(),c;var u},zn.get=function(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];var c=(u=zn.request).call.apply(u,[zn,s].concat(a));return c.end(),c;var u}},r.trackRequest=function(e,t){if(!t.options||!t.request||!e){GA.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!t.options,!t.request,!e);return}var n=new VA(t.options,t.request),i=zA.CorrelationContextManager.getCurrentContext(),o=i&&i.operation&&i.operation.parentId+r.requestNumber+++".";if(BA.canIncludeCorrelationHeader(e,n.getUrl())&&t.request.getHeader&&t.request.setHeader){if(e.config&&e.config.correlationId){var s=t.request.getHeader(yt.requestContextHeader);if(s){var a=s.split(","),l=yt.requestContextSourceKey+"=";a.some(function(u){return u.substring(0,l.length)===l})||t.request.setHeader(yt.requestContextHeader,s+","+yt.requestContextSourceKey+"="+e.config.correlationId)}else t.request.setHeader(yt.requestContextHeader,yt.requestContextSourceKey+"="+e.config.correlationId)}if(i&&i.operation){t.request.setHeader(yt.requestIdHeader,o),t.request.setHeader(yt.parentIdHeader,i.operation.id),t.request.setHeader(yt.rootIdHeader,o);var c=i.customProperties.serializeToHeader();c&&t.request.setHeader(yt.correlationContextHeader,c)}}t.request.on&&(t.request.on("response",function(u){n.onResponse(u);var d=n.getDependencyTelemetry(t,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=t.options,d.contextObjects["http.ClientRequest"]=t.request,d.contextObjects["http.ClientResponse"]=u,e.trackDependency(d)}),t.request.on("error",function(u){n.onError(u);var d=n.getDependencyTelemetry(t,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=t.options,d.contextObjects["http.ClientRequest"]=t.request,d.contextObjects.Error=u,e.trackDependency(d)}))},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r.disableCollectionRequestOption="disableAppInsightsAutoCollection",r.requestNumber=1,r.alreadyAutoCollectedFlag="_appInsightsAutoCollected",r}();by.exports=WA});var Sy=f((Hl,Cy)=>{"use strict";var $A=Hl&&Hl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sa=require("url"),YA=ht(),Ey=kt(),kr=kn(),ZA=kl(),Ul=ia(),KA=function(r){$A(e,r);function e(t,n){var i=r.call(this)||this;return t&&(i.method=t.method,i.url=i._getAbsoluteUrl(t),i.startTime=+new Date,i.socketRemoteAddress=t.socket&&t.socket.remoteAddress,i.parseHeaders(t,n),t.connection&&(i.connectionRemoteAddress=t.connection.remoteAddress,i.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),i}return e.prototype.onError=function(t,n){this._setStatus(void 0,t),n&&(this.duration=n)},e.prototype.onResponse=function(t,n){this._setStatus(t.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(t){var n={id:this.requestId,name:this.method+" "+sa.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(t){for(var i in t)n[i]||(n[i]=t[i]);if(t.properties)for(var i in t.properties)n.properties[i]=t.properties[i]}return n},e.prototype.getRequestTags=function(t){var n={};for(var i in t)n[i]=t[i];return n[e.keys.locationIp]=t[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=t[e.keys.sessionId]||this._getId("ai_session"),n[e.keys.userId]=t[e.keys.userId]||this._getId("ai_user"),n[e.keys.userAuthUserId]=t[e.keys.userAuthUserId]||this._getId("ai_authUser"),n[e.keys.operationName]=this.getOperationName(t),n[e.keys.operationParentId]=this.getOperationParentId(t),n[e.keys.operationId]=this.getOperationId(t),n},e.prototype.getOperationId=function(t){return t[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(t){return t[e.keys.operationParentId]||this.parentId||this.getOperationId(t)},e.prototype.getOperationName=function(t){return t[e.keys.operationName]||this.method+" "+sa.parse(this.url).pathname},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype._getAbsoluteUrl=function(t){if(!t.headers)return t.url;var n=t.connection?t.connection.encrypted:null,i=sa.parse(t.url),o=i.pathname,s=i.search,a=sa.format({protocol:n?"https":"http",host:t.headers.host,pathname:o,search:s});return a},e.prototype._getIp=function(){var t=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=t.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(t){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=e.parseId(Ey.getCookie(t,n));return i},e.prototype.parseHeaders=function(t,n){if(this.rawHeaders=t.headers||t.rawHeaders,this.userAgent=t.headers&&t.headers["user-agent"],this.sourceCorrelationId=Ey.getCorrelationContextTarget(t,kr.requestContextSourceKey),t.headers){if(this.correlationContextHeader=t.headers[kr.correlationContextHeader],t.headers[kr.requestIdHeader])this.parentId=t.headers[kr.requestIdHeader],this.requestId=Ul.generateRequestId(this.parentId),this.correlationContextHeader=t.headers[kr.correlationContextHeader];else{var i=t.headers[kr.rootIdHeader];this.parentId=t.headers[kr.parentIdHeader],this.requestId=Ul.generateRequestId(i||this.parentId),this.correlationContextHeader=null}n&&(this.requestId=n),this.operationId=Ul.getRootId(this.requestId)}},e.parseId=function(t){return t.substr(0,t.indexOf("|"))},e.keys=new YA.ContextTagKeys,e}(ZA);Cy.exports=KA});var Bl=f((LF,Iy)=>{"use strict";var wy=require("http"),Oy=require("https"),Ty=Be(),JA=kt(),Xn=kn(),Gl=Sy(),Wn=Rn(),xy=Dl(),QA=function(){function r(e){if(r.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");r.INSTANCE=this,this._client=e}return r.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||xy.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},r.prototype.useAutoCorrelation=function(e){e&&!this._isAutoCorrelating?Wn.CorrelationContextManager.enable():!e&&this._isAutoCorrelating&&Wn.CorrelationContextManager.disable(),this._isAutoCorrelating=e},r.prototype.isInitialized=function(){return this._isInitialized},r.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},r.prototype._generateCorrelationContext=function(e){if(!!this._isAutoCorrelating)return Wn.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader())},r.prototype._initialize=function(){var e=this;this._isInitialized=!0;var t=function(s){if(!!s){if(typeof s!="function")throw new Error("onRequest handler must be a function");return function(a,l){var c=a&&!a[r.alreadyAutoCollectedFlag];if(a&&c){var u=new Gl(a),d=e._generateCorrelationContext(u);Wn.CorrelationContextManager.runWithContext(d,function(){e._isEnabled&&(a[r.alreadyAutoCollectedFlag]=!0,r.trackRequest(e._client,{request:a,response:l},u)),xy.countRequest(a,l),typeof s=="function"&&s(a,l)})}else typeof s=="function"&&s(a,l)}}},n=function(s){var a=s.addListener.bind(s);s.addListener=function(l,c){switch(l){case"request":case"checkContinue":return a(l,t(c));default:return a(l,c)}},s.on=s.addListener},i=wy.createServer;wy.createServer=function(s){var a=i(t(s));return n(a),a};var o=Oy.createServer;Oy.createServer=function(s,a){var l=o(s,t(a));return n(l),l}},r.trackRequestSync=function(e,t){if(!t.request||!t.response||!e){Ty.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!t.request,!t.response,!e);return}r.addResponseCorrelationIdHeader(e,t.response);var n=Wn.CorrelationContextManager.getCurrentContext(),i=new Gl(t.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),r.endRequest(e,i,t,t.duration,t.error)},r.trackRequest=function(e,t,n){if(!t.request||!t.response||!e){Ty.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!t.request,!t.response,!e);return}var i=Wn.CorrelationContextManager.getCurrentContext(),o=n||new Gl(t.request,i&&i.operation.parentId);JA.canIncludeCorrelationHeader(e,o.getUrl())&&r.addResponseCorrelationIdHeader(e,t.response),i&&!n&&(i.operation.id=o.getOperationId(e.context.tags)||i.operation.id,i.operation.name=o.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),t.response.once&&t.response.once("finish",function(){r.endRequest(e,o,t,null,null)}),t.request.on&&t.request.on("error",function(s){r.endRequest(e,o,t,null,s)})},r.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(Xn.requestContextHeader);if(n){var i=n.split(","),o=Xn.requestContextSourceKey+"=";i.some(function(s){return s.substring(0,o.length)===o})||t.setHeader(Xn.requestContextHeader,n+","+Xn.requestContextSourceKey+"="+e.config.correlationId)}else t.setHeader(Xn.requestContextHeader,Xn.requestContextSourceKey+"="+e.config.correlationId)}},r.endRequest=function(e,t,n,i,o){o?t.onError(o,i):t.onResponse(n.response,i);var s=t.getRequestTelemetry(n);if(s.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(s)},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r.alreadyAutoCollectedFlag="_appInsightsAutoCollected",r}();Iy.exports=QA});var Ry=f((jF,Ay)=>{"use strict";var Vl=ia(),eR=function(){function r(e){var t=this;this.endpointBase="https://dc.services.visualstudio.com",this.instrumentationKey=e||r._getInstrumentationKey(),this.endpointUrl=this.endpointBase+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net"],this.setCorrelationId=function(n){return t.correlationId=n},this.profileQueryEndpoint=process.env[r.ENV_profileQueryEndpoint]||this.endpointBase,this.proxyHttpUrl=process.env[r.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[r.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0}return Object.defineProperty(r.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){Vl.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=Vl.correlationIdPrefix,Vl.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),r._getInstrumentationKey=function(){var e=process.env[r.ENV_iKey]||process.env[r.ENV_azurePrefix+r.ENV_iKey]||process.env[r.legacy_ENV_iKey]||process.env[r.ENV_azurePrefix+r.legacy_ENV_iKey];if(!e||e=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return e},r.ENV_azurePrefix="APPSETTING_",r.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",r.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",r.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",r.ENV_http_proxy="http_proxy",r.ENV_https_proxy="https_proxy",r}();Ay.exports=eR});var Fy=f((MF,Ny)=>{"use strict";var Lt=require("os"),Py=require("fs"),Dy=require("path"),tR=ht(),qy=Be(),rR=function(){function r(e){this.keys=new tR.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return r.prototype._loadApplicationContext=function(e){if(e=e||Dy.resolve(__dirname,"../../../../package.json"),!r.appVersion[e]){r.appVersion[e]="unknown";try{var t=JSON.parse(Py.readFileSync(e,"utf8"));t&&typeof t.version=="string"&&(r.appVersion[e]=t.version)}catch(n){qy.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=r.appVersion[e]},r.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=Lt&&Lt.hostname(),this.tags[this.keys.deviceOSVersion]=Lt&&Lt.type()+" "+Lt.release(),this.tags[this.keys.cloudRole]=r.DefaultRoleName,this.tags["ai.device.osArchitecture"]=Lt&&Lt.arch(),this.tags["ai.device.osPlatform"]=Lt&&Lt.platform()},r.prototype._loadInternalContext=function(){var e=Dy.resolve(__dirname,"../../package.json");if(!r.sdkVersion){r.sdkVersion="unknown";try{var t=JSON.parse(Py.readFileSync(e,"utf8"));t&&typeof t.version=="string"&&(r.sdkVersion=t.version)}catch(n){qy.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+r.sdkVersion},r.DefaultRoleName="Web",r.appVersion={},r.sdkVersion=null,r}();Ny.exports=rR});var jy=f((UF,Ly)=>{"use strict";var ky=Be(),nR=function(){function r(e,t,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=i}return r.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},r.prototype.send=function(e){var t=this;if(!this._isDisabled()){if(!e){ky.warn("Cannot send null/undefined telemetry");return}var n=this._stringify(e);if(typeof n=="string"){if(this._buffer.push(n),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){t._timeoutHandle=null,t.triggerSend(!1)},this._getBatchIntervalMs()))}}},r.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;if(!n){var i=this._buffer.join(`
`);e?(this._sender.saveOnCrash(i),typeof t=="function"&&t("data saved on crash")):this._sender.send(new Buffer(i),t)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof t=="function"&&t("no data to send")},r.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){ky.warn("Failed to serialize payload",t,e)}},r}();Ly.exports=nR});var Hy=f(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var My=ht();function iR(r,e){var t=r.sampleRate,n=!1;return t==null||t>=100||r.data&&My.TelemetryType.Metric===My.baseTypeToTelemetryType(r.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=Uy(e.correlationContext.operation.id)<t:n=Math.random()*100<t,n)}aa.samplingTelemetryProcessor=iR;function Uy(r){var e=-2147483648,t=2147483647,n=5381;if(!r)return 0;for(;r.length<8;)r=r+r;for(var i=0;i<r.length;i++)n=((n<<5)+n|0)+r.charCodeAt(i)|0;return n=n<=e?t:Math.abs(n),n/t*100}aa.getSamplingHashCode=Uy});var Gy=f(ua=>{"use strict";function oR(r){for(var e in r)ua.hasOwnProperty(e)||(ua[e]=r[e])}Object.defineProperty(ua,"__esModule",{value:!0});oR(Hy())});var Vy=f((BF,By)=>{"use strict";var Pe=require("fs"),ca=require("os"),jt=require("path"),sR=require("zlib"),$n=require("child_process"),xe=Be(),aR=oa(),uR=kt(),cR=function(){function r(e,t,n){if(this._config=e,this._onSuccess=t,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=r.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=r.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!r.OS_PROVIDES_FILE_PROTECTION)if(r.USE_ICACLS){try{r.OS_PROVIDES_FILE_PROTECTION=Pe.existsSync(r.ICACLS_PATH)}catch{}r.OS_PROVIDES_FILE_PROTECTION||xe.warn(r.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else r.OS_PROVIDES_FILE_PROTECTION=!0}return r.prototype.setDiskRetryMode=function(e,t,n){this._enableDiskRetryMode=r.OS_PROVIDES_FILE_PROTECTION&&e,typeof t=="number"&&t>=0&&(this._resendInterval=Math.floor(t)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!r.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,xe.warn(r.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},r.prototype.send=function(e,t){var n=this,i=this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};sR.gzip(e,function(s,a){var l=a;s?(xe.warn(s),l=e,o.headers["Content-Length"]=e.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=a.length),xe.info(r.TAG,o),o[aR.disableCollectionRequestOption]=!0;var c=function(d){d.setEncoding("utf-8");var m="";d.on("data",function(E){m+=E}),d.on("end",function(){n._numConsecutiveFailures=0,xe.info(r.TAG,m),typeof n._onSuccess=="function"&&n._onSuccess(m),typeof t=="function"&&t(m),n._enableDiskRetryMode&&(d.statusCode===200?setTimeout(function(){return n._sendFirstFileOnDisk()},n._resendInterval):(d.statusCode===408||d.statusCode===429||d.statusCode===439||d.statusCode===500||d.statusCode===503)&&n._storeToDisk(e))})},u=uR.makeRequest(n._config,i,o,c);u.on("error",function(d){if(n._numConsecutiveFailures++,!n._enableDiskRetryMode||n._numConsecutiveFailures>0&&n._numConsecutiveFailures%r.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var m="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";n._enableDiskRetryMode&&(m="Ingestion endpoint could not be reached "+n._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),xe.warn(r.TAG,m,d)}else{var m="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";xe.info(r.TAG,m,d)}if(n._onErrorHelper(d),typeof t=="function"){var E="error sending telemetry";d&&typeof d.toString=="function"&&(E=d.toString()),t(E)}n._enableDiskRetryMode&&n._storeToDisk(e)}),u.write(l),u.end()})},r.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},r.prototype._runICACLS=function(e,t){var n=$n.spawn(r.ICACLS_PATH,e,{windowsHide:!0});n.on("error",function(i){return t(i)}),n.on("close",function(i,o){return t(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"))})},r.prototype._runICACLSSync=function(e){if($n.spawnSync){var t=$n.spawnSync(r.ICACLS_PATH,e,{windowsHide:!0});if(t.error)throw t.error;if(t.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+t.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},r.prototype._getACLIdentity=function(e){if(r.ACL_IDENTITY)return e(null,r.ACL_IDENTITY);var t=$n.spawn(r.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";t.stdout.on("data",function(i){return n+=i}),t.on("error",function(i){return e(i,null)}),t.on("close",function(i,o){return r.ACL_IDENTITY=n&&n.trim(),e(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),r.ACL_IDENTITY)})},r.prototype._getACLIdentitySync=function(){if(r.ACL_IDENTITY)return r.ACL_IDENTITY;if($n.spawnSync){var e=$n.spawnSync(r.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return r.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),r.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},r.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},r.prototype._applyACLRules=function(e,t){var n=this;if(!r.USE_ICACLS)return t(null);if(r.ACLED_DIRECTORIES[e]===void 0)r.ACLED_DIRECTORIES[e]=!1,this._getACLIdentity(function(i,o){if(i)return r.ACLED_DIRECTORIES[e]=!1,t(i);n._runICACLS(n._getACLArguments(e,o),function(s){return r.ACLED_DIRECTORIES[e]=!s,t(s)})});else return t(r.ACLED_DIRECTORIES[e]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},r.prototype._applyACLRulesSync=function(e){if(r.USE_ICACLS){if(r.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),r.ACLED_DIRECTORIES[e]=!0;return}else if(!r.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},r.prototype._confirmDirExists=function(e,t){var n=this;Pe.lstat(e,function(i,o){i&&i.code==="ENOENT"?Pe.mkdir(e,function(s){s&&s.code!=="EEXIST"?t(s):n._applyACLRules(e,t)}):!i&&o.isDirectory()?n._applyACLRules(e,t):t(i||new Error("Path existed but was not a directory"))})},r.prototype._getShallowDirectorySize=function(e,t){Pe.readdir(e,function(n,i){if(n)return t(n,-1);var o=null,s=0,a=0;if(i.length===0){t(null,0);return}for(var l=0;l<i.length;l++)Pe.stat(jt.join(e,i[l]),function(c,u){a++,c?o=c:u.isFile()&&(s+=u.size),a===i.length&&(o?t(o,-1):t(o,s))})})},r.prototype._getShallowDirectorySizeSync=function(e){for(var t=Pe.readdirSync(e),n=0,i=0;i<t.length;i++)n+=Pe.statSync(jt.join(e,t[i])).size;return n},r.prototype._storeToDisk=function(e){var t=this,n=jt.join(ca.tmpdir(),r.TEMPDIR_PREFIX+this._config.instrumentationKey);xe.info(r.TAG,"Checking existance of data storage directory: "+n),this._confirmDirExists(n,function(i){if(i){xe.warn(r.TAG,"Error while checking/creating directory: "+(i&&i.message)),t._onErrorHelper(i);return}t._getShallowDirectorySize(n,function(o,s){if(o||s<0){xe.warn(r.TAG,"Error while checking directory size: "+(o&&o.message)),t._onErrorHelper(o);return}else if(s>t._maxBytesOnDisk){xe.warn(r.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+s);return}var a=new Date().getTime()+".ai.json",l=jt.join(n,a);xe.info(r.TAG,"saving data to disk at: "+l),Pe.writeFile(l,e,{mode:384},function(c){return t._onErrorHelper(c)})})})},r.prototype._storeToDiskSync=function(e){var t=jt.join(ca.tmpdir(),r.TEMPDIR_PREFIX+this._config.instrumentationKey);try{xe.info(r.TAG,"Checking existance of data storage directory: "+t),Pe.existsSync(t)||Pe.mkdirSync(t),this._applyACLRulesSync(t);var n=this._getShallowDirectorySizeSync(t);if(n>this._maxBytesOnDisk){xe.info(r.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);return}var i=new Date().getTime()+".ai.json",o=jt.join(t,i);xe.info(r.TAG,"saving data before crash to disk at: "+o),Pe.writeFileSync(o,e,{mode:384})}catch(s){xe.warn(r.TAG,"Error while saving data to disk: "+(s&&s.message)),this._onErrorHelper(s)}},r.prototype._sendFirstFileOnDisk=function(){var e=this,t=jt.join(ca.tmpdir(),r.TEMPDIR_PREFIX+this._config.instrumentationKey);Pe.exists(t,function(n){n&&Pe.readdir(t,function(i,o){if(i)e._onErrorHelper(i);else if(o=o.filter(function(l){return jt.basename(l).indexOf(".ai.json")>-1}),o.length>0){var s=o[0],a=jt.join(t,s);Pe.readFile(a,function(l,c){l?e._onErrorHelper(l):Pe.unlink(a,function(u){u?e._onErrorHelper(u):e.send(c)})})}})})},r.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},r.TAG="Sender",r.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",r.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",r.ACLED_DIRECTORIES={},r.ACL_IDENTITY=null,r.WAIT_BETWEEN_RESEND=60*1e3,r.MAX_BYTES_ON_DISK=50*1e3*1e3,r.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,r.TEMPDIR_PREFIX="appInsights-node",r.OS_PROVIDES_FILE_PROTECTION=!1,r.USE_ICACLS=ca.type()==="Windows_NT",r}();By.exports=cR});var Wy=f((VF,Xy)=>{"use strict";var G=ht(),Mt=kt(),lR=Rn(),fR=function(){function r(){}return r.createEnvelope=function(e,t,n,i,o){var s=null;switch(t){case G.TelemetryType.Trace:s=r.createTraceData(e);break;case G.TelemetryType.Dependency:s=r.createDependencyData(e);break;case G.TelemetryType.Event:s=r.createEventData(e);break;case G.TelemetryType.Exception:s=r.createExceptionData(e);break;case G.TelemetryType.Request:s=r.createRequestData(e);break;case G.TelemetryType.Metric:s=r.createMetricData(e);break}if(n&&G.domainSupportsProperties(s.baseData)){if(s&&s.baseData)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);s.baseData.properties=Mt.validateStringMap(s.baseData.properties)}var l=o&&o.instrumentationKey||"",c=new G.Envelope;return c.data=s,c.iKey=l,c.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),c.tags=this.getTags(i,e.tagOverrides),c.time=new Date().toISOString(),c.ver=1,c.sampleRate=o?o.samplingPercentage:100,t===G.TelemetryType.Metric&&(c.sampleRate=100),c},r.createTraceData=function(e){var t=new G.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=G.SeverityLevel.Information:t.severityLevel=e.severity;var n=new G.Data;return n.baseType=G.telemetryTypeToBaseType(G.TelemetryType.Trace),n.baseData=t,n},r.createDependencyData=function(e){var t=new G.RemoteDependencyData;t.name=e.name,t.data=e.data,t.target=e.target,t.duration=Mt.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=Mt.w3cTraceId();var n=new G.Data;return n.baseType=G.telemetryTypeToBaseType(G.TelemetryType.Dependency),n.baseData=t,n},r.createEventData=function(e){var t=new G.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new G.Data;return n.baseType=G.telemetryTypeToBaseType(G.TelemetryType.Event),n.baseData=t,n},r.createExceptionData=function(e){var t=new G.ExceptionData;t.properties=e.properties,t.severityLevel=G.SeverityLevel.Error,t.measurements=e.measurements,t.exceptions=[];var n=e.exception.stack,i=new G.ExceptionDetails;i.message=e.exception.message,i.typeName=e.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=Mt.isArray(i.parsedStack)&&i.parsedStack.length>0,t.exceptions.push(i);var o=new G.Data;return o.baseType=G.telemetryTypeToBaseType(G.TelemetryType.Exception),o.baseData=t,o},r.createRequestData=function(e){var t=new G.RequestData;e.id?t.id=e.id:t.id=Mt.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=Mt.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var n=new G.Data;return n.baseType=G.telemetryTypeToBaseType(G.TelemetryType.Request),n.baseData=t,n},r.createMetricData=function(e){var t=new G.MetricData;t.metrics=[];var n=new G.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=G.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var i=new G.Data;return i.baseType=G.telemetryTypeToBaseType(G.TelemetryType.Metric),i.baseData=t,i},r.getTags=function(e,t){var n=lR.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var o in e.tags)i[o]=e.tags[o];if(t)for(var o in t)i[o]=t[o];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},r.parseStack=function(e){var t=void 0;if(typeof e=="string"){var n=e.split(`
`);t=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(zy.regex.test(a)){var l=new zy(n[s],i++);o+=l.sizeInBytes,t.push(l)}}var c=32*1024;if(o>c)for(var u=0,d=t.length-1,m=0,E=u,I=d;u<d;){var F=t[u].sizeInBytes,M=t[d].sizeInBytes;if(m+=F+M,m>c){var K=I-E+1;t.splice(E,K);break}E=u,I=d,u++,d--}}return t},r}(),zy=function(){function r(e,t){this.sizeInBytes=0,this.level=t,this.method="<no_method>",this.assembly=Mt.trim(e);var n=e.match(r.regex);n&&n.length>=5&&(this.method=Mt.trim(n[2])||this.method,this.fileName=Mt.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=r.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return r.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,r.baseSize=58,r}();Xy.exports=fR});var Ky=f((zF,Zy)=>{"use strict";var dR=require("url"),hR=Ry(),pR=Fy(),Lr=ht(),vR=jy(),gR=Gy(),$y=Rn(),_R=Vy(),mR=kt(),Yy=Be(),yR=Wy(),bR=function(){function r(e){this._telemetryProcessors=[];var t=new hR(e);this.config=t,this.context=new pR,this.commonProperties={};var n=new _R(this.config);this.channel=new vR(function(){return t.disableAppInsights},function(){return t.maxBatchSize},function(){return t.maxBatchIntervalMs},n)}return r.prototype.trackTrace=function(e){this.track(e,Lr.TelemetryType.Trace)},r.prototype.trackMetric=function(e){this.track(e,Lr.TelemetryType.Metric)},r.prototype.trackException=function(e){e&&e.exception&&!mR.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,Lr.TelemetryType.Exception)},r.prototype.trackEvent=function(e){this.track(e,Lr.TelemetryType.Event)},r.prototype.trackRequest=function(e){this.track(e,Lr.TelemetryType.Request)},r.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=dR.parse(e.data).host),this.track(e,Lr.TelemetryType.Dependency)},r.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},r.prototype.track=function(e,t){if(e&&Lr.telemetryTypeToBaseType(t)){var n=yR.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&gR.samplingTelemetryProcessor(n,{correlationContext:$y.CorrelationContextManager.getCurrentContext()}),i&&this.channel.send(n)}else Yy.warn("track() requires telemetry object and telemetryType to be specified.")},r.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},r.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},r.prototype.runTelemetryProcessors=function(e,t){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;t=t||{},t.correlationContext=$y.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[e,t])===!1){n=!1;break}}catch(a){n=!0,Yy.warn("One of telemetry processors failed, telemetry item will be sent.",a,e)}return n},r}();Zy.exports=bR});var eb=f((zl,Qy)=>{"use strict";var ER=zl&&zl.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),CR=Ky(),Jy=Bl(),SR=oa(),la=Be(),wR=function(r){ER(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(t){t&&t.request&&t.response&&t.duration?Jy.trackRequestSync(this,t):la.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(t){(t.duration||t.error)&&la.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),t&&t.request&&t.response?Jy.trackRequest(this,t):la.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(t){t&&t.request?SR.trackRequest(this,t):la.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(CR);Qy.exports=wR});var db=f(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});var tb=Rn(),OR=ty(),TR=ny(),xR=Dl(),IR=oa(),AR=Bl(),fa=Be();re.TelemetryClient=eb();re.Contracts=ht();var rb=!0,nb=!1,ib=!0,ob=!0,sb=!0,ab=!0,ub=!0,Xl=!0,cb=void 0,lb=void 0,Yi,Zi,Ki,jr,Ji,sr=!1;function RR(r){return re.defaultClient?fa.info("The default client is already setup"):(re.defaultClient=new re.TelemetryClient(r),Yi=new OR(re.defaultClient),Zi=new TR(re.defaultClient),Ki=new xR(re.defaultClient),jr=new AR(re.defaultClient),Ji=new IR(re.defaultClient)),re.defaultClient&&re.defaultClient.channel&&re.defaultClient.channel.setUseDiskRetryCaching(ub,cb,lb),Wl}re.setup=RR;function fb(){return re.defaultClient?(sr=!0,Yi.enable(rb,nb),Zi.enable(ib),Ki.enable(ob),jr.useAutoCorrelation(Xl),jr.enable(sb),Ji.enable(ab)):fa.warn("Start cannot be called before setup"),Wl}re.start=fb;function PR(){return Xl?tb.CorrelationContextManager.getCurrentContext():null}re.getCorrelationContext=PR;function DR(r){return tb.CorrelationContextManager.wrapCallback(r)}re.wrapWithCorrelationContext=DR;var Wl=function(){function r(){}return r.setAutoCollectConsole=function(e,t){return t===void 0&&(t=!1),rb=e,nb=t,sr&&Yi.enable(e,t),r},r.setAutoCollectExceptions=function(e){return ib=e,sr&&Zi.enable(e),r},r.setAutoCollectPerformance=function(e){return ob=e,sr&&Ki.enable(e),r},r.setAutoCollectRequests=function(e){return sb=e,sr&&jr.enable(e),r},r.setAutoCollectDependencies=function(e){return ab=e,sr&&Ji.enable(e),r},r.setAutoDependencyCorrelation=function(e){return Xl=e,sr&&jr.useAutoCorrelation(e),r},r.setUseDiskRetryCaching=function(e,t,n){return ub=e,cb=t,lb=n,re.defaultClient&&re.defaultClient.channel&&re.defaultClient.channel.setUseDiskRetryCaching(e,t,n),r},r.setInternalLogging=function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!0),fa.enableDebug=e,fa.disableWarnings=!t,r},r.start=fb,r}();re.Configuration=Wl;function qR(){re.defaultClient=null,sr=!1,Yi&&Yi.dispose(),Zi&&Zi.dispose(),Ki&&Ki.dispose(),jr&&jr.dispose(),Ji&&Ji.dispose()}re.dispose=qR});var $l=f(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.TelemetryReporter=void 0;var da=db(),NR=require("fs"),ha=require("os"),FR=require("path"),ze=require("vscode"),Ut=class extends ze.Disposable{constructor(e,t,n,i){super(()=>this.toDispose.forEach(s=>s&&s.dispose())),this.extensionId=e,this.extensionVersion=t,this.userOptIn=!1,this.toDispose=[],this.uniqueUserMetrics=!1;let o=process.env.VSCODE_LOGS||"";o&&e&&process.env.VSCODE_LOG_LEVEL==="trace"&&(o=FR.join(o,`${e}.txt`),this.logStream=NR.createWriteStream(o,{flags:"a",encoding:"utf8",autoClose:!0})),i&&(this.uniqueUserMetrics=!0),this.updateUserOptIn(n),this.toDispose.push(ze.workspace.onDidChangeConfiguration(()=>this.updateUserOptIn(n)))}updateUserOptIn(e){let t=ze.workspace.getConfiguration(Ut.TELEMETRY_CONFIG_ID);this.userOptIn!==t.get(Ut.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=t.get(Ut.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(e):this.dispose())}createAppInsightsClient(e){da.defaultClient?(this.appInsightsClient=new da.TelemetryClient(e),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(da.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=da.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),this.uniqueUserMetrics&&ze.env&&(this.appInsightsClient.context.tags["ai.user.id"]=ze.env.machineId,this.appInsightsClient.context.tags["ai.session.id"]=ze.env.sessionId,this.appInsightsClient.context.tags["ai.cloud.roleInstance"]="DEPRECATED"),e&&e.indexOf("AIF-")===0&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}getCommonProperties(){let e=Object.create(null);e["common.os"]=ha.platform(),e["common.platformversion"]=(ha.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3");let t=ha.cpus();return t&&t.length>0&&(e["common.cpus"]=`${t[0].model}(${t.length} x ${t[0].speed})`),e["common.systemmemory"]=`${(ha.totalmem()/(1024*1024*1024)).toFixed(2)} GB`,e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,ze.env&&(e["common.vscodemachineid"]=ze.env.machineId,e["common.vscodesessionid"]=ze.env.sessionId,e["common.vscodeversion"]=ze.version,ze.env.uiKind&&(e["common.vscodeuikind"]=ze.UIKind[ze.env.uiKind])),e}sendTelemetryEvent(e,t,n){this.userOptIn&&e&&this.appInsightsClient&&(this.appInsightsClient.trackEvent({name:`${this.extensionId}/${e}`,properties:t,measurements:n}),this.logStream&&this.logStream.write(`telemetry/${e} ${JSON.stringify({properties:t,measurements:n})}
`))}sendExceptionEvent(e,t,n){if(this.userOptIn&&t&&this.appInsightsClient){let i=new Error;i.name=`${this.extensionId}/${e}`,i.message=t,i.stack="DEPRECATED",this.appInsightsClient.trackException({exception:i,measurements:n}),this.logStream&&this.logStream.write(`telemetry/${e} ${JSON.stringify({measurements:n})}
`)}}dispose(){let e=new Promise(n=>{if(!this.logStream)return n(void 0);this.logStream.on("finish",n),this.logStream.end()}),t=new Promise(n=>{this.appInsightsClient?this.appInsightsClient.flush({callback:()=>{this.appInsightsClient=void 0,n(void 0)}}):n(void 0)});return Promise.all([t,e])}};pa.TelemetryReporter=Ut;Ut.TELEMETRY_CONFIG_ID="telemetry";Ut.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry"});var Zl=f(ur=>{"use strict";var va=ur&&ur.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.TelemetryService=ur.TelemetryBuilder=void 0;var kR=require("util"),Qi=require("vscode"),LR=Ei(),hb=l_(),jR=$l(),Yl=class{addProperty(e,t){this.properties=this.properties||{},this.properties[e]=t}addMeasurement(e,t){this.measurements=this.measurements||{},this.measurements[e]=t}build(){return{properties:this.properties,measurements:this.measurements}}};ur.TelemetryBuilder=Yl;var ar=class{constructor(){this.aiKey="",this.version="",this.cliAllowsTelemetryPromise=void 0,this.extensionName="unknown"}static getInstance(){return ar.instance||(ar.instance=new ar),ar.instance}initializeService(e,t,n,i){return va(this,void 0,void 0,function*(){this.extensionContext=e,this.extensionName=t,this.aiKey=n,this.version=i,this.checkCliTelemetry().then(a=>va(this,void 0,void 0,function*(){this.setCliTelemetryEnabled(this.isTelemetryExtensionConfigurationEnabled()&&a)})).catch(a=>{console.log("Error initializing telemetry service: "+a)});let o=Qi.env?Qi.env.machineId:"someValue.machineId",s=e.extensionMode!==Qi.ExtensionMode.Production;this.reporter===void 0&&(yield this.isTelemetryEnabled())&&!s&&(this.reporter=new jR.TelemetryReporter("salesforcedx-vscode",this.version,this.aiKey,!0),this.extensionContext.subscriptions.push(this.reporter))})}getReporter(){return this.reporter}isTelemetryEnabled(){return va(this,void 0,void 0,function*(){return this.isTelemetryExtensionConfigurationEnabled()&&(yield this.checkCliTelemetry())})}checkCliTelemetry(){return va(this,void 0,void 0,function*(){return typeof this.cliAllowsTelemetryPromise!="undefined"?this.cliAllowsTelemetryPromise:(this.cliAllowsTelemetryPromise=(0,hb.isCLITelemetryAllowed)(),yield this.cliAllowsTelemetryPromise)})}isTelemetryExtensionConfigurationEnabled(){return Qi.workspace.getConfiguration("telemetry").get("enableTelemetry",!0)&&Qi.workspace.getConfiguration(LR.SFDX_CORE_CONFIGURATION_NAME).get("telemetry.enabled",!0)}setCliTelemetryEnabled(e){e||(0,hb.disableCLITelemetry)()}sendExtensionActivationEvent(e){this.validateTelemetry(()=>{let t=this.getEndHRTime(e);this.reporter.sendTelemetryEvent("activationEvent",{extensionName:this.extensionName},{startupTime:t})})}sendExtensionDeactivationEvent(){this.validateTelemetry(()=>{this.reporter.sendTelemetryEvent("deactivationEvent",{extensionName:this.extensionName})})}sendCommandEvent(e,t,n,i){this.validateTelemetry(()=>{if(e){let o={extensionName:this.extensionName,commandName:e},s=Object.assign(o,n),a;(t||i)&&(a=Object.assign({},i),t&&(a.executionTime=this.getEndHRTime(t))),this.reporter.sendTelemetryEvent("commandExecution",s,a)}})}sendException(e,t){this.validateTelemetry(()=>{this.reporter.sendExceptionEvent(e,t)})}sendEventData(e,t,n){this.validateTelemetry(()=>{this.reporter.sendTelemetryEvent(e,t,n)})}dispose(){this.reporter!==void 0&&this.reporter.dispose().catch(e=>console.log(e))}getEndHRTime(e){let t=process.hrtime(e);return Number(kR.format("%d%d",t[0],t[1]/1e6))}validateTelemetry(e){this.reporter!==void 0&&this.isTelemetryEnabled().then(t=>t?e():void 0).catch(t=>console.error(t))}};ur.TelemetryService=ar});var vb=f(Yn=>{"use strict";var pb=Yn&&Yn.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.AuthUtil=void 0;var MR=require("@salesforce/core"),UR=mn(),HR=Zl(),cr=class{static getInstance(){return cr.instance===void 0&&(cr.instance=new cr),cr.instance}getDefaultUsernameOrAlias(e){return pb(this,void 0,void 0,function*(){try{let t=yield UR.ConfigUtil.getDefaultUsernameOrAlias();return t===void 0?void 0:JSON.stringify(t).replace(/\"/g,"")}catch(t){console.error(t),t instanceof Error&&HR.TelemetryService.getInstance().sendException("get_default_username_alias",t.message);return}})}getUsername(e){return pb(this,void 0,void 0,function*(){return(yield MR.StateAggregator.getInstance()).aliases.getUsername(e)||e})}};Yn.AuthUtil=cr});var _b=f((ZF,gb)=>{"use strict";gb.exports=r=>{r=Object.assign({onlyFirst:!1},r);let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,r.onlyFirst?void 0:"g")}});var yb=f((KF,Kl)=>{"use strict";var GR=_b(),mb=r=>typeof r=="string"?r.replace(GR(),""):r;Kl.exports=mb;Kl.exports.default=mb});var Eb=f(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.SfdxSettingsService=void 0;var BR=require("vscode"),bb=Ei(),Jl=class{static getEnableClearOutputBeforeEachCommand(){return BR.workspace.getConfiguration(bb.SFDX_CORE_CONFIGURATION_NAME).get(bb.SETTING_CLEAR_OUTPUT_TAB,!1)}};ga.SfdxSettingsService=Jl});var Ql=f(Mr=>{"use strict";var VR=Mr&&Mr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zR=Mr&&Mr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&VR(e,r,t)};Object.defineProperty(Mr,"__esModule",{value:!0});zR(Eb(),Mr)});var ef=f(_a=>{"use strict";Object.defineProperty(_a,"__esModule",{value:!0});_a.ChannelService=void 0;var Cb=yb(),XR=require("vscode"),Zn=nr(),WR=Ql(),Ht=class{constructor(e){this.channel=e}static getInstance(e){if(!Ht.instances[e]){let t=XR.window.createOutputChannel(e);Ht.instances[e]=new Ht(t)}return Ht.instances[e]}streamCommandOutput(e){this.streamCommandStartStop(e),e.stderrSubject.subscribe(t=>this.channel.append((0,Cb.default)(t.toString()))),e.stdoutSubject.subscribe(t=>this.channel.append((0,Cb.default)(t.toString())))}streamCommandStartStop(e){WR.SfdxSettingsService.getEnableClearOutputBeforeEachCommand()&&this.clear(),this.channel.append(Zn.nls.localize("channel_starting_message")),this.channel.appendLine(e.command.toString()),this.channel.appendLine(""),this.showCommandWithTimestamp(e.command.toCommand()),e.processExitSubject.subscribe(t=>{this.showCommandWithTimestamp(e.command.toCommand()),this.channel.append(" "),t!=null?this.channel.appendLine(Zn.nls.localize("channel_end_with_exit_code",t.toString())):this.channel.appendLine(Zn.nls.localize("channel_end")),this.channel.appendLine("")}),e.processErrorSubject.subscribe(t=>{this.showCommandWithTimestamp(e.command.toCommand()),this.channel.append(" "),t!==void 0?/sfdx.*ENOENT/.test(t.message)?this.channel.appendLine(Zn.nls.localize("channel_end_with_sfdx_not_found")):this.channel.appendLine(Zn.nls.localize("channel_end_with_error",t.message)):this.channel.appendLine(Zn.nls.localize("channel_end")),this.channel.appendLine("")})}showCommandWithTimestamp(e){this.channel.appendLine(this.getExecutionTime()+" "+e)}getExecutionTime(){let e=new Date,t=this.ensureDoubleDigits(e.getHours()),n=this.ensureDoubleDigits(e.getMinutes()),i=this.ensureDoubleDigits(e.getSeconds()),o=e.getMilliseconds();return`${t}:${n}:${i}.${o}`}ensureDoubleDigits(e){return e<10?`0${e.toString()}`:e.toString()}showChannelOutput(){this.channel.show(!0)}appendLine(e){this.channel.appendLine(e)}clear(){this.channel.clear()}};_a.ChannelService=Ht;Ht.instances={}});var Sb=f(Gt=>{"use strict";var tf=Gt&&Gt.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.NotificationService=Gt.STATUS_BAR_MSG_TIMEOUT_MS=void 0;var Kn=require("vscode"),$R=Ei(),Jn=nr();Gt.STATUS_BAR_MSG_TIMEOUT_MS=5e3;var lr=class{static getInstance(){return lr.instance||(lr.instance=new lr),lr.instance}showErrorMessage(e,...t){return Kn.window.showErrorMessage(e,...t)}showInformationMessage(e,...t){return Kn.window.showInformationMessage(e,...t)}showWarningMessage(e,...t){return Kn.window.showWarningMessage(e,...t)}showWarningModal(e,...t){return Kn.window.showWarningMessage(e,{modal:!0},...t)}reportCommandExecutionStatus(e,t,n){this.reportExecutionStatus(e.command.toString(),t,e.processExitSubject,n),this.reportExecutionError(e.command.toString(),e.processErrorSubject)}reportExecutionStatus(e,t,n,i){n.subscribe(o=>tf(this,void 0,void 0,function*(){o!==void 0&&String(o)==="0"?yield this.showSuccessfulExecution(e,t):o!==null&&this.showFailedExecution(e)})),i&&i.onCancellationRequested(()=>{this.showCanceledExecution(e)})}showFailedExecution(e){this.showErrorMessage(Jn.nls.localize("notification_unsuccessful_execution_text",e))}showCanceledExecution(e){this.showWarningMessage(Jn.nls.localize("notification_canceled_execution_text",e))}showSuccessfulExecution(e,t){return tf(this,void 0,void 0,function*(){let n=Jn.nls.localize("notification_successful_execution_text",e),i=Kn.workspace.getConfiguration($R.SFDX_CORE_CONFIGURATION_NAME);if(i.get("show-cli-success-msg",!0)){let s=Jn.nls.localize("notification_show_button_text"),a=Jn.nls.localize("notification_show_in_status_bar_button_text"),l=yield this.showInformationMessage(n,s,a);l&&(l===s&&t?t.showChannelOutput():l===a&&(yield i.update("show-cli-success-msg",!1)))}else Kn.window.setStatusBarMessage(n,Gt.STATUS_BAR_MSG_TIMEOUT_MS)})}reportExecutionError(e,t){t.subscribe(n=>tf(this,void 0,void 0,function*(){this.showErrorMessage(Jn.nls.localize("notification_unsuccessful_execution_text",e))}))}};Gt.NotificationService=lr});var Ob=f(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.ProgressNotification=void 0;var wb=require("vscode"),YR=nr(),rf=class{static show(e,t,n,i){return wb.window.withProgress({title:YR.nls.localize("progress_notification_text",e.command),location:n||wb.ProgressLocation.Notification,cancellable:!0},(o,s)=>new Promise(a=>{s.onCancellationRequested(()=>(t.cancel(),a(void 0))),e.processExitSubject.subscribe(l=>a(void 0)),e.processErrorSubject.subscribe(l=>a(void 0)),i&&i.subscribe({next(l){o.report({increment:l})},complete(){o.report({increment:100}),a(void 0)}})}))}};ma.ProgressNotification=rf});var eo=f(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.ProgressNotification=bt.NotificationService=bt.notificationService=bt.ChannelService=void 0;var ZR=ef();Object.defineProperty(bt,"ChannelService",{enumerable:!0,get:function(){return ZR.ChannelService}});var Tb=Sb();Object.defineProperty(bt,"NotificationService",{enumerable:!0,get:function(){return Tb.NotificationService}});bt.notificationService=Tb.NotificationService.getInstance();var KR=Ob();Object.defineProperty(bt,"ProgressNotification",{enumerable:!0,get:function(){return KR.ProgressNotification}})});var Ib=f(fr=>{"use strict";var xb=fr&&fr.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(fr,"__esModule",{value:!0});fr.EmptyParametersGatherer=fr.CompositeParametersGatherer=void 0;var nf=class{constructor(...e){this.gatherers=e}gather(){return xb(this,void 0,void 0,function*(){let e={};for(let t of this.gatherers){let n=yield t.gather();if(n.type==="CONTINUE")Object.keys(n.data).map(i=>e[i]=n.data[i]);else return{type:"CANCEL"}}return{type:"CONTINUE",data:e}})}};fr.CompositeParametersGatherer=nf;var of=class{gather(){return xb(this,void 0,void 0,function*(){return{type:"CONTINUE",data:{}}})}};fr.EmptyParametersGatherer=of});var af=f(Qn=>{"use strict";var JR=Qn&&Qn.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.EmptyPostChecker=void 0;var sf=class{check(e){return JR(this,void 0,void 0,function*(){return e})}};Qn.EmptyPostChecker=sf});var uf=f(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.PredicateResponse=void 0;var Ur=class{constructor(e,t){this.result=e,this.message=t}static of(e,t){return new Ur(e,t)}static true(){return new Ur(!0,"")}static false(){return new Ur(!1,"GENERAL ERROR")}};ya.PredicateResponse=Ur});var Ab=f(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.SFDX_CONFIG_ISV_DEBUGGER_URL=ce.SFDX_CONFIG_ISV_DEBUGGER_SID=ce.ENV_SFDX_INSTANCE_URL=ce.ENV_SFDX_DEFAULTUSERNAME=ce.SFDX_FOLDER=ce.SFDX_CONFIG_FILE=ce.SFDX_PROJECT_FILE=ce.DEFAULT_USERNAME_KEY=ce.DEFAULT_CONNECTION_TIMEOUT_MS=ce.CLIENT_ID=void 0;ce.CLIENT_ID="sfdx-vscode";ce.DEFAULT_CONNECTION_TIMEOUT_MS=2e4;ce.DEFAULT_USERNAME_KEY="defaultusername";ce.SFDX_PROJECT_FILE="sfdx-project.json";ce.SFDX_CONFIG_FILE="sfdx-config.json";ce.SFDX_FOLDER=".sfdx";ce.ENV_SFDX_DEFAULTUSERNAME="SFDX_DEFAULTUSERNAME";ce.ENV_SFDX_INSTANCE_URL="SFDX_INSTANCE_URL";ce.SFDX_CONFIG_ISV_DEBUGGER_SID="isvDebuggerSid";ce.SFDX_CONFIG_ISV_DEBUGGER_URL="isvDebuggerUrl"});var ba=f(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.CLIENT_ID=le.DEFAULT_CONNECTION_TIMEOUT_MS=le.DEFAULT_USERNAME_KEY=le.SFDX_CONFIG_ISV_DEBUGGER_URL=le.SFDX_CONFIG_ISV_DEBUGGER_SID=le.ENV_SFDX_INSTANCE_URL=le.ENV_SFDX_DEFAULTUSERNAME=le.SFDX_PROJECT_FILE=le.SFDX_FOLDER=le.SFDX_CONFIG_FILE=void 0;var Et=Ab();Object.defineProperty(le,"SFDX_CONFIG_FILE",{enumerable:!0,get:function(){return Et.SFDX_CONFIG_FILE}});Object.defineProperty(le,"SFDX_FOLDER",{enumerable:!0,get:function(){return Et.SFDX_FOLDER}});Object.defineProperty(le,"SFDX_PROJECT_FILE",{enumerable:!0,get:function(){return Et.SFDX_PROJECT_FILE}});Object.defineProperty(le,"ENV_SFDX_DEFAULTUSERNAME",{enumerable:!0,get:function(){return Et.ENV_SFDX_DEFAULTUSERNAME}});Object.defineProperty(le,"ENV_SFDX_INSTANCE_URL",{enumerable:!0,get:function(){return Et.ENV_SFDX_INSTANCE_URL}});Object.defineProperty(le,"SFDX_CONFIG_ISV_DEBUGGER_SID",{enumerable:!0,get:function(){return Et.SFDX_CONFIG_ISV_DEBUGGER_SID}});Object.defineProperty(le,"SFDX_CONFIG_ISV_DEBUGGER_URL",{enumerable:!0,get:function(){return Et.SFDX_CONFIG_ISV_DEBUGGER_URL}});Object.defineProperty(le,"DEFAULT_USERNAME_KEY",{enumerable:!0,get:function(){return Et.DEFAULT_USERNAME_KEY}});Object.defineProperty(le,"DEFAULT_CONNECTION_TIMEOUT_MS",{enumerable:!0,get:function(){return Et.DEFAULT_CONNECTION_TIMEOUT_MS}});Object.defineProperty(le,"CLIENT_ID",{enumerable:!0,get:function(){return Et.CLIENT_ID}})});var Db=f(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.EmptyPreChecker=pt.SfdxWorkspaceChecker=pt.isSfdxProjectOpened=pt.IsSfdxProjectOpened=void 0;var QR=require("fs"),eP=require("path"),tP=require("vscode"),Rb=nr(),cf=uf(),rP=ba(),Pb=Cn(),nP=eo(),Ea=class{apply(e){return(0,Pb.hasRootWorkspace)()?QR.existsSync(eP.join((0,Pb.getRootWorkspacePath)(),rP.SFDX_PROJECT_FILE))?cf.PredicateResponse.true():cf.PredicateResponse.of(!1,Rb.nls.localize("predicates_no_sfdx_project_found_text")):cf.PredicateResponse.of(!1,Rb.nls.localize("predicates_no_folder_opened_text"))}};pt.IsSfdxProjectOpened=Ea;pt.isSfdxProjectOpened=new Ea;var lf=class{check(){let e=pt.isSfdxProjectOpened.apply(tP.workspace);return e.result?!0:(nP.notificationService.showErrorMessage(e.message),!1)}};pt.SfdxWorkspaceChecker=lf;var ff=class{check(){return!0}};pt.EmptyPreChecker=ff});var Nb=f(dr=>{"use strict";var iP=dr&&dr.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(dr,"__esModule",{value:!0});dr.LibraryCommandletExecutor=dr.SfdxCommandletExecutor=void 0;var Ca=require("vscode"),oP=ks(),hf=mn(),df=nr(),sP=Ql(),aP=Cn(),qb=ef(),ei=eo(),pf=class{constructor(e){this.showChannelOutput=!0,this.executionCwd=(0,aP.getRootWorkspacePath)(),this.onDidFinishExecutionEventEmitter=new Ca.EventEmitter,this.onDidFinishExecution=this.onDidFinishExecutionEventEmitter.event,this.outputChannel=e}attachExecution(e,t,n){let i;this.outputChannel&&(i=new qb.ChannelService(this.outputChannel),i.streamCommandOutput(e),this.showChannelOutput&&i.showChannelOutput()),ei.notificationService.reportCommandExecutionStatus(e,i,n),ei.ProgressNotification.show(e,t)}logMetric(e,t,n,i){hf.TelemetryService.getInstance().sendCommandEvent(e,t,n,i)}execute(e){let t=process.hrtime(),n=new Ca.CancellationTokenSource,i=n.token,o=new oP.CliCommandExecutor(this.build(e.data),{cwd:this.executionCwd,env:{SFDX_JSON_TO_STDOUT:"true"}}).execute(i),s="";o.stdoutSubject.subscribe(a=>{s+=a.toString()}),o.processExitSubject.subscribe(a=>{let l=this.getTelemetryData(a===0,e,s),c,u;l&&(c=l.properties,u=l.measurements),this.logMetric(o.command.logName,t,c,u),this.onDidFinishExecutionEventEmitter.fire(t)}),this.attachExecution(o,n,i)}getTelemetryData(e,t,n){}};dr.SfdxCommandletExecutor=pf;var vf=class{constructor(e,t,n){this.cancellable=!1,this.cancelled=!1,this.showChannelOutput=!0,this.telemetry=new hf.TelemetryBuilder,this.executionName=e,this.logName=t,this.outputChannel=n}execute(e){return iP(this,void 0,void 0,function*(){let t=process.hrtime(),n=new qb.ChannelService(this.outputChannel),i=hf.TelemetryService.getInstance();sP.SfdxSettingsService.getEnableClearOutputBeforeEachCommand()&&n.clear(),n.showCommandWithTimestamp(`${df.nls.localize("channel_starting_message")}${this.executionName}
`);try{let o=yield Ca.window.withProgress({title:df.nls.localize("progress_notification_text",this.executionName),location:Ca.ProgressLocation.Notification,cancellable:this.cancellable},(l,c)=>(c.onCancellationRequested(()=>{this.cancelled=!0,ei.notificationService.showCanceledExecution(this.executionName),i.sendCommandEvent(`${this.logName}_cancelled`,t,s,a)}),this.run(e,l,c)));n.showCommandWithTimestamp(`${df.nls.localize("channel_end")} ${this.executionName}`),this.showChannelOutput&&n.showChannelOutput(),this.cancelled||(o?ei.notificationService.showSuccessfulExecution(this.executionName,n).catch(l=>console.error(l)):ei.notificationService.showFailedExecution(this.executionName)),this.telemetry.addProperty("success",String(o));let{properties:s,measurements:a}=this.telemetry.build();i.sendCommandEvent(this.logName,t,s,a)}catch(o){o instanceof Error&&(i.sendException(o.name,o.message),ei.notificationService.showFailedExecution(this.executionName),n.appendLine(o.message)),n.showChannelOutput()}})}get telemetryData(){return this.telemetry.build()}};dr.LibraryCommandletExecutor=vf});var Fb=f(ti=>{"use strict";var uP=ti&&ti.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(ti,"__esModule",{value:!0});ti.SfdxCommandlet=void 0;var cP=eo(),lP=af(),gf=class{constructor(e,t,n,i=new lP.EmptyPostChecker){this.prechecker=e,this.gatherer=t,this.executor=n,this.postchecker=i,this.executor.onDidFinishExecution&&(this.onDidFinishExecution=this.executor.onDidFinishExecution)}run(){return uP(this,void 0,void 0,function*(){if(yield this.prechecker.check()){let e=yield this.gatherer.gather();switch(e=yield this.postchecker.check(e),e.type){case"CONTINUE":return this.executor.execute(e);case"CANCEL":e.msg&&cP.notificationService.showErrorMessage(e.msg);return}}})}};ti.SfdxCommandlet=gf});var Gb=f(ri=>{"use strict";var _f=ri&&ri.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(n.next(u))}catch(d){s(d)}}function l(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(ri,"__esModule",{value:!0});ri.WorkspaceContextUtil=void 0;var kb=require("@salesforce/core"),Lb=require("path"),jb=require("vscode"),Mb=mn(),fP=nr(),Ub=ba(),Hb=Cn(),to=class{constructor(){this.sessionConnections=new Map,this.onOrgChangeEmitter=new jb.EventEmitter,this.onOrgChange=this.onOrgChangeEmitter.event;let e=()=>this.handleCliConfigChange(),t=(0,Lb.join)((0,Hb.getRootWorkspacePath)(),Ub.SFDX_FOLDER,Ub.SFDX_CONFIG_FILE);this.cliConfigWatcher=jb.workspace.createFileSystemWatcher(t),this.cliConfigWatcher.onDidChange(e),this.cliConfigWatcher.onDidCreate(e),this.cliConfigWatcher.onDidDelete(e)}static getLogDirPath(){return(0,Lb.join)((0,Hb.getRootWorkspacePath)(),".sfdx","tools","debug","logs")}getAuthUtil(){return Mb.AuthUtil.getInstance()}initialize(e){return _f(this,void 0,void 0,function*(){e.subscriptions.push(this.cliConfigWatcher,this.onOrgChangeEmitter,this.cliConfigWatcher),yield this.handleCliConfigChange()})}static getInstance(e=!1){return(!this.instance||e)&&(this.instance=new to),this.instance}getConnection(){return _f(this,void 0,void 0,function*(){if(!this._username)throw new Error(fP.nls.localize("error_no_default_username"));let e=this.sessionConnections.get(this._username);return e||(e=yield kb.Connection.create({authInfo:yield kb.AuthInfo.create({username:this._username})}),this.sessionConnections.set(this._username,e)),e})}handleCliConfigChange(){return _f(this,void 0,void 0,function*(){yield Mb.ConfigAggregatorProvider.getInstance().reloadConfigAggregators();let e=yield this.getAuthUtil().getDefaultUsernameOrAlias(!1);e?(this._username=yield this.getAuthUtil().getUsername(e),this._alias=e!==this._username?e:void 0):(this._username=void 0,this._alias=void 0),this.onOrgChangeEmitter.fire({username:this._username,alias:this._alias})})}get username(){return this._username}get alias(){return this._alias}};ri.WorkspaceContextUtil=to});var Bb=f(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.optionMMddYYYY=ot.optionHHmm=ot.optionYYYYMMddHHmmss=ot.makeDoubleDigit=ot.getYYYYMMddHHmmssDateFormat=void 0;function dP(r){let e=ni(r.getMonth()+1),t=ni(r.getDate()),n=ni(r.getHours()),i=ni(r.getMinutes()),o=ni(r.getSeconds());return`${r.getFullYear()}${e}${t}${n}${i}${o}`}ot.getYYYYMMddHHmmssDateFormat=dP;function ni(r){return("0"+r).slice(-2)}ot.makeDoubleDigit=ni;ot.optionYYYYMMddHHmmss={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"};ot.optionHHmm={hour:"2-digit",minute:"2-digit"};ot.optionMMddYYYY={month:"2-digit",day:"2-digit",year:"numeric"}});var Vb=f(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.optionYYYYMMddHHmmss=st.optionMMddYYYY=st.optionHHmm=st.makeDoubleDigit=st.getYYYYMMddHHmmssDateFormat=void 0;var ro=Bb();Object.defineProperty(st,"getYYYYMMddHHmmssDateFormat",{enumerable:!0,get:function(){return ro.getYYYYMMddHHmmssDateFormat}});Object.defineProperty(st,"makeDoubleDigit",{enumerable:!0,get:function(){return ro.makeDoubleDigit}});Object.defineProperty(st,"optionHHmm",{enumerable:!0,get:function(){return ro.optionHHmm}});Object.defineProperty(st,"optionMMddYYYY",{enumerable:!0,get:function(){return ro.optionMMddYYYY}});Object.defineProperty(st,"optionYYYYMMddHHmmss",{enumerable:!0,get:function(){return ro.optionYYYYMMddHHmmss}})});var zb=f(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.Table=void 0;var hP="  ",Sa=" ",pP="\u2500",mf=class{createTable(e,t,n){if(!e)throw Error("rows cannot be undefined");if(!t)throw Error("columns cannot be undefined");let i=this.calculateMaxColumnWidths(e,t),o=n?`=== ${n}`:"",s="",a="";return t.forEach((l,c,u)=>{let d=i.get(l.key);if(d){let m=c===u.length-1;s+=this.fillColumn(l.label||l.key,d,Sa,m),a+=this.fillColumn("",d,pP,m)}}),s&&a&&(o+=`${n?`
`:""}${s}
${a}
`),e.forEach(l=>{let c="";t.forEach((u,d,m)=>{let E=l[u.key],I=d===m.length-1,F=c.length;E.split(`
`).forEach((M,K)=>{let ve=i.get(u.key);ve&&(K===0?c+=this.fillColumn(M,ve,Sa,I):c+=`
`+this.fillColumn("",F,Sa,I)+this.fillColumn(M,F,Sa,I))})}),o+=c+`
`}),o}calculateMaxColumnWidths(e,t){let n=new Map;return t.forEach(i=>{e.forEach(o=>{let s=o[i.key];if(s===void 0)throw Error(`Row is missing the key ${i.key}`);let a=n.get(i.key);a===void 0&&(a=(i.label||i.key).length,n.set(i.key,a));let l=s.split(`
`).reduce((c,u)=>u.length>c.length?u:c).length;l>a&&n.set(i.key,l)})}),n}fillColumn(e,t,n,i){let o=e;for(let s=0;s<t-e.length;s++)o+=n;return i||(o+=hP),o}};wa.Table=mf});var Xb=f(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.Table=void 0;var vP=zb();Object.defineProperty(Oa,"Table",{enumerable:!0,get:function(){return vP.Table}})});var mn=f(q=>{"use strict";var gP=q&&q.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Ct=q&&q.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&gP(e,r,t)};Object.defineProperty(q,"__esModule",{value:!0});q.workspaceUtils=q.getRootWorkspacePath=q.getRootWorkspace=q.hasRootWorkspace=q.TelemetryReporter=q.TraceFlags=q.TelemetryBuilder=q.TelemetryService=q.WorkspaceContextUtil=q.SFDX_CORE_EXTENSION_NAME=q.SFDX_CORE_CONFIGURATION_NAME=q.SETTING_CLEAR_OUTPUT_TAB=q.ConfigUtil=q.ConfigSource=q.SfdxCommandlet=q.LibraryCommandletExecutor=q.SfdxCommandletExecutor=q.SfdxWorkspaceChecker=q.EmptyPreChecker=q.EmptyPostChecker=q.EmptyParametersGatherer=q.CompositeParametersGatherer=q.AuthUtil=void 0;var _P=vb();Object.defineProperty(q,"AuthUtil",{enumerable:!0,get:function(){return _P.AuthUtil}});Ct(eo(),q);var Wb=Ib();Object.defineProperty(q,"CompositeParametersGatherer",{enumerable:!0,get:function(){return Wb.CompositeParametersGatherer}});Object.defineProperty(q,"EmptyParametersGatherer",{enumerable:!0,get:function(){return Wb.EmptyParametersGatherer}});var mP=af();Object.defineProperty(q,"EmptyPostChecker",{enumerable:!0,get:function(){return mP.EmptyPostChecker}});var $b=Db();Object.defineProperty(q,"EmptyPreChecker",{enumerable:!0,get:function(){return $b.EmptyPreChecker}});Object.defineProperty(q,"SfdxWorkspaceChecker",{enumerable:!0,get:function(){return $b.SfdxWorkspaceChecker}});var Yb=Nb();Object.defineProperty(q,"SfdxCommandletExecutor",{enumerable:!0,get:function(){return Yb.SfdxCommandletExecutor}});Object.defineProperty(q,"LibraryCommandletExecutor",{enumerable:!0,get:function(){return Yb.LibraryCommandletExecutor}});var yP=Fb();Object.defineProperty(q,"SfdxCommandlet",{enumerable:!0,get:function(){return yP.SfdxCommandlet}});var Zb=jc();Object.defineProperty(q,"ConfigSource",{enumerable:!0,get:function(){return Zb.ConfigSource}});Object.defineProperty(q,"ConfigUtil",{enumerable:!0,get:function(){return Zb.ConfigUtil}});var yf=Ei();Object.defineProperty(q,"SETTING_CLEAR_OUTPUT_TAB",{enumerable:!0,get:function(){return yf.SETTING_CLEAR_OUTPUT_TAB}});Object.defineProperty(q,"SFDX_CORE_CONFIGURATION_NAME",{enumerable:!0,get:function(){return yf.SFDX_CORE_CONFIGURATION_NAME}});Object.defineProperty(q,"SFDX_CORE_EXTENSION_NAME",{enumerable:!0,get:function(){return yf.SFDX_CORE_EXTENSION_NAME}});var bP=Gb();Object.defineProperty(q,"WorkspaceContextUtil",{enumerable:!0,get:function(){return bP.WorkspaceContextUtil}});var Kb=Zl();Object.defineProperty(q,"TelemetryService",{enumerable:!0,get:function(){return Kb.TelemetryService}});Object.defineProperty(q,"TelemetryBuilder",{enumerable:!0,get:function(){return Kb.TelemetryBuilder}});Ct(bn(),q);var EP=xc();Object.defineProperty(q,"TraceFlags",{enumerable:!0,get:function(){return EP.TraceFlags}});var CP=$l();Object.defineProperty(q,"TelemetryReporter",{enumerable:!0,get:function(){return CP.TelemetryReporter}});var Ta=Cn();Object.defineProperty(q,"hasRootWorkspace",{enumerable:!0,get:function(){return Ta.hasRootWorkspace}});Object.defineProperty(q,"getRootWorkspace",{enumerable:!0,get:function(){return Ta.getRootWorkspace}});Object.defineProperty(q,"getRootWorkspacePath",{enumerable:!0,get:function(){return Ta.getRootWorkspacePath}});Object.defineProperty(q,"workspaceUtils",{enumerable:!0,get:function(){return Ta.workspaceUtils}});Ct(ks(),q);Ct(xi(),q);Ct(wc(),q);Ct(ba(),q);Ct(Vb(),q);Ct(Xb(),q);Ct(uf(),q);Ct(Lc(),q)});var RP={};vE(RP,{activate:()=>IP,deactivate:()=>AP,getDebuggerType:()=>rE,getExceptionBreakpointCache:()=>TP,mergeExceptionBreakpointInfos:()=>nE,updateExceptionBreakpointCache:()=>iE});module.exports=gE(RP);var ne=It(La()),ee=It(require("vscode"));var sn=It(La()),xr=It(require("vscode"));var lt=It(es());var Lp={config_name_text:"Launch Apex Debugger",select_exception_text:"Select an exception",select_break_option_text:"Select break option",always_break_text:"Always break",never_break_text:"Never break",language_client_not_ready:"Unable to retrieve breakpoint info from language server, language server is not ready",isv_debug_config_environment_error:"Salesforce Extensions for VS Code encountered a problem while configuring your environment. Some features might not work. For details, click Help > Toggle Developer Tools or check the Salesforce CLI logs in ~/.sfdx/sfdx.log."};var jp={config_name_text:"Apex \u30C7\u30D0\u30C3\u30AC\u3092\u8D77\u52D5",select_exception_text:"\u4F8B\u5916\u3092\u9078\u629E",select_break_option_text:"\u4E2D\u65AD\u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u9078\u629E",always_break_text:"\u5E38\u306B\u4E2D\u65AD",never_break_text:"\u4E2D\u65AD\u3057\u306A\u3044",language_client_not_ready:"\u8A00\u8A9E\u30B5\u30FC\u30D0\u304B\u3089\u30D6\u30EC\u30FC\u30AF\u30DD\u30A4\u30F3\u30C8\u306E\u60C5\u5831\u3092\u53D6\u5F97\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002\u8A00\u8A9E\u30B5\u30FC\u30D0\u304C\u8D77\u52D5\u3057\u3066\u3044\u307E\u305B\u3093\u3002",isv_debug_config_environment_error:"\u74B0\u5883\u3092\u8A2D\u5B9A\u3057\u3066\u3044\u308B\u969B\u306B VS Code \u306E Salesforce \u62E1\u5F35\u6A5F\u80FD\u3067\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u4E00\u90E8\u306E\u6A5F\u80FD\u304C\u52D5\u4F5C\u3057\u306A\u3044\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001[\u30D8\u30EB\u30D7] > [\u958B\u767A\u8005\u30C4\u30FC\u30EB\u306E\u5207\u308A\u66FF\u3048] \u3092\u53C2\u7167\u3059\u308B\u304B\u3001~/.sfdx/sfdx.log \u5185\u306ESalesforce CLI \u306E\u30ED\u30B0\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002"};var u0=[lt.DEFAULT_LOCALE,lt.LOCALE_JA];function c0(r){let e=new lt.Message(Lp),t=r?r.locale:lt.DEFAULT_LOCALE;return t===lt.LOCALE_JA?new lt.Message(jp,e):(u0.indexOf(t)===-1&&console.error(`Cannot find ${t}, defaulting to en`),e)}var ft=new lt.Localization(c0(process.env.VSCODE_NLS_CONFIG?JSON.parse(process.env.VSCODE_NLS_CONFIG):void 0));var an=class{constructor(){this.sfdxApex=xr.extensions.getExtension("salesforce.salesforcedx-vscode-apex")}static getConfig(e){return{name:ft.localize("config_name_text"),type:sn.DEBUGGER_TYPE,request:sn.DEBUGGER_LAUNCH_TYPE,userIdFilter:[],requestTypeFilter:[],entryPointFilter:"",sfdxProject:e?e.uri.fsPath:"${workspaceRoot}"}}provideDebugConfigurations(e,t){return[an.getConfig(e)]}resolveDebugConfiguration(e,t,n){return this.asyncDebugConfig(e,t).catch(i=>ut(this,null,function*(){return xr.window.showErrorMessage(i.message,{modal:!0}).then(o=>{})}))}asyncDebugConfig(e,t){return ut(this,null,function*(){if(t.name=t.name||ft.localize("config_name_text"),t.type=t.type||sn.DEBUGGER_TYPE,t.request=t.request||sn.DEBUGGER_LAUNCH_TYPE,t.userIdFilter===void 0&&(t.userIdFilter=[]),t.requestTypeFilter===void 0&&(t.requestTypeFilter=[]),t.entryPointFilter===void 0&&(t.entryPointFilter=""),t.sfdxProject=t.sfdxProject||(e?e.uri.fsPath:"${workspaceRoot}"),xr.workspace){let n=xr.workspace.getConfiguration();t.workspaceSettings={proxyUrl:n.get("http.proxy",""),proxyStrictSSL:n.get("http.proxyStrictSSL",!1),proxyAuth:n.get("http.proxyAuthorization",""),connectionTimeoutMs:n.get("salesforcedx-vscode-apex-debugger.connectionTimeoutMs")}}return this.sfdxApex&&this.sfdxApex.exports&&(yield this.isLanguageClientReady(),t.lineBreakpointInfo=yield this.sfdxApex.exports.getLineBreakpointInfo()),t})}isLanguageClientReady(){return ut(this,null,function*(){let e=!1,t=0;for(;this.sfdxApex&&this.sfdxApex.exports&&!this.sfdxApex.exports.languageClientUtils.getStatus().isReady()&&!e;){if(this.sfdxApex.exports.languageClientUtils.getStatus().failedToInitialize())throw Error(this.sfdxApex.exports.languageClientUtils.getStatus().getStatusMessage());yield new Promise(n=>setTimeout(n,100)),t>=30&&(e=!0),t++}if(e)throw Error(ft.localize("language_client_not_ready"))})}};var Jb=It(Up()),Qb=It(mn()),St=It(require("vscode"));function ii(){return ut(this,null,function*(){let r=new Jb.IsvContextUtil;if(St.workspace&&St.workspace.workspaceFolders&&St.workspace.workspaceFolders[0]){let e=yield r.setIsvDebuggerContext(St.workspace.workspaceFolders[0].uri.fsPath);St.commands.executeCommand("setContext","sfdx:isv_debug_project",e),console.log(e?"Configured ISV Project Authentication":"Project is not for ISV Debugger")}r.resetCliEnvironmentVars()})}function bf(r){if(St.workspace.workspaceFolders instanceof Array&&St.workspace.workspaceFolders.length>0){let e=Qb.projectPaths.sfdxProjectConfig(),t=St.workspace.createFileSystemWatcher(e);t.onDidChange(n=>ii()),t.onDidCreate(n=>ii()),t.onDidDelete(n=>ii()),r.subscriptions.push(t)}}var tE=It(require("util")),eE="salesforcedx-vscode-apex-debugger",Bt=class{constructor(){this.isTelemetryEnabled=!1}static getInstance(){return Bt.instance||(Bt.instance=new Bt),Bt.instance}initializeService(e,t){this.isTelemetryEnabled=t,this.reporter=e}sendExtensionActivationEvent(e){if(this.reporter!==void 0&&this.isTelemetryEnabled){let t=this.getEndHRTime(e);this.reporter.sendTelemetryEvent("activationEvent",{extensionName:eE,startupTime:t})}}sendExtensionDeactivationEvent(){this.reporter!==void 0&&this.isTelemetryEnabled&&this.reporter.sendTelemetryEvent("deactivationEvent",{extensionName:eE})}getEndHRTime(e){let t=process.hrtime(e);return tE.format("%d%d",t[0],t[1]/1e6)}};var xa=Bt.getInstance();var Hr=new Map,no=ee.extensions.getExtension("salesforce.salesforcedx-vscode-core");function rE(r){return ut(this,null,function*(){let e=r.type;return e===ne.LIVESHARE_DEBUGGER_TYPE&&(e=yield r.customRequest(ne.LIVESHARE_DEBUG_TYPE_REQUEST)),e})}function SP(){let r=ee.debug.onDidReceiveDebugSessionCustomEvent(n=>ut(this,null,function*(){if(n&&n.session&&(yield rE(n.session))===ne.DEBUGGER_TYPE&&n.event===ne.SHOW_MESSAGE_EVENT){let o=n.body;if(o&&o.type&&o.message)switch(o.type){case ne.VscodeDebuggerMessageType.Info:{ee.window.showInformationMessage(o.message);break}case ne.VscodeDebuggerMessageType.Warning:{ee.window.showWarningMessage(o.message);break}case ne.VscodeDebuggerMessageType.Error:{ee.window.showErrorMessage(o.message);break}}}})),e=ee.commands.registerCommand("sfdx.debug.exception.breakpoint",OP),t=ee.debug.onDidStartDebugSession(n=>{Hr.forEach(i=>{let o={exceptionInfo:i};n.customRequest(ne.EXCEPTION_BREAKPOINT_REQUEST,o)})});return ee.Disposable.from(r,e,t)}var wP=[{label:ft.localize("always_break_text"),description:"",breakMode:ne.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS},{label:ft.localize("never_break_text"),description:"",breakMode:ne.EXCEPTION_BREAKPOINT_BREAK_MODE_NEVER}];function OP(){return ut(this,null,function*(){let r=ee.extensions.getExtension("salesforce.salesforcedx-vscode-apex");if(r&&r.exports){let e=yield r.exports.getExceptionBreakpointInfo();console.log("Retrieved exception breakpoint info from language server");let t=[];if(ee.debug.activeDebugSession){let s=yield ee.debug.activeDebugSession.customRequest(ne.LIST_EXCEPTION_BREAKPOINTS_REQUEST);s&&s.typerefs&&(t=s.typerefs)}else t=Array.from(Hr.keys());let n=nE(e,t),i={placeHolder:ft.localize("select_exception_text"),matchOnDescription:!0},o=yield ee.window.showQuickPick(n,i);if(o){let s={placeHolder:ft.localize("select_break_option_text"),matchOnDescription:!0},a=yield ee.window.showQuickPick(wP,s);if(a){o.breakMode=a.breakMode;let l={exceptionInfo:o};ee.debug.activeDebugSession&&(yield ee.debug.activeDebugSession.customRequest(ne.EXCEPTION_BREAKPOINT_REQUEST,l)),iE(o)}}}})}function nE(r,e){let t=[];if(e.length>0)for(let n=r.length-1;n>=0;n--)e.indexOf(r[n].typeref)>=0&&(r[n].breakMode=ne.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS,r[n].description=`$(stop) ${ft.localize("always_break_text")}`,t.unshift(r[n]),r.splice(n,1));return t.concat(r)}function iE(r){r.breakMode===ne.EXCEPTION_BREAKPOINT_BREAK_MODE_ALWAYS&&!Hr.has(r.typeref)?Hr.set(r.typeref,r):r.breakMode===ne.EXCEPTION_BREAKPOINT_BREAK_MODE_NEVER&&Hr.has(r.typeref)&&Hr.delete(r.typeref)}function TP(){return Hr}function xP(){let r=ee.workspace.createFileSystemWatcher("**/*.cls");r.onDidChange(t=>oi()),r.onDidCreate(t=>oi()),r.onDidDelete(t=>oi());let e=ee.workspace.createFileSystemWatcher("**/*.trigger");return e.onDidChange(t=>oi()),e.onDidCreate(t=>oi()),e.onDidDelete(t=>oi()),ee.Disposable.from(r,e)}function oi(){ee.debug.activeDebugSession&&ee.debug.activeDebugSession.customRequest(ne.HOTSWAP_REQUEST)}function IP(r){return ut(this,null,function*(){console.log("Apex Debugger Extension Activated");let e=process.hrtime(),t=SP(),n=xP();if(r.subscriptions.push(t,n),r.subscriptions.push(ee.debug.registerDebugConfigurationProvider("apex",new an)),no&&no.exports){if(no.exports.isCLIInstalled()){console.log("Setting up ISV Debugger environment variables");try{bf(r),yield ii()}catch(i){console.error(i),ee.window.showWarningMessage(ft.localize("isv_debug_config_environment_error"))}}xa.initializeService(no.exports.telemetryService.getReporter(),no.exports.telemetryService.isTelemetryEnabled())}xa.sendExtensionActivationEvent(e)})}function AP(){console.log("Apex Debugger Extension Deactivated"),xa.sendExtensionDeactivationEvent()}0&&(module.exports={activate,deactivate,getDebuggerType,getExceptionBreakpointCache,mergeExceptionBreakpointInfos,updateExceptionBreakpointCache});
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
* @license
* Copyright Google Inc. All Rights Reserved.
*
* Use of this source code is governed by an MIT-style license that can be
* found in the LICENSE file at https://angular.io/license
*/
