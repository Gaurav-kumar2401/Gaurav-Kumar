"use strict";var Bu=Object.create;var Vt=Object.defineProperty;var Gu=Object.getOwnPropertyDescriptor;var $u=Object.getOwnPropertyNames;var zu=Object.getPrototypeOf,Xu=Object.prototype.hasOwnProperty;var d=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Yu=(r,e)=>{for(var t in e)Vt(r,t,{get:e[t],enumerable:!0})},Ls=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of $u(e))!Xu.call(r,s)&&s!==t&&Vt(r,s,{get:()=>e[s],enumerable:!(n=Gu(e,s))||n.enumerable});return r};var ce=(r,e,t)=>(t=r!=null?Bu(zu(r)):{},Ls(e||!r||!r.__esModule?Vt(t,"default",{value:r,enumerable:!0}):t,r)),Ju=r=>Ls(Vt({},"__esModule",{value:!0}),r);var Me=(r,e,t)=>new Promise((n,s)=>{var i=u=>{try{l(t.next(u))}catch(o){s(o)}},a=u=>{try{l(t.throw(u))}catch(o){s(o)}},l=u=>u.done?n(u.value):Promise.resolve(u.value).then(i,a);l((t=t.apply(r,e)).next())});var qt=d(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});var ht=class{constructor(e){this.seq=0,this.type=e}};dt.Message=ht;var zr=class extends ht{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};dt.Response=zr;var Xr=class extends ht{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}};dt.Event=Xr});var Fs=d(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});var Wu=require("events"),Ve=qt(),_e=class extends Wu.EventEmitter{constructor(){super(),this._pendingRequests=new Map}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=new Buffer(0),e.on("data",n=>this._handleData(n)),e.on("close",()=>{this._emitEvent(new Ve.Event("close"))}),e.on("error",n=>{this._emitEvent(new Ve.Event("error","inStream error: "+(n&&n.message)))}),t.on("error",n=>{this._emitEvent(new Ve.Event("error","outStream error: "+(n&&n.message)))}),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,n,s){let i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),!this._writableStream){this._emitEvent(new Ve.Event("error","sendRequest: No writableStream"));return}if(this._send("request",i),s){this._pendingRequests.set(i.seq,s);let a=setTimeout(()=>{clearTimeout(a);let l=this._pendingRequests.get(i.seq);l&&(this._pendingRequests.delete(i.seq),l(new Ve.Response(i,"timeout")))},n)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){let n=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(n,"utf8")}\r
\r
${n}`,"utf8")}}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){let t=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,t.length>0)try{let n=JSON.parse(t);if(n.type==="request")this.dispatchRequest(n);else if(n.type==="response"){let s=n,i=this._pendingRequests.get(s.request_seq);i&&(this._pendingRequests.delete(s.request_seq),i(s))}}catch(n){this._emitEvent(new Ve.Event("error","Error handling data: "+(n&&n.message)))}continue}}else{let t=this._rawData.indexOf(_e.TWO_CRLF);if(t!==-1){let s=this._rawData.toString("utf8",0,t).split(`\r
`);for(let i=0;i<s.length;i++){let a=s[i].split(/: +/);a[0]=="Content-Length"&&(this._contentLength=+a[1])}this._rawData=this._rawData.slice(t+_e.TWO_CRLF.length);continue}}break}}};_e.TWO_CRLF=`\r
\r
`;Yr.ProtocolServer=_e});var Jr=d((Is,kt)=>{(function(r){if(typeof kt=="object"&&typeof kt.exports=="object"){var e=r(require,Is);e!==void 0&&(kt.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],r)})(function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function t(u){return"%"+u.charCodeAt(0).toString(16).toUpperCase()}function n(u){return encodeURIComponent(u).replace(/[!'()*]/g,t)}function s(u){return u.replace(/[#?]/,t)}var i=function(){function u(){this._scheme=u._empty,this._authority=u._empty,this._path=u._empty,this._query=u._empty,this._fragment=u._empty,this._formatted=null,this._fsPath=null}return u.isUri=function(o){return o instanceof u?!0:o?typeof o.authority=="string"&&typeof o.fragment=="string"&&typeof o.path=="string"&&typeof o.query=="string"&&typeof o.scheme=="string":!1},Object.defineProperty(u.prototype,"scheme",{get:function(){return this._scheme},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"authority",{get:function(){return this._authority},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"fragment",{get:function(){return this._fragment},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"fsPath",{get:function(){if(!this._fsPath){var o;this._authority&&this._path&&this.scheme==="file"?o="//"+this._authority+this._path:u._driveLetterPath.test(this._path)?o=this._path[1].toLowerCase()+this._path.substr(2):o=this._path,a&&(o=o.replace(/\//g,"\\")),this._fsPath=o}return this._fsPath},enumerable:!0,configurable:!0}),u.prototype.with=function(o){if(!o)return this;var c=o.scheme,f=o.authority,h=o.path,g=o.query,v=o.fragment;if(c===void 0?c=this.scheme:c===null&&(c=""),f===void 0?f=this.authority:f===null&&(f=""),h===void 0?h=this.path:h===null&&(h=""),g===void 0?g=this.query:g===null&&(g=""),v===void 0?v=this.fragment:v===null&&(v=""),c===this.scheme&&f===this.authority&&h===this.path&&g===this.query&&v===this.fragment)return this;var _=new u;return _._scheme=c,_._authority=f,_._path=h,_._query=g,_._fragment=v,u._validate(_),_},u.parse=function(o){var c=new u,f=u._parseComponents(o);return c._scheme=f.scheme,c._authority=decodeURIComponent(f.authority),c._path=decodeURIComponent(f.path),c._query=decodeURIComponent(f.query),c._fragment=decodeURIComponent(f.fragment),u._validate(c),c},u.file=function(o){var c=new u;if(c._scheme="file",a&&(o=o.replace(/\\/g,u._slash)),o[0]===u._slash&&o[0]===o[1]){var f=o.indexOf(u._slash,2);f===-1?c._authority=o.substring(2):(c._authority=o.substring(2,f),c._path=o.substring(f))}else c._path=o;return c._path[0]!==u._slash&&(c._path=u._slash+c._path),u._validate(c),c},u._parseComponents=function(o){var c={scheme:u._empty,authority:u._empty,path:u._empty,query:u._empty,fragment:u._empty},f=u._regexp.exec(o);return f&&(c.scheme=f[2]||c.scheme,c.authority=f[4]||c.authority,c.path=f[5]||c.path,c.query=f[7]||c.query,c.fragment=f[9]||c.fragment),c},u.from=function(o){return new u().with(o)},u._validate=function(o){if(o.scheme&&!u._schemePattern.test(o.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(o.path){if(o.authority){if(!u._singleSlashStart.test(o.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u._doubleSlashStart.test(o.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}},u.prototype.toString=function(o){return o===void 0&&(o=!1),o?u._asFormatted(this,!0):(this._formatted||(this._formatted=u._asFormatted(this,!1)),this._formatted)},u._asFormatted=function(o,c){var f=c?s:n,h=[],g=o.scheme,v=o.authority,_=o.path,A=o.query,V=o.fragment;if(g&&h.push(g,":"),(v||g==="file")&&h.push("//"),v){v=v.toLowerCase();var U=v.indexOf(":");U===-1?h.push(f(v)):h.push(f(v.substr(0,U)),v.substr(U))}if(_){var O=u._upperCaseDrive.exec(_);O&&(O[1]?_="/"+O[2].toLowerCase()+_.substr(3):_=O[2].toLowerCase()+_.substr(2));for(var P=0;;){var U=_.indexOf(u._slash,P);if(U===-1){h.push(f(_.substring(P)));break}h.push(f(_.substring(P,U)),u._slash),P=U+1}}return A&&h.push("?",f(A)),V&&h.push("#",f(V)),h.join(u._empty)},u.prototype.toJSON=function(){var o={fsPath:this.fsPath,external:this.toString(),$mid:1};return this.path&&(o.path=this.path),this.scheme&&(o.scheme=this.scheme),this.authority&&(o.authority=this.authority),this.query&&(o.query=this.query),this.fragment&&(o.fragment=this.fragment),o},u.revive=function(o){var c=new u;return c._scheme=o.scheme||u._empty,c._authority=o.authority||u._empty,c._path=o.path||u._empty,c._query=o.query||u._empty,c._fragment=o.fragment||u._empty,c._fsPath=o.fsPath,c._formatted=o.external,u._validate(c),c},u}();i._empty="",i._slash="/",i._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,i._driveLetterPath=/^\/[a-zA-z]:/,i._upperCaseDrive=/^(\/)?([A-Z]:)/,i._schemePattern=/^\w[\w\d+.-]*$/,i._singleSlashStart=/^\//,i._doubleSlashStart=/^\/\//,e.default=i;var a;if(typeof process=="object")a=process.platform==="win32";else if(typeof navigator=="object"){var l=navigator.userAgent;a=l.indexOf("Windows")>=0}})});var Ht=d(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});var Ku=Fs(),ne=qt(),Qu=require("net"),Ds=Jr(),Wr=class{constructor(e,t,n=0,s,i){this.name=e,this.path=t,this.sourceReference=n,s&&(this.origin=s),i&&(this.adapterData=i)}};F.Source=Wr;var Kr=class{constructor(e,t,n=!1){this.name=e,this.variablesReference=t,this.expensive=n}};F.Scope=Kr;var Qr=class{constructor(e,t,n,s=0,i=0){this.id=e,this.source=n,this.line=s,this.column=i,this.name=t}};F.StackFrame=Qr;var Zr=class{constructor(e,t){this.id=e,t?this.name=t:this.name="Thread #"+e}};F.Thread=Zr;var en=class{constructor(e,t,n=0,s,i){this.name=e,this.value=t,this.variablesReference=n,typeof i=="number"&&(this.namedVariables=i),typeof s=="number"&&(this.indexedVariables=s)}};F.Variable=en;var tn=class{constructor(e,t,n,s){this.verified=e;let i=this;typeof t=="number"&&(i.line=t),typeof n=="number"&&(i.column=n),s&&(i.source=s)}};F.Breakpoint=tn;var rn=class{constructor(e,t){this.id=e,this.name=t}};F.Module=rn;var nn=class{constructor(e,t,n=0){this.label=e,this.start=t,this.length=n}};F.CompletionItem=nn;var sn=class extends ne.Event{constructor(e,t,n=null){if(super("stopped"),this.body={reason:e,threadId:t},n){let s=this;s.body.text=n}}};F.StoppedEvent=sn;var on=class extends ne.Event{constructor(e,t){super("continued"),this.body={threadId:e},typeof t=="boolean"&&(this.body.allThreadsContinued=t)}};F.ContinuedEvent=on;var an=class extends ne.Event{constructor(){super("initialized")}};F.InitializedEvent=an;var un=class extends ne.Event{constructor(e){if(super("terminated"),typeof e=="boolean"||e){let t=this;t.body={restart:e}}}};F.TerminatedEvent=un;var cn=class extends ne.Event{constructor(e,t="console",n){super("output"),this.body={category:t,output:e},n!==void 0&&(this.body.data=n)}};F.OutputEvent=cn;var ln=class extends ne.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};F.ThreadEvent=ln;var fn=class extends ne.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};F.BreakpointEvent=fn;var pn=class extends ne.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}};F.ModuleEvent=pn;var hn=class extends ne.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}};F.LoadedSourceEvent=hn;var dn=class extends ne.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}};F.CapabilitiesEvent=dn;var ye;(function(r){r[r.User=1]="User",r[r.Telemetry=2]="Telemetry"})(ye=F.ErrorDestination||(F.ErrorDestination={}));var re=class extends Ku.ProtocolServer{constructor(e,t){super();let n=typeof e=="boolean"?e:!1;this._debuggerLinesStartAt1=n,this._debuggerColumnsStartAt1=n,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer=typeof t=="boolean"?t:!1,this.on("close",()=>{this.shutdown()}),this.on("error",s=>{this.shutdown()})}setDebuggerPathFormat(e){this._debuggerPathsAreURIs=e!=="path"}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){let t=0;if(process.argv.slice(2).forEach(function(s,i,a){let l=/^--server=(\d{4,5})$/.exec(s);l&&(t=parseInt(l[1],10))}),t>0)console.error(`waiting for debug protocol on port ${t}`),Qu.createServer(s=>{console.error(">> accepted connection from client"),s.on("end",()=>{console.error(`>> client connection closed
`)});let i=new e(!1,!0);i.setRunAsServer(!0),i.start(s,s)}).listen(t);else{let s=new e(!1);process.on("SIGTERM",()=>{s.shutdown()}),s.start(process.stdin,process.stdout)}}shutdown(){this._isServer||setTimeout(()=>{process.exit(0)},100)}sendErrorResponse(e,t,n,s,i=ye.User){let a;typeof t=="number"?(a={id:t,format:n},s&&(a.variables=s),i&ye.User&&(a.showUser=!0),i&ye.Telemetry&&(a.sendTelemetry=!0)):a=t,e.success=!1,e.message=re.formatPII(a.format,!0,a.variables),e.body||(e.body={}),e.body.error=a,this.sendResponse(e)}runInTerminalRequest(e,t,n){this.sendRequest("runInTerminal",e,t,n)}dispatchRequest(e){let t=new ne.Response(e);try{if(e.command==="initialize"){var n=e.arguments;if(typeof n.linesStartAt1=="boolean"&&(this._clientLinesStartAt1=n.linesStartAt1),typeof n.columnsStartAt1=="boolean"&&(this._clientColumnsStartAt1=n.columnsStartAt1),n.pathFormat!=="path")this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,ye.Telemetry);else{let s=t;s.body={},this.initializeRequest(s,n)}}else e.command==="launch"?this.launchRequest(t,e.arguments):e.command==="attach"?this.attachRequest(t,e.arguments):e.command==="disconnect"?this.disconnectRequest(t,e.arguments):e.command==="restart"?this.restartRequest(t,e.arguments):e.command==="setBreakpoints"?this.setBreakPointsRequest(t,e.arguments):e.command==="setFunctionBreakpoints"?this.setFunctionBreakPointsRequest(t,e.arguments):e.command==="setExceptionBreakpoints"?this.setExceptionBreakPointsRequest(t,e.arguments):e.command==="configurationDone"?this.configurationDoneRequest(t,e.arguments):e.command==="continue"?this.continueRequest(t,e.arguments):e.command==="next"?this.nextRequest(t,e.arguments):e.command==="stepIn"?this.stepInRequest(t,e.arguments):e.command==="stepOut"?this.stepOutRequest(t,e.arguments):e.command==="stepBack"?this.stepBackRequest(t,e.arguments):e.command==="reverseContinue"?this.reverseContinueRequest(t,e.arguments):e.command==="restartFrame"?this.restartFrameRequest(t,e.arguments):e.command==="goto"?this.gotoRequest(t,e.arguments):e.command==="pause"?this.pauseRequest(t,e.arguments):e.command==="stackTrace"?this.stackTraceRequest(t,e.arguments):e.command==="scopes"?this.scopesRequest(t,e.arguments):e.command==="variables"?this.variablesRequest(t,e.arguments):e.command==="setVariable"?this.setVariableRequest(t,e.arguments):e.command==="setExpression"?this.setExpressionRequest(t,e.arguments):e.command==="source"?this.sourceRequest(t,e.arguments):e.command==="threads"?this.threadsRequest(t):e.command==="terminateThreads"?this.terminateThreadsRequest(t,e.arguments):e.command==="evaluate"?this.evaluateRequest(t,e.arguments):e.command==="stepInTargets"?this.stepInTargetsRequest(t,e.arguments):e.command==="gotoTargets"?this.gotoTargetsRequest(t,e.arguments):e.command==="completions"?this.completionsRequest(t,e.arguments):e.command==="exceptionInfo"?this.exceptionInfoRequest(t,e.arguments):e.command==="loadedSources"?this.loadedSourcesRequest(t,e.arguments):this.customRequest(e.command,t,e.arguments)}catch(s){this.sendErrorResponse(t,1104,"{_stack}",{_exception:s.message,_stack:s.stack},ye.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,this.sendResponse(e)}disconnectRequest(e,t){this.sendResponse(e),this.shutdown()}launchRequest(e,t){this.sendResponse(e)}attachRequest(e,t){this.sendResponse(e)}restartRequest(e,t){this.sendResponse(e)}setBreakPointsRequest(e,t){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t){this.sendResponse(e)}configurationDoneRequest(e,t){this.sendResponse(e)}continueRequest(e,t){this.sendResponse(e)}nextRequest(e,t){this.sendResponse(e)}stepInRequest(e,t){this.sendResponse(e)}stepOutRequest(e,t){this.sendResponse(e)}stepBackRequest(e,t){this.sendResponse(e)}reverseContinueRequest(e,t){this.sendResponse(e)}restartFrameRequest(e,t){this.sendResponse(e)}gotoRequest(e,t){this.sendResponse(e)}pauseRequest(e,t){this.sendResponse(e)}sourceRequest(e,t){this.sendResponse(e)}threadsRequest(e){this.sendResponse(e)}terminateThreadsRequest(e,t){this.sendResponse(e)}stackTraceRequest(e,t){this.sendResponse(e)}scopesRequest(e,t){this.sendResponse(e)}variablesRequest(e,t){this.sendResponse(e)}setVariableRequest(e,t){this.sendResponse(e)}setExpressionRequest(e,t){this.sendResponse(e)}evaluateRequest(e,t){this.sendResponse(e)}stepInTargetsRequest(e,t){this.sendResponse(e)}gotoTargetsRequest(e,t){this.sendResponse(e)}completionsRequest(e,t){this.sendResponse(e)}exceptionInfoRequest(e,t){this.sendResponse(e)}loadedSourcesRequest(e,t){this.sendResponse(e)}customRequest(e,t,n){this.sendErrorResponse(t,1014,"unrecognized request",null,ye.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?re.uri2path(e):re.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?re.uri2path(e):re.path2uri(e):e}static path2uri(e){let t=Ds.default.file(e).toString();return process.platform==="win32"&&/^file:\/\/\/[a-z]%3A/.test(t)&&(t=t.replace("%3A",":")),t}static uri2path(e){return Ds.default.parse(e).fsPath}static formatPII(e,t,n){return e.replace(re._formatPIIRegexp,function(s,i){return t&&i.length>0&&i[0]!=="_"?s:n[i]&&n.hasOwnProperty(i)?n[i]:s})}};re._formatPIIRegexp=/{([^}]+)}/g;F.DebugSession=re});var mn=d(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});var Zu=require("fs"),ec=Ht(),j;(function(r){r[r.Verbose=0]="Verbose",r[r.Log=1]="Log",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Stop=4]="Stop"})(j=pe.LogLevel||(pe.LogLevel={}));var Ut=class{constructor(){this._pendingLogQ=[]}log(e,t=j.Log){e=e+`
`,this._write(e,t)}verbose(e){this.log(e,j.Verbose)}warn(e){this.log(e,j.Warn)}error(e){this.log(e,j.Error)}_write(e,t=j.Log){e=e+"",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger.log(e,t)}setup(e,t){let n=typeof t=="string"?t:t&&this._logFilePathFromInit;if(this._currentLogger&&(this._currentLogger.setup(e,n),this._pendingLogQ)){let s=this._pendingLogQ;this._pendingLogQ=null,s.forEach(i=>this._write(i.msg,i.level))}}init(e,t,n){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new gn(e,n),this._logFilePathFromInit=t;let s=new Date,i=s.toLocaleTimeString()+", "+s.toLocaleDateString();this.verbose(i)}};pe.Logger=Ut;pe.logger=new Ut;var gn=class{constructor(e,t){this._logCallback=e,this._logToConsole=t,this._minLogLevel=j.Warn}setup(e,t){this._minLogLevel=e,t&&(this.log(`Verbose logs are written to:
`,j.Warn),this.log(t+`
`,j.Warn),this._logFileStream=Zu.createWriteStream(t),this._logFileStream.on("error",n=>{this.sendLog(`Error involving log file at path: ${t}. Error: ${n.toString()}`,j.Error)}))}log(e,t){if(this._minLogLevel!==j.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){let n=t===j.Error?console.error:t===j.Warn?console.warn:null;n&&n(Ps(e))}t===j.Error&&(e=`[${j[t]}] ${e}`),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){let n=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",n&&(e=e+`
`)}if(this._logCallback){let n=new jt(e,t);this._logCallback(n)}}},jt=class extends ec.OutputEvent{constructor(e,t){let n=t===j.Error?"stderr":t===j.Warn?"console":"stdout";super(e,n)}};pe.LogOutputEvent=jt;function Ps(r){return r.replace(/(\n|\r\n)$/,"")}pe.trimLastNewline=Ps});var Ms=d(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var Ns=mn(),qe=Ns.logger,tc=Ht(),bn=class extends tc.DebugSession{constructor(e,t,n){super(t,n),this.obsolete_logFilePath=e,this.on("error",s=>{qe.error(s.body)})}start(e,t){super.start(e,t),qe.init(n=>this.sendEvent(n),this.obsolete_logFilePath,this._isServer)}sendEvent(e){e instanceof Ns.LogOutputEvent||qe.verbose(`To client: ${JSON.stringify(e)}`),super.sendEvent(e)}sendRequest(e,t,n,s){qe.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${n}`),super.sendRequest(e,t,n,s)}sendResponse(e){qe.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){qe.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}};vn.LoggingDebugSession=bn});var Vs=d(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var _n=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}};yn.Handles=_n});var Bt=d(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});var N=Ht();T.DebugSession=N.DebugSession;T.InitializedEvent=N.InitializedEvent;T.TerminatedEvent=N.TerminatedEvent;T.StoppedEvent=N.StoppedEvent;T.ContinuedEvent=N.ContinuedEvent;T.OutputEvent=N.OutputEvent;T.ThreadEvent=N.ThreadEvent;T.BreakpointEvent=N.BreakpointEvent;T.ModuleEvent=N.ModuleEvent;T.LoadedSourceEvent=N.LoadedSourceEvent;T.CapabilitiesEvent=N.CapabilitiesEvent;T.Thread=N.Thread;T.StackFrame=N.StackFrame;T.Scope=N.Scope;T.Variable=N.Variable;T.Breakpoint=N.Breakpoint;T.Source=N.Source;T.Module=N.Module;T.CompletionItem=N.CompletionItem;T.ErrorDestination=N.ErrorDestination;var rc=Ms();T.LoggingDebugSession=rc.LoggingDebugSession;var qs=mn();T.Logger=qs;var ks=qt();T.Event=ks.Event;T.Response=ks.Response;var nc=Vs();T.Handles=nc.Handles;var sc=qs.logger;T.logger=sc});var mt=d(ui=>{"use strict";var ic=typeof window<"u"&&window,oc=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self,ac=typeof global<"u"&&global,ai=ic||ac||oc;ui.root=ai;(function(){if(!ai)throw new Error("RxJS could not find any global context (window, self, global)")})()});var Kt=d(ci=>{"use strict";function uc(r){return typeof r=="function"}ci.isFunction=uc});var Rn=d(li=>{"use strict";li.isArray=Array.isArray||function(r){return r&&typeof r.length=="number"}});var pi=d(fi=>{"use strict";function cc(r){return r!=null&&typeof r=="object"}fi.isObject=cc});var Qt=d(hi=>{"use strict";hi.errorObject={e:{}}});var wn=d(mi=>{"use strict";var di=Qt(),gi;function lc(){try{return gi.apply(this,arguments)}catch(r){return di.errorObject.e=r,di.errorObject}}function fc(r){return gi=r,lc}mi.tryCatch=fc});var bi=d(Zt=>{"use strict";var pc=Zt&&Zt.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},hc=function(r){pc(e,r);function e(t){r.call(this),this.errors=t;var n=Error.call(this,t?t.length+` errors occurred during unsubscription:
  `+t.map(function(s,i){return i+1+") "+s.toString()}).join(`
  `):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return e}(Error);Zt.UnsubscriptionError=hc});var tr=d(yi=>{"use strict";var dc=Rn(),gc=pi(),mc=Kt(),vi=wn(),Be=Qt(),er=bi(),bc=function(){function r(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e=!1,t;if(!this.closed){var n=this,s=n._parent,i=n._parents,a=n._unsubscribe,l=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var u=-1,o=i?i.length:0;s;)s.remove(this),s=++u<o&&i[u]||null;if(mc.isFunction(a)){var c=vi.tryCatch(a).call(this);c===Be.errorObject&&(e=!0,t=t||(Be.errorObject.e instanceof er.UnsubscriptionError?_i(Be.errorObject.e.errors):[Be.errorObject.e]))}if(dc.isArray(l))for(u=-1,o=l.length;++u<o;){var f=l[u];if(gc.isObject(f)){var c=vi.tryCatch(f.unsubscribe).call(f);if(c===Be.errorObject){e=!0,t=t||[];var h=Be.errorObject.e;h instanceof er.UnsubscriptionError?t=t.concat(_i(h.errors)):t.push(h)}}}if(e)throw new er.UnsubscriptionError(t)}},r.prototype.add=function(e){if(!e||e===r.EMPTY)return r.EMPTY;if(e===this)return this;var t=e;switch(typeof e){case"function":t=new r(e);case"object":if(t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(typeof t._addParent!="function"){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var s=this._subscriptions||(this._subscriptions=[]);return s.push(t),t._addParent(this),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.prototype._addParent=function(e){var t=this,n=t._parent,s=t._parents;!n||n===e?this._parent=e:s?s.indexOf(e)===-1&&s.push(e):this._parents=[e]},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();yi.Subscription=bc;function _i(r){return r.reduce(function(e,t){return e.concat(t instanceof er.UnsubscriptionError?t.errors:t)},[])}});var Tn=d(Ei=>{"use strict";Ei.empty={closed:!0,next:function(r){},error:function(r){throw r},complete:function(){}}});var On=d(rr=>{"use strict";var vc=mt(),An=vc.root.Symbol;rr.rxSubscriber=typeof An=="function"&&typeof An.for=="function"?An.for("rxSubscriber"):"@@rxSubscriber";rr.$$rxSubscriber=rr.rxSubscriber});var Ri=d(nr=>{"use strict";var xi=nr&&nr.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Ci=Kt(),_c=tr(),Ln=Tn(),Fn=On(),In=function(r){xi(e,r);function e(t,n,s){switch(r.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Ln.empty;break;case 1:if(!t){this.destination=Ln.empty;break}if(typeof t=="object"){if(yc(t)){var i=t[Fn.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new Si(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new Si(this,t,n,s);break}}return e.prototype[Fn.rxSubscriber]=function(){return this},e.create=function(t,n,s){var i=new e(t,n,s);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,n=t._parent,s=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=n,this._parents=s,this},e}(_c.Subscription);nr.Subscriber=In;var Si=function(r){xi(e,r);function e(t,n,s,i){r.call(this),this._parentSubscriber=t;var a,l=this;Ci.isFunction(n)?a=n:n&&(a=n.next,s=n.error,i=n.complete,n!==Ln.empty&&(l=Object.create(n),Ci.isFunction(l.unsubscribe)&&this.add(l.unsubscribe.bind(l)),l.unsubscribe=this.unsubscribe.bind(this))),this._context=l,this._next=a,this._error=s,this._complete=i}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber;if(this._error)n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)n.syncErrorValue=t,n.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),t}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var s=function(){return t._complete.call(t._context)};n.syncErrorThrowable?(this.__tryOrSetError(n,s),this.unsubscribe()):(this.__tryOrUnsub(s),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(s){throw this.unsubscribe(),s}},e.prototype.__tryOrSetError=function(t,n,s){try{n.call(this._context,s)}catch(i){return t.syncErrorValue=i,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(In);function yc(r){return r instanceof In||"syncErrorThrowable"in r&&r[Fn.rxSubscriber]}});var Ai=d(Ti=>{"use strict";var Dn=Ri(),wi=On(),Ec=Tn();function Cc(r,e,t){if(r){if(r instanceof Dn.Subscriber)return r;if(r[wi.rxSubscriber])return r[wi.rxSubscriber]()}return!r&&!e&&!t?new Dn.Subscriber(Ec.empty):new Dn.Subscriber(r,e,t)}Ti.toSubscriber=Cc});var Li=d(bt=>{"use strict";var Sc=mt();function Oi(r){var e,t=r.Symbol;return typeof t=="function"?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}bt.getSymbolObservable=Oi;bt.observable=Oi(Sc.root);bt.$$observable=bt.observable});var Ii=d(Fi=>{"use strict";function xc(){}Fi.noop=xc});var Pi=d(Pn=>{"use strict";var Rc=Ii();function wc(){for(var r=[],e=0;e<arguments.length;e++)r[e-0]=arguments[e];return Di(r)}Pn.pipe=wc;function Di(r){return r?r.length===1?r[0]:function(t){return r.reduce(function(n,s){return s(n)},t)}:Rc.noop}Pn.pipeFromArray=Di});var Ge=d(Ni=>{"use strict";var Q=mt(),Tc=Ai(),Ac=Li(),Oc=Pi(),Lc=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var s=this.operator,i=Tc.toSubscriber(e,t,n);if(s?s.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},r.prototype.forEach=function(e,t){var n=this;if(t||(Q.root.Rx&&Q.root.Rx.config&&Q.root.Rx.config.Promise?t=Q.root.Rx.config.Promise:Q.root.Promise&&(t=Q.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(s,i){var a;a=n.subscribe(function(l){if(a)try{e(l)}catch(u){i(u),a.unsubscribe()}else e(l)},i,s)})},r.prototype._subscribe=function(e){return this.source.subscribe(e)},r.prototype[Ac.observable]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.length===0?this:Oc.pipeFromArray(e)(this)},r.prototype.toPromise=function(e){var t=this;if(e||(Q.root.Rx&&Q.root.Rx.config&&Q.root.Rx.config.Promise?e=Q.root.Rx.config.Promise:Q.root.Promise&&(e=Q.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(n,s){var i;t.subscribe(function(a){return i=a},function(a){return s(a)},function(){return n(i)})})},r.create=function(e){return new r(e)},r}();Ni.Observable=Lc});var Ui=d((Fh,Hi)=>{"use strict";var ki=require("child_process"),Mi=ki.spawn,Fc=ki.exec;Hi.exports=function(r,e,t){if(typeof e=="function"&&t===void 0&&(t=e,e=void 0),r=parseInt(r),Number.isNaN(r)){if(t)return t(new Error("pid must be a number"));throw new Error("pid must be a number")}var n={},s={};switch(n[r]=[],s[r]=1,process.platform){case"win32":Fc("taskkill /pid "+r+" /T /F",t);break;case"darwin":Nn(r,n,s,function(i){return Mi("pgrep",["-P",i])},function(){Vi(n,e,t)});break;default:Nn(r,n,s,function(i){return Mi("ps",["-o","pid","--no-headers","--ppid",i])},function(){Vi(n,e,t)});break}};function Vi(r,e,t){var n={};try{Object.keys(r).forEach(function(s){r[s].forEach(function(i){n[i]||(qi(i,e),n[i]=1)}),n[s]||(qi(s,e),n[s]=1)})}catch(s){if(t)return t(s);throw s}if(t)return t()}function qi(r,e){try{process.kill(parseInt(r,10),e)}catch(t){if(t.code!=="ESRCH")throw t}}function Nn(r,e,t,n,s){var i=n(r),a="";i.stdout.on("data",function(o){var o=o.toString("ascii");a+=o});var l=function(u){if(delete t[r],u!=0){Object.keys(t).length==0&&s();return}a.match(/\d+/g).forEach(function(o){o=parseInt(o,10),e[r].push(o),e[o]=[],t[o]=1,Nn(o,e,t,n,s)})};i.on("close",l)}});var qn=d(D=>{"use strict";var Mn=D&&D.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(c){try{o(n.next(c))}catch(f){a(f)}}function u(c){try{o(n.throw(c))}catch(f){a(f)}}function o(c){c.done?i(c.value):s(c.value).then(l,u)}o((n=n.apply(r,e||[])).next())})};Object.defineProperty(D,"__esModule",{value:!0});D.CliCommandExecution=D.KILL_CODE=D.CANCELLATION_INTERVAL=D.NO_STDERR_ERROR=D.NO_STDOUT_ERROR=D.NO_PID_ERROR=void 0;var vt=Ge(),Ic=Ui();D.NO_PID_ERROR="No process associated with sfdx command.";D.NO_STDOUT_ERROR="No stdout found for childProcess";D.NO_STDERR_ERROR="No stderr found for childProcess";D.CANCELLATION_INTERVAL=1e3;D.KILL_CODE="SIGKILL";var Vn=class{constructor(e,t,n){if(this.command=e,this.cancellationToken=n,!t.pid)throw new Error(D.NO_PID_ERROR);this.childProcessPid=t.pid;let s;if(this.processExitSubject=vt.Observable.fromEvent(t,"exit"),this.processExitSubject.subscribe(()=>{s&&s.unsubscribe()}),this.processErrorSubject=vt.Observable.fromEvent(t,"error"),this.processErrorSubject.subscribe(()=>{s&&s.unsubscribe()}),!t.stdout)throw new Error(D.NO_STDOUT_ERROR);if(this.stdoutSubject=vt.Observable.fromEvent(t.stdout,"data"),!t.stderr)throw new Error(D.NO_STDERR_ERROR);this.stderrSubject=vt.Observable.fromEvent(t.stderr,"data"),n&&(s=vt.Observable.interval(D.CANCELLATION_INTERVAL).subscribe(()=>Mn(this,void 0,void 0,function*(){if(n.isCancellationRequested)try{yield this.killExecution()}catch(a){console.log(a)}})))}killExecution(e=D.KILL_CODE){return Mn(this,void 0,void 0,function*(){return Dc(this.childProcessPid,e)})}};D.CliCommandExecution=Vn;function Dc(r,e){return Mn(this,void 0,void 0,function*(){return new Promise((t,n)=>{Ic(r,e,s=>{s?n(s):t()})})})}});var Gi=d(sr=>{"use strict";var Pc=sr&&sr.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Nc=Ge(),Mc=wn(),Vc=Kt(),ji=Qt(),qc=tr(),Bi=Object.prototype.toString;function kc(r){return!!r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function Hc(r){return!!r&&typeof r.on=="function"&&typeof r.off=="function"}function Uc(r){return!!r&&Bi.call(r)==="[object NodeList]"}function jc(r){return!!r&&Bi.call(r)==="[object HTMLCollection]"}function Bc(r){return!!r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}var Gc=function(r){Pc(e,r);function e(t,n,s,i){r.call(this),this.sourceObj=t,this.eventName=n,this.selector=s,this.options=i}return e.create=function(t,n,s,i){return Vc.isFunction(s)&&(i=s,s=void 0),new e(t,n,i,s)},e.setupSubscription=function(t,n,s,i,a){var l;if(Uc(t)||jc(t))for(var u=0,o=t.length;u<o;u++)e.setupSubscription(t[u],n,s,i,a);else if(Bc(t)){var c=t;t.addEventListener(n,s,a),l=function(){return c.removeEventListener(n,s,a)}}else if(Hc(t)){var f=t;t.on(n,s),l=function(){return f.off(n,s)}}else if(kc(t)){var h=t;t.addListener(n,s),l=function(){return h.removeListener(n,s)}}else throw new TypeError("Invalid event target");i.add(new qc.Subscription(l))},e.prototype._subscribe=function(t){var n=this.sourceObj,s=this.eventName,i=this.options,a=this.selector,l=a?function(){for(var u=[],o=0;o<arguments.length;o++)u[o-0]=arguments[o];var c=Mc.tryCatch(a).apply(void 0,u);c===ji.errorObject?t.error(ji.errorObject.e):t.next(c)}:function(u){return t.next(u)};e.setupSubscription(n,s,l,t,i)},e}(Nc.Observable);sr.FromEventObservable=Gc});var zi=d($i=>{"use strict";var $c=Gi();$i.fromEvent=$c.FromEventObservable.create});var Xi=d(()=>{"use strict";var zc=Ge(),Xc=zi();zc.Observable.fromEvent=Xc.fromEvent});var Ji=d(Yi=>{"use strict";var Yc=Rn();function Jc(r){return!Yc.isArray(r)&&r-parseFloat(r)+1>=0}Yi.isNumeric=Jc});var Wi=d(ir=>{"use strict";var Wc=ir&&ir.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Kc=tr(),Qc=function(r){Wc(e,r);function e(t,n){r.call(this)}return e.prototype.schedule=function(t,n){return n===void 0&&(n=0),this},e}(Kc.Subscription);ir.Action=Qc});var Qi=d(or=>{"use strict";var Zc=or&&or.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},Ki=mt(),el=Wi(),tl=function(r){Zc(e,r);function e(t,n){r.call(this,t,n),this.scheduler=t,this.pending=!1,this.work=n}return e.prototype.schedule=function(t,n){if(n===void 0&&(n=0),this.closed)return this;this.state=t,this.pending=!0;var s=this.id,i=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(i,s,n)),this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this},e.prototype.requestAsyncId=function(t,n,s){return s===void 0&&(s=0),Ki.root.setInterval(t.flush.bind(t,this),s)},e.prototype.recycleAsyncId=function(t,n,s){return s===void 0&&(s=0),s!==null&&this.delay===s&&this.pending===!1?n:Ki.root.clearInterval(n)&&void 0||void 0},e.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(t,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,n){var s=!1,i=void 0;try{this.work(t)}catch(a){s=!0,i=!!a&&a||new Error(a)}if(s)return this.unsubscribe(),i},e.prototype._unsubscribe=function(){var t=this.id,n=this.scheduler,s=n.actions,i=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&s.splice(i,1),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null},e}(el.Action);or.AsyncAction=tl});var eo=d(Zi=>{"use strict";var rl=function(){function r(e,t){t===void 0&&(t=r.now),this.SchedulerAction=e,this.now=t}return r.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},r.now=Date.now?Date.now:function(){return+new Date},r}();Zi.Scheduler=rl});var to=d(ar=>{"use strict";var nl=ar&&ar.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},sl=eo(),il=function(r){nl(e,r);function e(){r.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return e.prototype.flush=function(t){var n=this.actions;if(this.active){n.push(t);return}var s;this.active=!0;do if(s=t.execute(t.state,t.delay))break;while(t=n.shift());if(this.active=!1,s){for(;t=n.shift();)t.unsubscribe();throw s}},e}(sl.Scheduler);ar.AsyncScheduler=il});var no=d(ro=>{"use strict";var ol=Qi(),al=to();ro.async=new al.AsyncScheduler(ol.AsyncAction)});var so=d(ur=>{"use strict";var ul=ur&&ur.__extends||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},cl=Ji(),ll=Ge(),kn=no(),fl=function(r){ul(e,r);function e(t,n){t===void 0&&(t=0),n===void 0&&(n=kn.async),r.call(this),this.period=t,this.scheduler=n,(!cl.isNumeric(t)||t<0)&&(this.period=0),(!n||typeof n.schedule!="function")&&(this.scheduler=kn.async)}return e.create=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=kn.async),new e(t,n)},e.dispatch=function(t){var n=t.index,s=t.subscriber,i=t.period;s.next(n),!s.closed&&(t.index+=1,this.schedule(t,i))},e.prototype._subscribe=function(t){var n=0,s=this.period,i=this.scheduler;t.add(i.schedule(e.dispatch,s,{index:n,subscriber:t,period:s}))},e}(ll.Observable);ur.IntervalObservable=fl});var oo=d(io=>{"use strict";var pl=so();io.interval=pl.IntervalObservable.create});var ao=d(()=>{"use strict";var hl=Ge(),dl=oo();hl.Observable.interval=dl.interval});var uo=d(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.TELEMETRY_HEADER=R.SFDX_CONFIG_ISV_DEBUGGER_URL=R.SFDX_CONFIG_ISV_DEBUGGER_SID=R.SFDX_COMMAND=R.MISSING_LABEL_MSG=R.LOCALE_JA=R.DEFAULT_LOCALE=R.BASE_FILE_EXTENSION=R.BASE_FILE_NAME=R.ENV_SFDX_INSTANCE_URL=R.ENV_HTTPS_PROXY=R.ENV_HTTP_PROXY=R.ENV_SFDX_DEFAULTUSERNAME=R.DEFAULT_CONNECTION_TIMEOUT_MS=R.CLIENT_ID=void 0;R.CLIENT_ID="sfdx-vscode";R.DEFAULT_CONNECTION_TIMEOUT_MS=2e4;R.ENV_SFDX_DEFAULTUSERNAME="SFDX_DEFAULTUSERNAME";R.ENV_HTTP_PROXY="HTTP_PROXY";R.ENV_HTTPS_PROXY="HTTPS_PROXY";R.ENV_SFDX_INSTANCE_URL="SFDX_INSTANCE_URL";R.BASE_FILE_NAME="i18n";R.BASE_FILE_EXTENSION="js";R.DEFAULT_LOCALE="en";R.LOCALE_JA="ja";R.MISSING_LABEL_MSG="!!! MISSING LABEL !!!";R.SFDX_COMMAND="sfdx";R.SFDX_CONFIG_ISV_DEBUGGER_SID="isvDebuggerSid";R.SFDX_CONFIG_ISV_DEBUGGER_URL="isvDebuggerUrl";R.TELEMETRY_HEADER="salesforce-vscode-extensions"});var $e=d(Ee=>{"use strict";var gl=Ee&&Ee.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ml=Ee&&Ee.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&gl(e,r,t)};Object.defineProperty(Ee,"__esModule",{value:!0});ml(uo(),Ee)});var Hn=d(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.GlobalCliEnvironment=void 0;var cr=class{};lr.GlobalCliEnvironment=cr;cr.environmentVariables=new Map});var ho=d((Wh,po)=>{po.exports=fo;fo.sync=vl;var co=require("fs");function bl(r,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var n=0;n<t.length;n++){var s=t[n].toLowerCase();if(s&&r.substr(-s.length).toLowerCase()===s)return!0}return!1}function lo(r,e,t){return!r.isSymbolicLink()&&!r.isFile()?!1:bl(e,t)}function fo(r,e,t){co.stat(r,function(n,s){t(n,n?!1:lo(s,r,e))})}function vl(r,e){return lo(co.statSync(r),r,e)}});var _o=d((Kh,vo)=>{vo.exports=mo;mo.sync=_l;var go=require("fs");function mo(r,e,t){go.stat(r,function(n,s){t(n,n?!1:bo(s,e))})}function _l(r,e){return bo(go.statSync(r),e)}function bo(r,e){return r.isFile()&&yl(r,e)}function yl(r,e){var t=r.mode,n=r.uid,s=r.gid,i=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),u=parseInt("010",8),o=parseInt("001",8),c=l|u,f=t&o||t&u&&s===a||t&l&&n===i||t&c&&i===0;return f}});var Eo=d((Zh,yo)=>{var Qh=require("fs"),fr;process.platform==="win32"||global.TESTING_WINDOWS?fr=ho():fr=_o();yo.exports=Un;Un.sync=El;function Un(r,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,s){Un(r,e||{},function(i,a){i?s(i):n(a)})})}fr(r,e||{},function(n,s){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,s=!1),t(n,s)})}function El(r,e){try{return fr.sync(r,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var Ao=d((ed,To)=>{var ze=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Co=require("path"),Cl=ze?";":":",So=Eo(),xo=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),Ro=(r,e)=>{let t=e.colon||Cl,n=r.match(/\//)||ze&&r.match(/\\/)?[""]:[...ze?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(t)],s=ze?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=ze?s.split(t):[""];return ze&&r.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:s}},wo=(r,e,t)=>{typeof e=="function"&&(t=e,e={}),e||(e={});let{pathEnv:n,pathExt:s,pathExtExe:i}=Ro(r,e),a=[],l=o=>new Promise((c,f)=>{if(o===n.length)return e.all&&a.length?c(a):f(xo(r));let h=n[o],g=/^".*"$/.test(h)?h.slice(1,-1):h,v=Co.join(g,r),_=!g&&/^\.[\\\/]/.test(r)?r.slice(0,2)+v:v;c(u(_,o,0))}),u=(o,c,f)=>new Promise((h,g)=>{if(f===s.length)return h(l(c+1));let v=s[f];So(o+v,{pathExt:i},(_,A)=>{if(!_&&A)if(e.all)a.push(o+v);else return h(o+v);return h(u(o,c,f+1))})});return t?l(0).then(o=>t(null,o),t):l(0)},Sl=(r,e)=>{e=e||{};let{pathEnv:t,pathExt:n,pathExtExe:s}=Ro(r,e),i=[];for(let a=0;a<t.length;a++){let l=t[a],u=/^".*"$/.test(l)?l.slice(1,-1):l,o=Co.join(u,r),c=!u&&/^\.[\\\/]/.test(r)?r.slice(0,2)+o:o;for(let f=0;f<n.length;f++){let h=c+n[f];try{if(So.sync(h,{pathExt:s}))if(e.all)i.push(h);else return h}catch{}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw xo(r)};To.exports=wo;wo.sync=Sl});var Lo=d((td,jn)=>{"use strict";var Oo=(r={})=>{let e=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"};jn.exports=Oo;jn.exports.default=Oo});var Po=d((rd,Do)=>{"use strict";var Fo=require("path"),xl=Ao(),Rl=Lo();function Io(r,e){let t=r.options.env||process.env,n=process.cwd(),s=r.options.cwd!=null,i=s&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(r.options.cwd)}catch{}let a;try{a=xl.sync(r.command,{path:t[Rl({env:t})],pathExt:e?Fo.delimiter:void 0})}catch{}finally{i&&process.chdir(n)}return a&&(a=Fo.resolve(s?r.options.cwd:"",a)),a}function wl(r){return Io(r)||Io(r,!0)}Do.exports=wl});var No=d((nd,Gn)=>{"use strict";var Bn=/([()\][%!^"`<>&|;, *?])/g;function Tl(r){return r=r.replace(Bn,"^$1"),r}function Al(r,e){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(Bn,"^$1"),e&&(r=r.replace(Bn,"^$1")),r}Gn.exports.command=Tl;Gn.exports.argument=Al});var Vo=d((sd,Mo)=>{"use strict";Mo.exports=/^#!(.*)/});var ko=d((id,qo)=>{"use strict";var Ol=Vo();qo.exports=(r="")=>{let e=r.match(Ol);if(!e)return null;let[t,n]=e[0].replace(/#! ?/,"").split(" "),s=t.split("/").pop();return s==="env"?n:n?`${s} ${n}`:s}});var Uo=d((od,Ho)=>{"use strict";var $n=require("fs"),Ll=ko();function Fl(r){let t=Buffer.alloc(150),n;try{n=$n.openSync(r,"r"),$n.readSync(n,t,0,150,0),$n.closeSync(n)}catch{}return Ll(t.toString())}Ho.exports=Fl});var $o=d((ad,Go)=>{"use strict";var Il=require("path"),jo=Po(),Bo=No(),Dl=Uo(),Pl=process.platform==="win32",Nl=/\.(?:com|exe)$/i,Ml=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Vl(r){r.file=jo(r);let e=r.file&&Dl(r.file);return e?(r.args.unshift(r.file),r.command=e,jo(r)):r.file}function ql(r){if(!Pl)return r;let e=Vl(r),t=!Nl.test(e);if(r.options.forceShell||t){let n=Ml.test(e);r.command=Il.normalize(r.command),r.command=Bo.command(r.command),r.args=r.args.map(i=>Bo.argument(i,n));let s=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${s}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function kl(r,e,t){e&&!Array.isArray(e)&&(t=e,e=null),e=e?e.slice(0):[],t=Object.assign({},t);let n={command:r,args:e,options:t,file:void 0,original:{command:r,args:e}};return t.shell?n:ql(n)}Go.exports=kl});var Yo=d((ud,Xo)=>{"use strict";var zn=process.platform==="win32";function Xn(r,e){return Object.assign(new Error(`${e} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${r.command}`,path:r.command,spawnargs:r.args})}function Hl(r,e){if(!zn)return;let t=r.emit;r.emit=function(n,s){if(n==="exit"){let i=zo(s,e,"spawn");if(i)return t.call(r,"error",i)}return t.apply(r,arguments)}}function zo(r,e){return zn&&r===1&&!e.file?Xn(e.original,"spawn"):null}function Ul(r,e){return zn&&r===1&&!e.file?Xn(e.original,"spawnSync"):null}Xo.exports={hookChildProcess:Hl,verifyENOENT:zo,verifyENOENTSync:Ul,notFoundError:Xn}});var Ko=d((cd,Xe)=>{"use strict";var Jo=require("child_process"),Yn=$o(),Jn=Yo();function Wo(r,e,t){let n=Yn(r,e,t),s=Jo.spawn(n.command,n.args,n.options);return Jn.hookChildProcess(s,n),s}function jl(r,e,t){let n=Yn(r,e,t),s=Jo.spawnSync(n.command,n.args,n.options);return s.error=s.error||Jn.verifyENOENTSync(s.status,n),s}Xe.exports=Wo;Xe.exports.spawn=Wo;Xe.exports.sync=jl;Xe.exports._parse=Yn;Xe.exports._enoent=Jn});var hr=d(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.CliCommandExecutor=void 0;Xi();ao();var Bl=$e(),Gl=qn(),$l=Hn(),zl=Ko(),_t=class{constructor(e,t,n=!0){this.command=e,this.options=n?_t.patchEnv(t,$l.GlobalCliEnvironment.environmentVariables):t}static patchEnv(e,t){let n=Object.create(null);return Object.assign(n,process.env),t.forEach((s,i)=>{n[i]=s}),n&&(n.SFDX_TOOL=Bl.TELEMETRY_HEADER),typeof e.env!="undefined"&&Object.assign(n,e.env),e.env=n,e}execute(e){let t=zl(this.command.command,this.command.args,this.options);return new Gl.CliCommandExecution(this.command,t,e)}};pr.CliCommandExecutor=_t});var Qo=d(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.Command=void 0;var Wn=class{constructor(e){this.command=e.command,this.description=e.description,this.args=e.args,this.logName=e.logName}toString(){return this.description?this.description:`${this.command} ${this.args.join(" ")}`}toCommand(){return`${this.command} ${this.args.join(" ")}`}};dr.Command=Wn});var Qn=d(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.CommandBuilder=X.FATAL=X.LOG_LEVEL_FLAG=X.JSON_FLAG=void 0;var Xl=Qo();X.JSON_FLAG="--json";X.LOG_LEVEL_FLAG="--loglevel";X.FATAL="fatal";var Kn=class{constructor(e){this.args=[],this.command=e}withDescription(e){return this.description=e,this}withArg(e){return e===X.JSON_FLAG?this.withJson():this.args.push(e),this}withFlag(e,t){return this.args.push(e,t),this}withJson(){return this.args.push(X.JSON_FLAG),this.args.push(X.LOG_LEVEL_FLAG,X.FATAL),this}withLogName(e){return this.logName=e,this}build(){return new Xl.Command(this)}};X.CommandBuilder=Kn});var gr=d(Ye=>{"use strict";var Yl=Ye&&Ye.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(c){try{o(n.next(c))}catch(f){a(f)}}function u(c){try{o(n.throw(c))}catch(f){a(f)}}function o(c){c.done?i(c.value):s(c.value).then(l,u)}o((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.CommandOutput=void 0;var Zn=class{constructor(){this.stdoutBuffer="",this.stderrBuffer=""}getCmdResult(e){return Yl(this,void 0,void 0,function*(){return e.stdoutSubject.subscribe(t=>{this.stdoutBuffer+=t.toString()}),e.stderrSubject.subscribe(t=>{this.stderrBuffer+=t.toString()}),new Promise((t,n)=>{e.processExitSubject.subscribe(s=>s!==void 0&&String(s)==="0"?t(this.stdoutBuffer):n(this.stderrBuffer||this.stdoutBuffer))})})}};Ye.CommandOutput=Zn});var br=d(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.SfdxCommandBuilder=void 0;var Jl=$e(),Wl=Qn(),es=class extends Wl.CommandBuilder{constructor(){super(Jl.SFDX_COMMAND)}};mr.SfdxCommandBuilder=es});var Zo=d(Je=>{"use strict";var Kl=Je&&Je.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(c){try{o(n.next(c))}catch(f){a(f)}}function u(c){try{o(n.throw(c))}catch(f){a(f)}}function o(c){c.done?i(c.value):s(c.value).then(l,u)}o((n=n.apply(r,e||[])).next())})};Object.defineProperty(Je,"__esModule",{value:!0});Je.ForceOrgDisplay=void 0;var Ql=br(),Zl=hr(),ef=gr(),ts=class{getOrgInfo(e){return Kl(this,void 0,void 0,function*(){let t=new Zl.CliCommandExecutor(new Ql.SfdxCommandBuilder().withArg("force:org:display").withJson().build(),{cwd:e}).execute(),s=yield new ef.CommandOutput().getCmdResult(t);try{let i=JSON.parse(s).result;return Promise.resolve(i)}catch(i){return Promise.reject(s)}})}};Je.ForceOrgDisplay=ts});var ea=d(We=>{"use strict";var tf=We&&We.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(c){try{o(n.next(c))}catch(f){a(f)}}function u(c){try{o(n.throw(c))}catch(f){a(f)}}function o(c){c.done?i(c.value):s(c.value).then(l,u)}o((n=n.apply(r,e||[])).next())})};Object.defineProperty(We,"__esModule",{value:!0});We.ForceConfigGet=void 0;var rf=hr(),nf=gr(),sf=br(),rs=class{getConfig(e,...t){return tf(this,void 0,void 0,function*(){let n=new sf.SfdxCommandBuilder().withArg("force:config:get");t.forEach(l=>n.withArg(l));let s=new rf.CliCommandExecutor(n.withJson().build(),{cwd:e}).execute(),a=yield new nf.CommandOutput().getCmdResult(s);try{let l=new Map;return JSON.parse(a).result.forEach(o=>l.set(o.key,o.value)),Promise.resolve(l)}catch(l){return Promise.reject(l)}})}};We.ForceConfigGet=rs});var ta=d(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.ForceConfigGet=k.SfdxCommandBuilder=k.GlobalCliEnvironment=k.ForceOrgDisplay=k.CommandOutput=k.CommandBuilder=k.CliCommandExecutor=k.CliCommandExecution=void 0;var of=qn();Object.defineProperty(k,"CliCommandExecution",{enumerable:!0,get:function(){return of.CliCommandExecution}});var af=hr();Object.defineProperty(k,"CliCommandExecutor",{enumerable:!0,get:function(){return af.CliCommandExecutor}});var uf=Qn();Object.defineProperty(k,"CommandBuilder",{enumerable:!0,get:function(){return uf.CommandBuilder}});var cf=gr();Object.defineProperty(k,"CommandOutput",{enumerable:!0,get:function(){return cf.CommandOutput}});var lf=Zo();Object.defineProperty(k,"ForceOrgDisplay",{enumerable:!0,get:function(){return lf.ForceOrgDisplay}});var ff=Hn();Object.defineProperty(k,"GlobalCliEnvironment",{enumerable:!0,get:function(){return ff.GlobalCliEnvironment}});var pf=br();Object.defineProperty(k,"SfdxCommandBuilder",{enumerable:!0,get:function(){return pf.SfdxCommandBuilder}});var hf=ea();Object.defineProperty(k,"ForceConfigGet",{enumerable:!0,get:function(){return hf.ForceConfigGet}})});var ra=d(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.extractJsonObject=void 0;function df(r){let e=r.substring(r.indexOf("{"),r.lastIndexOf("}")+1);return JSON.parse(e)}vr.extractJsonObject=df});var na=d(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.extractJsonObject=void 0;var gf=ra();Object.defineProperty(_r,"extractJsonObject",{enumerable:!0,get:function(){return gf.extractJsonObject}})});var sa=d(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.Localization=void 0;var ns=class{constructor(e){this.delegate=e}localize(e,...t){return this.delegate.localize(e,...t)}};yr.Localization=ns});var ia=d(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.Message=void 0;var mf=require("util"),bf=$e(),ss=class{constructor(e,t){this.messages=e,this.delegate=t}localize(e,...t){let n=this.getLabel(e);if(!n)return console.warn(`Missing label for key: ${e}`),n=`${bf.MISSING_LABEL_MSG} ${e}`,t.length>=1&&t.forEach(i=>{n+=` (${i})`}),n;let s=t;if(t.length>=1){let i=n.split("%s").length-1;return t.length!==i&&(console.log(`Arguments do not match for label '${e}', got ${t.length} but want ${i}`),t.length>i&&(s=t.slice(0,-(t.length-i)))),(0,mf.format)(n,...s)}return n}getLabel(e){return this.messages[e]?this.messages[e]:this.delegate?this.delegate.messages[e]:void 0}};Er.Message=ss});var oa=d(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.Message=Ke.Localization=void 0;var vf=sa();Object.defineProperty(Ke,"Localization",{enumerable:!0,get:function(){return vf.Localization}});var _f=ia();Object.defineProperty(Ke,"Message",{enumerable:!0,get:function(){return _f.Message}})});var aa=d(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.BaseCommand=void 0;var is=class{constructor(e){this.queryString=e}getQueryString(){return this.queryString}};Cr.BaseCommand=is});var la=d(()=>{"use strict";var ca=require("url"),Ce=require("https"),ua="__agent_base_https_request_patched__";Ce.request[ua]||(Ce.request=function(r){return function(e,t){let n;return typeof e=="string"?n=ca.parse(e):n=Object.assign({},e),n.port==null&&(n.port=443),n.secureEndpoint=!0,r.call(Ce,n,t)}}(Ce.request),Ce.request[ua]=!0);Ce.get=function(r,e,t){let n;typeof r=="string"&&e&&typeof e!="function"?n=Object.assign({},ca.parse(r),e):!e&&!t?n=r:t||(n=r,t=e);let s=Ce.request(n,t);return s.end(),s}});var fa=d((os,as)=>{(function(r,e){typeof os=="object"&&typeof as<"u"?as.exports=e():typeof define=="function"&&define.amd?define(e):r.ES6Promise=e()})(os,function(){"use strict";function r(p){var m=typeof p;return p!==null&&(m==="object"||m==="function")}function e(p){return typeof p=="function"}var t=void 0;Array.isArray?t=Array.isArray:t=function(p){return Object.prototype.toString.call(p)==="[object Array]"};var n=t,s=0,i=void 0,a=void 0,l=function(m,b){P[s]=m,P[s+1]=b,s+=2,s===2&&(a?a(K):oe())};function u(p){a=p}function o(p){l=p}var c=typeof window<"u"?window:void 0,f=c||{},h=f.MutationObserver||f.WebKitMutationObserver,g=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",v=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function _(){return function(){return process.nextTick(K)}}function A(){return typeof i<"u"?function(){i(K)}:O()}function V(){var p=0,m=new h(K),b=document.createTextNode("");return m.observe(b,{characterData:!0}),function(){b.data=p=++p%2}}function U(){var p=new MessageChannel;return p.port1.onmessage=K,function(){return p.port2.postMessage(0)}}function O(){var p=setTimeout;return function(){return p(K,1)}}var P=new Array(1e3);function K(){for(var p=0;p<s;p+=2){var m=P[p],b=P[p+1];m(b),P[p]=void 0,P[p+1]=void 0}s=0}function ve(){try{var p=Function("return this")().require("vertx");return i=p.runOnLoop||p.runOnContext,A()}catch{return O()}}var oe=void 0;g?oe=_():h?oe=V():v?oe=U():c===void 0&&typeof require=="function"?oe=ve():oe=O();function Fe(p,m){var b=this,y=new this.constructor(Ie);y[Nt]===void 0&&Os(y);var E=b._state;if(E){var C=arguments[E-1];l(function(){return Ts(E,y,C,b._result)})}else jr(b,y,p,m);return y}function Ur(p){var m=this;if(p&&typeof p=="object"&&p.constructor===m)return p;var b=new m(Ie);return pt(b,p),b}var Nt=Math.random().toString(36).substring(2);function Ie(){}var De=void 0,ft=1,Pe=2;function Tu(){return new TypeError("You cannot resolve a promise with itself")}function Au(){return new TypeError("A promises callback cannot return that same promise.")}function Ou(p,m,b,y){try{p.call(m,b,y)}catch(E){return E}}function Lu(p,m,b){l(function(y){var E=!1,C=Ou(b,m,function(q){E||(E=!0,m!==q?pt(y,q):ue(y,q))},function(q){E||(E=!0,G(y,q))},"Settle: "+(y._label||" unknown promise"));!E&&C&&(E=!0,G(y,C))},p)}function Fu(p,m){m._state===ft?ue(p,m._result):m._state===Pe?G(p,m._result):jr(m,void 0,function(b){return pt(p,b)},function(b){return G(p,b)})}function ws(p,m,b){m.constructor===p.constructor&&b===Fe&&m.constructor.resolve===Ur?Fu(p,m):b===void 0?ue(p,m):e(b)?Lu(p,m,b):ue(p,m)}function pt(p,m){if(p===m)G(p,Tu());else if(r(m)){var b=void 0;try{b=m.then}catch(y){G(p,y);return}ws(p,m,b)}else ue(p,m)}function Iu(p){p._onerror&&p._onerror(p._result),Br(p)}function ue(p,m){p._state===De&&(p._result=m,p._state=ft,p._subscribers.length!==0&&l(Br,p))}function G(p,m){p._state===De&&(p._state=Pe,p._result=m,l(Iu,p))}function jr(p,m,b,y){var E=p._subscribers,C=E.length;p._onerror=null,E[C]=m,E[C+ft]=b,E[C+Pe]=y,C===0&&p._state&&l(Br,p)}function Br(p){var m=p._subscribers,b=p._state;if(m.length!==0){for(var y=void 0,E=void 0,C=p._result,q=0;q<m.length;q+=3)y=m[q],E=m[q+b],y?Ts(b,y,E,C):E(C);p._subscribers.length=0}}function Ts(p,m,b,y){var E=e(b),C=void 0,q=void 0,Ne=!0;if(E){try{C=b(y)}catch(Mt){Ne=!1,q=Mt}if(m===C){G(m,Au());return}}else C=y;m._state!==De||(E&&Ne?pt(m,C):Ne===!1?G(m,q):p===ft?ue(m,C):p===Pe&&G(m,C))}function Du(p,m){try{m(function(y){pt(p,y)},function(y){G(p,y)})}catch(b){G(p,b)}}var As=0;function Pu(){return As++}function Os(p){p[Nt]=As++,p._state=void 0,p._result=void 0,p._subscribers=[]}function Nu(){return new Error("Array Methods must be provided an Array")}var Mu=function(){function p(m,b){this._instanceConstructor=m,this.promise=new m(Ie),this.promise[Nt]||Os(this.promise),n(b)?(this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),this.length===0?ue(this.promise,this._result):(this.length=this.length||0,this._enumerate(b),this._remaining===0&&ue(this.promise,this._result))):G(this.promise,Nu())}return p.prototype._enumerate=function(b){for(var y=0;this._state===De&&y<b.length;y++)this._eachEntry(b[y],y)},p.prototype._eachEntry=function(b,y){var E=this._instanceConstructor,C=E.resolve;if(C===Ur){var q=void 0,Ne=void 0,Mt=!1;try{q=b.then}catch($r){Mt=!0,Ne=$r}if(q===Fe&&b._state!==De)this._settledAt(b._state,y,b._result);else if(typeof q!="function")this._remaining--,this._result[y]=b;else if(E===z){var Gr=new E(Ie);Mt?G(Gr,Ne):ws(Gr,b,q),this._willSettleAt(Gr,y)}else this._willSettleAt(new E(function($r){return $r(b)}),y)}else this._willSettleAt(C(b),y)},p.prototype._settledAt=function(b,y,E){var C=this.promise;C._state===De&&(this._remaining--,b===Pe?G(C,E):this._result[y]=E),this._remaining===0&&ue(C,this._result)},p.prototype._willSettleAt=function(b,y){var E=this;jr(b,void 0,function(C){return E._settledAt(ft,y,C)},function(C){return E._settledAt(Pe,y,C)})},p}();function Vu(p){return new Mu(this,p).promise}function qu(p){var m=this;return n(p)?new m(function(b,y){for(var E=p.length,C=0;C<E;C++)m.resolve(p[C]).then(b,y)}):new m(function(b,y){return y(new TypeError("You must pass an array to race."))})}function ku(p){var m=this,b=new m(Ie);return G(b,p),b}function Hu(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Uu(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var z=function(){function p(m){this[Nt]=Pu(),this._result=this._state=void 0,this._subscribers=[],Ie!==m&&(typeof m!="function"&&Hu(),this instanceof p?Du(this,m):Uu())}return p.prototype.catch=function(b){return this.then(null,b)},p.prototype.finally=function(b){var y=this,E=y.constructor;return e(b)?y.then(function(C){return E.resolve(b()).then(function(){return C})},function(C){return E.resolve(b()).then(function(){throw C})}):y.then(b,b)},p}();z.prototype.then=Fe,z.all=Vu,z.race=qu,z.resolve=Ur,z.reject=ku,z._setScheduler=u,z._setAsap=o,z._asap=l;function ju(){var p=void 0;if(typeof global<"u")p=global;else if(typeof self<"u")p=self;else try{p=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var m=p.Promise;if(m){var b=null;try{b=Object.prototype.toString.call(m.resolve())}catch{}if(b==="[object Promise]"&&!m.cast)return}p.Promise=z}return z.polyfill=ju,z.Promise=z,z})});var ha=d((wd,pa)=>{"use strict";pa.exports=function(){"use strict";var r=void 0;function e(n){return typeof n=="function"}global!==void 0?r=global:window!==void 0&&window.document?r=window:r=self;var t=function(){if(!r.hasOwnProperty("Promise"))return!1;var n=r.Promise;return!n.hasOwnProperty("resolve")||!n.hasOwnProperty("reject")||!n.hasOwnProperty("all")||!n.hasOwnProperty("race")?!1:function(){var s=void 0,i=new r.Promise(function(a){s=a});return i?e(s):!1}()}();return t?r.Promise:fa().Promise}()});var ga=d((Td,da)=>{"use strict";da.exports=function(){"use strict";var r=ha();function e(t){return t&&typeof t.then=="function"&&typeof t.catch=="function"}return function(n,s){return function(){for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];var u=s&&s.multiArgs,o=void 0;return s&&s.thisArg?o=s.thisArg:s&&(o=s),new r(function(c,f){a.push(function(v){if(v)return f(v);for(var _=arguments.length,A=Array(_>1?_-1:0),V=1;V<_;V++)A[V-1]=arguments[V];if(!u)return c(A[0]);c(A)});var h=n.apply(o,a);e(h)&&c(h)})}}}()});var us=d((Ad,ba)=>{"use strict";la();var yf=require("util").inherits,Ef=ga(),ma=require("events").EventEmitter;ba.exports=Se;function Cf(r){return r&&typeof r.addRequest=="function"}function Se(r,e){if(!(this instanceof Se))return new Se(r,e);ma.call(this),this._promisifiedCallback=!1;let t=e;typeof r=="function"?this.callback=r:r&&(t=r),this.timeout=t&&t.timeout||null,this.options=t}yf(Se,ma);Se.prototype.callback=function(e,t){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')};Se.prototype.addRequest=function(e,t){let n=Object.assign({},t);n.host==null&&(n.host="localhost"),n.port==null&&(n.port=n.secureEndpoint?443:80);let s=Object.assign({},this.options,n);s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,e._last=!0,e.shouldKeepAlive=!1;let i,a=!1,l=this.timeout,u=this.freeSocket;function o(g){e._hadError||(e.emit("error",g),e._hadError=!0)}function c(){i=null,a=!0;let g=new Error('A "socket" was not created for HTTP request before '+l+"ms");g.code="ETIMEOUT",o(g)}function f(g){a||(i!=null&&(clearTimeout(i),i=null),o(g))}function h(g){if(!a)if(i!=null&&(clearTimeout(i),i=null),Cf(g))g.addRequest(e,s);else if(g){let v=function(){u(g,s)};g.on("free",v),e.onSocket(g)}else{let v=new Error("no Duplex stream was returned to agent-base for `"+e.method+" "+e.path+"`");o(v)}}!this._promisifiedCallback&&this.callback.length>=3&&(this.callback=Ef(this.callback,this),this._promisifiedCallback=!0),l>0&&(i=setTimeout(c,l));try{Promise.resolve(this.callback(e,s)).then(h,f)}catch(g){Promise.reject(g).catch(f)}};Se.prototype.freeSocket=function(e,t){e.destroy()}});var _a=d((Od,va)=>{var yt=1e3,Et=yt*60,Ct=Et*60,St=Ct*24,Sf=St*365.25;va.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return xf(r);if(t==="number"&&isNaN(r)===!1)return e.long?wf(r):Rf(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function xf(r){if(r=String(r),!(r.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Sf;case"days":case"day":case"d":return t*St;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ct;case"minutes":case"minute":case"mins":case"min":case"m":return t*Et;case"seconds":case"second":case"secs":case"sec":case"s":return t*yt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Rf(r){return r>=St?Math.round(r/St)+"d":r>=Ct?Math.round(r/Ct)+"h":r>=Et?Math.round(r/Et)+"m":r>=yt?Math.round(r/yt)+"s":r+"ms"}function wf(r){return Sr(r,St,"day")||Sr(r,Ct,"hour")||Sr(r,Et,"minute")||Sr(r,yt,"second")||r+" ms"}function Sr(r,e,t){if(!(r<e))return r<e*1.5?Math.floor(r/e)+" "+t:Math.ceil(r/e)+" "+t+"s"}});var ls=d((S,ya)=>{S=ya.exports=cs.debug=cs.default=cs;S.coerce=If;S.disable=Lf;S.enable=Of;S.enabled=Ff;S.humanize=_a();S.instances=[];S.names=[];S.skips=[];S.formatters={};function Tf(r){var e=0,t;for(t in r)e=(e<<5)-e+r.charCodeAt(t),e|=0;return S.colors[Math.abs(e)%S.colors.length]}function cs(r){var e;function t(){if(!!t.enabled){var n=t,s=+new Date,i=s-(e||s);n.diff=i,n.prev=e,n.curr=s,e=s;for(var a=new Array(arguments.length),l=0;l<a.length;l++)a[l]=arguments[l];a[0]=S.coerce(a[0]),typeof a[0]!="string"&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(c,f){if(c==="%%")return c;u++;var h=S.formatters[f];if(typeof h=="function"){var g=a[u];c=h.call(n,g),a.splice(u,1),u--}return c}),S.formatArgs.call(n,a);var o=t.log||S.log||console.log.bind(console);o.apply(n,a)}}return t.namespace=r,t.enabled=S.enabled(r),t.useColors=S.useColors(),t.color=Tf(r),t.destroy=Af,typeof S.init=="function"&&S.init(t),S.instances.push(t),t}function Af(){var r=S.instances.indexOf(this);return r!==-1?(S.instances.splice(r,1),!0):!1}function Of(r){S.save(r),S.names=[],S.skips=[];var e,t=(typeof r=="string"?r:"").split(/[\s,]+/),n=t.length;for(e=0;e<n;e++)!t[e]||(r=t[e].replace(/\*/g,".*?"),r[0]==="-"?S.skips.push(new RegExp("^"+r.substr(1)+"$")):S.names.push(new RegExp("^"+r+"$")));for(e=0;e<S.instances.length;e++){var s=S.instances[e];s.enabled=S.enabled(s.namespace)}}function Lf(){S.enable("")}function Ff(r){if(r[r.length-1]==="*")return!0;var e,t;for(e=0,t=S.skips.length;e<t;e++)if(S.skips[e].test(r))return!1;for(e=0,t=S.names.length;e<t;e++)if(S.names[e].test(r))return!0;return!1}function If(r){return r instanceof Error?r.stack||r.message:r}});var Sa=d(($,Ca)=>{$=Ca.exports=ls();$.log=Nf;$.formatArgs=Pf;$.save=Mf;$.load=Ea;$.useColors=Df;$.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:Vf();$.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Df(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}$.formatters.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function Pf(r){var e=this.useColors;if(r[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+r[0]+(e?"%c ":" ")+"+"+$.humanize(this.diff),!!e){var t="color: "+this.color;r.splice(1,0,t,"color: inherit");var n=0,s=0;r[0].replace(/%[a-zA-Z%]/g,function(i){i!=="%%"&&(n++,i==="%c"&&(s=n))}),r.splice(s,0,t)}}function Nf(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function Mf(r){try{r==null?$.storage.removeItem("debug"):$.storage.debug=r}catch{}}function Ea(){var r;try{r=$.storage.debug}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}$.enable(Ea());function Vf(){try{return window.localStorage}catch{}}});var Ra=d((Ld,xa)=>{"use strict";xa.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}});var hs=d((Fd,Ta)=>{"use strict";var qf=require("os"),wa=require("tty"),Z=Ra(),{env:H}=process,he;Z("no-color")||Z("no-colors")||Z("color=false")||Z("color=never")?he=0:(Z("color")||Z("colors")||Z("color=true")||Z("color=always"))&&(he=1);"FORCE_COLOR"in H&&(H.FORCE_COLOR==="true"?he=1:H.FORCE_COLOR==="false"?he=0:he=H.FORCE_COLOR.length===0?1:Math.min(parseInt(H.FORCE_COLOR,10),3));function fs(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function ps(r,e){if(he===0)return 0;if(Z("color=16m")||Z("color=full")||Z("color=truecolor"))return 3;if(Z("color=256"))return 2;if(r&&!e&&he===void 0)return 0;let t=he||0;if(H.TERM==="dumb")return t;if(process.platform==="win32"){let n=qf.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in H)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in H)||H.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in H)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(H.TEAMCITY_VERSION)?1:0;if(H.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in H){let n=parseInt((H.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(H.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(H.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(H.TERM)||"COLORTERM"in H?1:t}function kf(r){let e=ps(r,r&&r.isTTY);return fs(e)}Ta.exports={supportsColor:kf,stdout:fs(ps(!0,wa.isatty(1))),stderr:fs(ps(!0,wa.isatty(2)))}});var La=d((M,Oa)=>{var Hf=require("tty"),xr=require("util");M=Oa.exports=ls();M.init=zf;M.log=Gf;M.formatArgs=jf;M.save=$f;M.load=Aa;M.useColors=Uf;M.colors=[6,2,3,4,5,1];try{ds=hs(),ds&&ds.level>=2&&(M.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}var ds;M.inspectOpts=Object.keys(process.env).filter(function(r){return/^debug_/i.test(r)}).reduce(function(r,e){var t=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(s,i){return i.toUpperCase()}),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function Uf(){return"colors"in M.inspectOpts?Boolean(M.inspectOpts.colors):Hf.isatty(process.stderr.fd)}M.formatters.o=function(r){return this.inspectOpts.colors=this.useColors,xr.inspect(r,this.inspectOpts).split(`
`).map(function(e){return e.trim()}).join(" ")};M.formatters.O=function(r){return this.inspectOpts.colors=this.useColors,xr.inspect(r,this.inspectOpts)};function jf(r){var e=this.namespace,t=this.useColors;if(t){var n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i="  "+s+";1m"+e+" \x1B[0m";r[0]=i+r[0].split(`
`).join(`
`+i),r.push(s+"m+"+M.humanize(this.diff)+"\x1B[0m")}else r[0]=Bf()+e+" "+r[0]}function Bf(){return M.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Gf(){return process.stderr.write(xr.format.apply(xr,arguments)+`
`)}function $f(r){r==null?delete process.env.DEBUG:process.env.DEBUG=r}function Aa(){return process.env.DEBUG}function zf(r){r.inspectOpts={};for(var e=Object.keys(M.inspectOpts),t=0;t<e.length;t++)r.inspectOpts[e[t]]=M.inspectOpts[e[t]]}M.enable(Aa())});var Fa=d((Id,gs)=>{typeof process>"u"||process.type==="renderer"?gs.exports=Sa():gs.exports=La()});var Pa=d((Dd,Da)=>{var Xf=require("net"),Yf=require("tls"),ms=require("url"),Ia=us(),Jf=require("util").inherits,Rr=Fa()("http-proxy-agent");Da.exports=xt;function xt(r){if(!(this instanceof xt))return new xt(r);if(typeof r=="string"&&(r=ms.parse(r)),!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Rr("creating new HttpProxyAgent instance: %o",r),Ia.call(this,r);var e=Object.assign({},r);this.secureProxy=e.protocol?/^https:?$/i.test(e.protocol):!1,e.host=e.hostname||e.host,e.port=+e.port||(this.secureProxy?443:80),e.host&&e.path&&(delete e.path,delete e.pathname),this.proxy=e}Jf(xt,Ia);xt.prototype.callback=function(e,t,n){var s=this.proxy,i=ms.parse(e.path);i.protocol==null&&(i.protocol="http:"),i.hostname==null&&(i.hostname=t.hostname||t.host),i.port==null&&(i.port=t.port),i.port==80&&delete i.port;var a=ms.format(i);e.path=a,s.auth&&e.setHeader("Proxy-Authorization","Basic "+Buffer.from(s.auth).toString("base64"));var l;if(this.secureProxy?l=Yf.connect(s):l=Xf.connect(s),e._header&&(Rr("regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0)){Rr("patching connection write() output buffer with updated header");var u=e.output[0],o=u.indexOf(`\r
\r
`)+4;e.output[0]=e._header+u.substring(o),Rr("output buffer: %o",e.output)}n(null,l)}});var Ma=d((Pd,Na)=>{var Qe=1e3,Ze=Qe*60,et=Ze*60,xe=et*24,Wf=xe*7,Kf=xe*365.25;Na.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Qf(r);if(t==="number"&&isFinite(r))return e.long?ep(r):Zf(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Qf(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Kf;case"weeks":case"week":case"w":return t*Wf;case"days":case"day":case"d":return t*xe;case"hours":case"hour":case"hrs":case"hr":case"h":return t*et;case"minutes":case"minute":case"mins":case"min":case"m":return t*Ze;case"seconds":case"second":case"secs":case"sec":case"s":return t*Qe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Zf(r){var e=Math.abs(r);return e>=xe?Math.round(r/xe)+"d":e>=et?Math.round(r/et)+"h":e>=Ze?Math.round(r/Ze)+"m":e>=Qe?Math.round(r/Qe)+"s":r+"ms"}function ep(r){var e=Math.abs(r);return e>=xe?wr(r,e,xe,"day"):e>=et?wr(r,e,et,"hour"):e>=Ze?wr(r,e,Ze,"minute"):e>=Qe?wr(r,e,Qe,"second"):r+" ms"}function wr(r,e,t,n){var s=e>=t*1.5;return Math.round(r/t)+" "+n+(s?"s":"")}});var bs=d((Nd,Va)=>{"use strict";function tp(r){t.debug=t,t.default=t,t.coerce=u,t.disable=a,t.enable=i,t.enabled=l,t.humanize=Ma(),Object.keys(r).forEach(function(o){t[o]=r[o]}),t.instances=[],t.names=[],t.skips=[],t.formatters={};function e(o){for(var c=0,f=0;f<o.length;f++)c=(c<<5)-c+o.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}t.selectColor=e;function t(o){var c;function f(){if(!!f.enabled){for(var h=arguments.length,g=new Array(h),v=0;v<h;v++)g[v]=arguments[v];var _=f,A=Number(new Date),V=A-(c||A);_.diff=V,_.prev=c,_.curr=A,c=A,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var U=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(P,K){if(P==="%%")return P;U++;var ve=t.formatters[K];if(typeof ve=="function"){var oe=g[U];P=ve.call(_,oe),g.splice(U,1),U--}return P}),t.formatArgs.call(_,g);var O=_.log||t.log;O.apply(_,g)}}return f.namespace=o,f.enabled=t.enabled(o),f.useColors=t.useColors(),f.color=e(o),f.destroy=n,f.extend=s,typeof t.init=="function"&&t.init(f),t.instances.push(f),f}function n(){var o=t.instances.indexOf(this);return o!==-1?(t.instances.splice(o,1),!0):!1}function s(o,c){return t(this.namespace+(typeof c>"u"?":":c)+o)}function i(o){t.save(o),t.names=[],t.skips=[];var c,f=(typeof o=="string"?o:"").split(/[\s,]+/),h=f.length;for(c=0;c<h;c++)!f[c]||(o=f[c].replace(/\*/g,".*?"),o[0]==="-"?t.skips.push(new RegExp("^"+o.substr(1)+"$")):t.names.push(new RegExp("^"+o+"$")));for(c=0;c<t.instances.length;c++){var g=t.instances[c];g.enabled=t.enabled(g.namespace)}}function a(){t.enable("")}function l(o){if(o[o.length-1]==="*")return!0;var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(o))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(o))return!0;return!1}function u(o){return o instanceof Error?o.stack||o.message:o}return t.enable(t.load()),t}Va.exports=tp});var qa=d((ee,Ar)=>{"use strict";function Tr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tr=function(t){return typeof t}:Tr=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(r)}ee.log=sp;ee.formatArgs=np;ee.save=ip;ee.load=op;ee.useColors=rp;ee.storage=ap();ee.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function rp(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function np(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Ar.exports.humanize(this.diff),!!this.useColors){var e="color: "+this.color;r.splice(1,0,e,"color: inherit");var t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,function(s){s!=="%%"&&(t++,s==="%c"&&(n=t))}),r.splice(n,0,e)}}function sp(){var r;return(typeof console>"u"?"undefined":Tr(console))==="object"&&console.log&&(r=console).log.apply(r,arguments)}function ip(r){try{r?ee.storage.setItem("debug",r):ee.storage.removeItem("debug")}catch{}}function op(){var r;try{r=ee.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function ap(){try{return localStorage}catch{}}Ar.exports=bs()(ee);var up=Ar.exports.formatters;up.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ha=d((B,Fr)=>{"use strict";var cp=require("tty"),Lr=require("util");B.init=mp;B.log=hp;B.formatArgs=fp;B.save=dp;B.load=gp;B.useColors=lp;B.colors=[6,2,3,4,5,1];try{Or=hs(),Or&&(Or.stderr||Or).level>=2&&(B.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}var Or;B.inspectOpts=Object.keys(process.env).filter(function(r){return/^debug_/i.test(r)}).reduce(function(r,e){var t=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(s,i){return i.toUpperCase()}),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function lp(){return"colors"in B.inspectOpts?Boolean(B.inspectOpts.colors):cp.isatty(process.stderr.fd)}function fp(r){var e=this.namespace,t=this.useColors;if(t){var n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i="  ".concat(s,";1m").concat(e," \x1B[0m");r[0]=i+r[0].split(`
`).join(`
`+i),r.push(s+"m+"+Fr.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=pp()+e+" "+r[0]}function pp(){return B.inspectOpts.hideDate?"":new Date().toISOString()+" "}function hp(){return process.stderr.write(Lr.format.apply(Lr,arguments)+`
`)}function dp(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function gp(){return process.env.DEBUG}function mp(r){r.inspectOpts={};for(var e=Object.keys(B.inspectOpts),t=0;t<e.length;t++)r.inspectOpts[e[t]]=B.inspectOpts[e[t]]}Fr.exports=bs()(B);var ka=Fr.exports.formatters;ka.o=function(r){return this.inspectOpts.colors=this.useColors,Lr.inspect(r,this.inspectOpts).split(`
`).map(function(e){return e.trim()}).join(" ")};ka.O=function(r){return this.inspectOpts.colors=this.useColors,Lr.inspect(r,this.inspectOpts)}});var Ua=d((Md,vs)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vs.exports=qa():vs.exports=Ha()});var za=d((Vd,$a)=>{var ja=require("net"),Ba=require("tls"),bp=require("url"),vp=require("assert"),Ga=us(),_p=require("util").inherits,Re=Ua()("https-proxy-agent");$a.exports=Rt;function Rt(r){if(!(this instanceof Rt))return new Rt(r);if(typeof r=="string"&&(r=bp.parse(r)),!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");Re("creating new HttpsProxyAgent instance: %o",r),Ga.call(this,r);var e=Object.assign({},r);this.secureProxy=e.protocol?/^https:?$/i.test(e.protocol):!1,e.host=e.hostname||e.host,e.port=+e.port||(this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in e)&&(e.ALPNProtocols=["http 1.1"]),e.host&&e.path&&(delete e.path,delete e.pathname),this.proxy=e,this.defaultPort=443}_p(Rt,Ga);Rt.prototype.callback=function(e,t,n){var s=this.proxy,i;this.secureProxy?i=Ba.connect(s):i=ja.connect(s);var a=[],l=0;function u(){var O=i.read();O?g(O):i.once("readable",u)}function o(){i.removeListener("end",f),i.removeListener("error",h),i.removeListener("close",c),i.removeListener("readable",u)}function c(O){Re("onclose had error %o",O)}function f(){Re("onend")}function h(O){o(),n(O)}function g(O){a.push(O),l+=O.length;var P=Buffer.concat(a,l),K=P.toString("ascii");if(!~K.indexOf(`\r
\r
`)){Re("have not received end of HTTP headers yet..."),u();return}var ve=K.substring(0,K.indexOf(`\r
`)),oe=+ve.split(" ")[1];if(Re("got proxy server response: %o",ve),oe==200){var Fe=i;a=P=null,t.secureEndpoint&&(Re("upgrading proxy-connected socket to TLS connection: %o",t.host),t.socket=i,t.servername=t.servername||t.host,t.host=null,t.hostname=null,t.port=null,Fe=Ba.connect(t)),o(),e.once("socket",yp),n(null,Fe)}else o(),i.destroy(),i=new ja.Socket,i.readable=!0,a=P,e.once("socket",v),n(null,i)}function v(O){Re("replaying proxy buffer for failed request"),vp(O.listenerCount("data")>0),O.push(a),a=null}i.on("error",h),i.on("close",c),i.on("end",f),u();var _=t.host+":"+t.port,A="CONNECT "+_+` HTTP/1.1\r
`,V=Object.assign({},s.headers);s.auth&&(V["Proxy-Authorization"]="Basic "+Buffer.from(s.auth).toString("base64"));var U=t.host;Ep(t.port,t.secureEndpoint)||(U+=":"+t.port),V.Host=U,V.Connection="close",Object.keys(V).forEach(function(O){A+=O+": "+V[O]+`\r
`}),i.write(A+`\r
`)};function yp(r){r.resume()}function Ep(r,e){return Boolean(!e&&r===80||e&&r===443)}});var Za=d(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});var ie=require("path"),te=require("fs"),Ja=Object.prototype.toString;function Ir(r){return typeof r<"u"}function Cp(r){return Ja.call(r)==="[object Number]"}function le(r){return Ja.call(r)==="[object String]"}function Sp(r){return r===!0||r===!1}function rt(r){return JSON.parse(te.readFileSync(r,"utf8"))}var tt;(function(r){r.file="file",r.bundle="bundle",r.both="both"})(tt=de.MessageFormat||(de.MessageFormat={}));var Wa;(function(r){r.standalone="standalone",r.languagePack="languagePack"})(Wa=de.BundleFormat||(de.BundleFormat={}));var Xa;(function(r){function e(t){var n=t;return n&&Ir(n.key)&&Ir(n.comment)}r.is=e})(Xa||(Xa={}));var Ka,Dr,x,Pr;function xp(){if(x={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:tt.bundle},le(process.env.VSCODE_NLS_CONFIG))try{var r=JSON.parse(process.env.VSCODE_NLS_CONFIG),e=void 0,t=void 0;if(r.availableLanguages){var n=r.availableLanguages["*"];le(n)&&(e=n)}if(le(r.locale)&&(x.locale=r.locale.toLowerCase()),e===void 0?x.language=x.locale:e!=="en"&&(x.language=e),Sp(r._languagePackSupport)&&(x.languagePackSupport=r._languagePackSupport),le(r._cacheRoot)&&(x.cacheRoot=r._cacheRoot),le(r._languagePackId)&&(x.languagePackId=r._languagePackId),le(r._translationsConfigFile)){x.translationsConfigFile=r._translationsConfigFile;try{x.translationsConfig=rt(x.translationsConfigFile)}catch{if(r._corruptedFile){var s=ie.dirname(r._corruptedFile);te.exists(s,function(a){a&&te.writeFile(r._corruptedFile,"corrupted","utf8",function(l){console.error(l)})})}}}}catch{}Pr=x.locale==="pseudo",Ka=void 0,Dr=Object.create(null)}xp();function Rp(){return x.languagePackSupport===!0&&x.cacheRoot!==void 0&&x.languagePackId!==void 0&&x.translationsConfigFile!==void 0&&x.translationsConfig!==void 0}function Es(r,e){var t;return Pr&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,function(n,s){var i=s[0],a=e[i],l=n;return typeof a=="string"?l=a:(typeof a=="number"||typeof a=="boolean"||a===void 0||a===null)&&(l=String(a)),l}),t}function _s(r){return function(e,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];if(Cp(e)){if(e>=r.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `+new Error("").stack);return}return Es(r[e],n)}else{if(le(t))return console.warn("Message "+t+" didn't get externalized correctly."),Es(t,n);console.error(`Broken localize call found. Stacktrace is
: `+new Error("").stack)}}}function wp(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return Es(e,t)}function Tp(r){var e;if(x.cacheLanguageResolution&&e)e=e;else{if(Pr||!x.language)e=".nls.json";else for(var t=x.language;t;){var n=".nls."+t+".json";if(te.existsSync(r+n)){e=n;break}else{var s=t.lastIndexOf("-");s>0?t=t.substring(0,s):(e=".nls.json",t=null)}}x.cacheLanguageResolution&&(e=e)}return r+e}function Ap(r){for(var e=x.language;e;){var t=ie.join(r,"nls.bundle."+e+".json");if(te.existsSync(t))return t;var n=e.lastIndexOf("-");n>0?e=e.substring(0,n):e=void 0}if(e===void 0){var t=ie.join(r,"nls.bundle.json");if(te.existsSync(t))return t}}function Op(r){var e=rt(ie.join(r,"nls.metadata.json")),t=Object.create(null);for(var n in e){var s=e[n];t[n]=s.messages}return t}function Lp(r,e){var t=x.translationsConfig[r.id];if(!!t){var n=rt(t).contents,s=rt(ie.join(e,"nls.metadata.json")),i=Object.create(null);for(var a in s){var l=s[a],u=n[r.outDir+"/"+a];if(u){for(var o=[],c=0;c<l.keys.length;c++){var f=l.keys[c],h=le(f)?f:f.key,g=u[h];g===void 0&&(g=l.messages[c]),o.push(g)}i[a]=o}else i[a]=l.messages}return i}}function Fp(r){var e=new Date;te.utimes(r,e,e,function(){})}function ys(r,e){return Dr[r]=e,e}function Ip(r,e){var t,n=ie.join(x.cacheRoot,r.id+"-"+r.hash+".json"),s=!1,i=!1;try{return t=JSON.parse(te.readFileSync(n,{encoding:"utf8",flag:"r"})),Fp(n),t}catch(a){if(a.code==="ENOENT")i=!0;else if(a instanceof SyntaxError)console.log("Syntax error parsing message bundle: "+a.message+"."),te.unlink(n,function(l){l&&console.error("Deleting corrupted bundle "+n+" failed.")}),s=!0;else throw a}if(t=Lp(r,e),!t||s)return t;if(i)try{te.writeFileSync(n,JSON.stringify(t),{encoding:"utf8",flag:"wx"})}catch(a){if(a.code==="EEXIST")return t;throw a}return t}function Ya(r){try{return Op(r)}catch(e){console.log("Generating default bundle from meta data failed.",e);return}}function Dp(r,e){var t;if(Rp())try{t=Ip(r,e)}catch(s){console.log("Load or create bundle failed ",s)}if(!t){if(x.languagePackSupport)return Ya(e);var n=Ap(e);if(n)try{return rt(n)}catch(s){console.log("Loading in the box message bundle failed.",s)}t=Ya(e)}return t}function Pp(r){for(var e,t=ie.dirname(r);e=ie.join(t,"nls.metadata.header.json"),!te.existsSync(e);){var n=ie.dirname(t);if(n===t){e=void 0;break}else t=n}return e}function Qa(r){if(!r)return wp;var e=ie.extname(r);if(e&&(r=r.substr(0,r.length-e.length)),x.messageFormat===tt.both||x.messageFormat===tt.bundle){var t=Pp(r);if(t){var n=ie.dirname(t),s=Dr[n];if(s===void 0)try{var i=JSON.parse(te.readFileSync(t,"utf8"));try{var a=Dp(i,n);s=ys(n,a?{header:i,nlsBundle:a}:null)}catch(c){console.error("Failed to load nls bundle",c),s=ys(n,null)}}catch(c){console.error("Failed to read header file",c),s=ys(n,null)}if(s){var l=r.substr(n.length+1).replace(/\\/g,"/"),u=s.nlsBundle[l];return u===void 0?(console.error("Messages for file "+r+" not found. See console for details."),function(){return"Messages not found."}):_s(u)}}}if(x.messageFormat===tt.both||x.messageFormat===tt.file)try{var o=rt(Tp(r));return Array.isArray(o)?_s(o):Ir(o.messages)&&Ir(o.keys)?_s(o.messages):(console.error("String bundle '"+r+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(c){c.code!=="ENOENT"&&console.error("Failed to load single file bundle",c)}return console.error("Failed to load message bundle for file "+r),function(){return"Failed to load message bundle. See console for details."}}de.loadMessageBundle=Qa;function Np(r){return r&&(le(r.locale)&&(x.locale=r.locale.toLowerCase(),x.language=x.locale,Ka=void 0,Dr=Object.create(null)),r.messageFormat!==void 0&&(x.messageFormat=r.messageFormat),r.bundleFormat===Wa.standalone&&x.languagePackSupport===!0&&(x.languagePackSupport=!1)),Pr=x.locale==="pseudo",Qa}de.config=Np});var iu=d(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});var Cs=require("url"),Mp=require("https"),Vp=require("http"),qp=Pa(),kp=za(),eu=require("zlib"),tu=Za();tu.config(process.env.VSCODE_NLS_CONFIG);var I=tu.loadMessageBundle(),ru=null,Ss=!0;function Hp(r,e){ru=r,Ss=e}wt.configure=Hp;function nu(r){var e=Bp(r.url,{proxyUrl:ru,strictSSL:Ss});return r=xs({},r),r=xs(r,{agent:e,strictSSL:Ss}),typeof r.followRedirects!="number"&&(r.followRedirects=5),su(r).then(function(t){return new Promise(function(n,s){var i=t.res,a=i,l=i.headers&&i.headers["content-encoding"],u=!1;if(l==="gzip"){var o=eu.createGunzip();i.pipe(o),a=o}else if(l==="deflate"){var c=eu.createInflate();i.pipe(c),a=c}var f=[];a.on("data",function(h){return f.push(h)}),a.on("end",function(){if(!u){if(u=!0,r.followRedirects>0&&(i.statusCode>=300&&i.statusCode<=303||i.statusCode===307)){var h=i.headers.location;if(h){var g={type:r.type,url:h,user:r.user,password:r.password,responseType:r.responseType,headers:r.headers,timeout:r.timeout,followRedirects:r.followRedirects-1,data:r.data};nu(g).then(n,s);return}}var v={responseText:f.join(""),status:i.statusCode};i.statusCode>=200&&i.statusCode<300||i.statusCode===1223?n(v):s(v)}}),a.on("error",function(h){var g={responseText:I("error","Unable to access {0}. Error: {1}",r.url,h.message),status:500};u=!0,s(g)})})},function(t){var n;return e?n=I("error.cannot.connect.proxy","Unable to connect to {0} through a proxy . Error: {1}",r.url,t.message):n=I("error.cannot.connect","Unable to connect to {0}. Error: {1}",r.url,t.message),Promise.reject({responseText:n,status:404})})}wt.xhr=nu;function xs(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(n){return Object.keys(n).forEach(function(s){return r[s]=n[s]})}),r}function su(r){var e;return new Promise(function(t,n){var s=Cs.parse(r.url),i={hostname:s.hostname,port:s.port?parseInt(s.port):s.protocol==="https:"?443:80,path:s.path,method:r.type||"GET",headers:r.headers,agent:r.agent,rejectUnauthorized:typeof r.strictSSL=="boolean"?r.strictSSL:!0};r.user&&r.password&&(i.auth=r.user+":"+r.password);var a=function(l){l.statusCode>=300&&l.statusCode<400&&r.followRedirects&&r.followRedirects>0&&l.headers.location?t(su(xs({},r,{url:l.headers.location,followRedirects:r.followRedirects-1}))):t({req:e,res:l})};s.protocol==="https:"?e=Mp.request(i,a):e=Vp.request(i,a),e.on("error",n),r.timeout&&e.setTimeout(r.timeout),r.data&&e.write(r.data),e.end()})}function Up(r){if(!(r<400))switch(r){case 400:return I("status.400","Bad request. The request cannot be fulfilled due to bad syntax.");case 401:return I("status.401","Unauthorized. The server is refusing to respond.");case 403:return I("status.403","Forbidden. The server is refusing to respond.");case 404:return I("status.404","Not Found. The requested location could not be found.");case 405:return I("status.405","Method not allowed. A request was made using a request method not supported by that location.");case 406:return I("status.406","Not Acceptable. The server can only generate a response that is not accepted by the client.");case 407:return I("status.407","Proxy Authentication Required. The client must first authenticate itself with the proxy.");case 408:return I("status.408","Request Timeout. The server timed out waiting for the request.");case 409:return I("status.409","Conflict. The request could not be completed because of a conflict in the request.");case 410:return I("status.410","Gone. The requested page is no longer available.");case 411:return I("status.411",'Length Required. The "Content-Length" is not defined.');case 412:return I("status.412","Precondition Failed. The precondition given in the request evaluated to false by the server.");case 413:return I("status.413","Request Entity Too Large. The server will not accept the request, because the request entity is too large.");case 414:return I("status.414","Request-URI Too Long. The server will not accept the request, because the URL is too long.");case 415:return I("status.415","Unsupported Media Type. The server will not accept the request, because the media type is not supported.");case 500:return I("status.500","Internal Server Error.");case 501:return I("status.501","Not Implemented. The server either does not recognize the request method, or it lacks the ability to fulfill the request.");case 503:return I("status.503","Service Unavailable. The server is currently unavailable (overloaded or down).");default:return I("status.416","HTTP status code {0}",r)}}wt.getErrorStatusDescription=Up;function jp(r){return r.protocol==="http:"?process.env.HTTP_PROXY||process.env.http_proxy||null:r.protocol==="https:"&&(process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy)||null}function Bp(r,e){e===void 0&&(e={});var t=Cs.parse(r),n=e.proxyUrl||jp(t);if(!n)return null;var s=Cs.parse(n);if(!/^https?:$/.test(s.protocol))return null;var i={host:s.hostname,port:Number(s.port),auth:s.auth,rejectUnauthorized:typeof e.strictSSL=="boolean"?e.strictSSL:!0};return t.protocol==="http:"?new qp(i):new kp(i)}});var cu=d(fe=>{"use strict";var ou=fe&&fe.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(c){try{o(n.next(c))}catch(f){a(f)}}function u(c){try{o(n.throw(c))}catch(f){a(f)}}function o(c){c.done?i(c.value):s(c.value).then(l,u)}o((n=n.apply(r,e||[])).next())})};Object.defineProperty(fe,"__esModule",{value:!0});fe.RequestService=fe.RestHttpMethodEnum=void 0;var au=iu(),we=$e(),uu;(function(r){r.Delete="DELETE",r.Get="GET",r.Post="POST"})(uu=fe.RestHttpMethodEnum||(fe.RestHttpMethodEnum={}));var Rs=class{constructor(){this._proxyStrictSSL=!1,this._connectionTimeoutMs=we.DEFAULT_CONNECTION_TIMEOUT_MS}getEnvVars(){let e=Object.assign({},process.env),t=this.proxyUrl;t&&(e[we.ENV_HTTP_PROXY]=t,e[we.ENV_HTTPS_PROXY]=t);let n=this.instanceUrl;n&&(e[we.ENV_SFDX_INSTANCE_URL]=n);let s=this.accessToken;return s&&(e[we.ENV_SFDX_DEFAULTUSERNAME]=s),e}get instanceUrl(){return this._instanceUrl}set instanceUrl(e){this._instanceUrl=e}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e}get proxyUrl(){return this._proxyUrl}set proxyUrl(e){this._proxyUrl=e}get proxyStrictSSL(){return this._proxyStrictSSL}set proxyStrictSSL(e){this._proxyStrictSSL=e}get proxyAuthorization(){return this._proxyAuthorization}set proxyAuthorization(e){this._proxyAuthorization=e}get connectionTimeoutMs(){return this._connectionTimeoutMs||we.DEFAULT_CONNECTION_TIMEOUT_MS}set connectionTimeoutMs(e){this._connectionTimeoutMs=e}execute(e,t=uu.Post){return ou(this,void 0,void 0,function*(){this.proxyUrl&&(0,au.configure)(this._proxyUrl,this._proxyStrictSSL);let n=[this.instanceUrl,e.getCommandUrl()],s=e.getQueryString(),i=s?n.join("/").concat("?",s):n.join("/"),a=e.getRequest(),l={type:t,url:i,timeout:this.connectionTimeoutMs,headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/json",Authorization:`OAuth ${this.accessToken}`,"Content-Length":a?Buffer.byteLength(a,"utf-8"):0,"Sforce-Call-Options":`client=${we.CLIENT_ID}`},data:a};this.proxyAuthorization&&(l.headers["Proxy-Authorization"]=this.proxyAuthorization);try{let u=yield this.sendRequest(l);return Promise.resolve(u.responseText)}catch(u){let o=u;return Promise.reject(o.responseText)}})}sendRequest(e){return ou(this,void 0,void 0,function*(){return(0,au.xhr)(e)})}};fe.RequestService=Rs});var fu=d(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.RestHttpMethodEnum=ge.RequestService=ge.BaseCommand=void 0;var Gp=aa();Object.defineProperty(ge,"BaseCommand",{enumerable:!0,get:function(){return Gp.BaseCommand}});var lu=cu();Object.defineProperty(ge,"RequestService",{enumerable:!0,get:function(){return lu.RequestService}});Object.defineProperty(ge,"RestHttpMethodEnum",{enumerable:!0,get:function(){return lu.RestHttpMethodEnum}})});var hu=d(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0})});var du=d(Te=>{"use strict";var $p=Te&&Te.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zp=Te&&Te.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&$p(e,r,t)};Object.defineProperty(Te,"__esModule",{value:!0});zp(hu(),Te)});var Tt=d(W=>{"use strict";var Xp=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,s)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Ae=W&&W.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Xp(e,r,t)};Object.defineProperty(W,"__esModule",{value:!0});Ae(Tt(),W);Ae(ta(),W);Ae($e(),W);Ae(na(),W);Ae(oa(),W);Ae(fu(),W);Ae(du(),W)});var Qp={};Yu(Qp,{ApexDebugStackFrameInfo:()=>Oe,ApexReplayDebug:()=>It,ApexVariable:()=>Dt,ApexVariableContainer:()=>L,SCOPE_TYPES:()=>wu,ScopeContainer:()=>lt,Step:()=>Ru,VariableContainer:()=>Pt});module.exports=Ju(Qp);var xu=require("os"),w=ce(Bt());var se=class{constructor(){this.lineNumberMapping=new Map;this.typerefMapping=new Map}setValidLines(e,t){this.lineNumberMapping=e,this.typerefMapping=t}static getInstance(){return se.instance||(se.instance=new se),se.instance}static setInstance(e){se.instance=e}hasLineNumberMapping(){return this.lineNumberMapping&&this.lineNumberMapping.size>0}getLineNumberMapping(){return this.lineNumberMapping}getTyperefMapping(){return this.typerefMapping}canSetLineBreakpoint(e,t){return this.lineNumberMapping.has(e)&&this.lineNumberMapping.get(e).indexOf(t)!==-1}createMappingsFromLineBreakpointInfo(e){this.lineNumberMapping.clear(),this.typerefMapping.clear();for(let t of e)this.lineNumberMapping.has(t.uri)||this.lineNumberMapping.set(t.uri,[]),this.lineNumberMapping.set(t.uri,this.lineNumberMapping.get(t.uri).concat(t.lines)),this.typerefMapping.set(t.typeref,t.uri)}returnLinesForLoggingFromBreakpointArgs(e){return e.map(t=>t.line).join(",")}getTopLevelTyperefForUri(e){let t="";return this.typerefMapping.forEach((n,s)=>{if(n===e&&s.indexOf("$")===-1){t=s;return}}),t}};var ke=se.getInstance();var Hs="0x";var Gt="CODE_UNIT_STARTED",$t="CODE_UNIT_FINISHED",zt="CONSTRUCTOR_ENTRY",Xt="CONSTRUCTOR_EXIT",Us="Execute Anonymous",js="HEAP_DUMP",Bs="METHOD_ENTRY",Gs="METHOD_EXIT",$s="STATEMENT_EXECUTE",zs="USER_DEBUG",Yt="VF_APEX_CALL_START",Jt="VF_APEX_CALL_END",Xs="VARIABLE_SCOPE_BEGIN",Ys="VARIABLE_ASSIGNMENT",He="execute_anonymous_apex";var Js="sendMetricError",Ws="sendMetricLaunch";var Ks="services/data/v43.0/tooling/sobjects";var gt="__sfdc_trigger/",En="Trigger.",Qs="blob",Cn="boolean",Zs="date",ei="datetime",ti="decimal",ri="double",ni="id",si="integer",ii="long",ae="string",oi="time",Sn="String",xn="KeyValuePair",Ue="key",je="value";var Wt=class{constructor(e){this.logContext=e}replaceVariablesWithHeapDump(){let e=this.logContext.getTopFrame();e&&this.replaceFrameVariablesWithHeapDump(e)}replaceFrameVariablesWithHeapDump(e){let t=this.logContext.getHeapDumpForThisLocation(e.name,e.line);if(t&&t.getOverlaySuccessResult()){let n=t.getOverlaySuccessResult(),s=this.logContext.getFrameHandler().get(e.id);this.logContext.getRefsMap().clear(),this.logContext.getVariableHandler().reset(),this.createStringRefsFromHeapdump(n);for(let i of n.HeapDump.extents)if(!this.isPrimitiveType(i.typeName))for(let a of i.extent){let l=a.address,u=new L("","",i.typeName,l);this.updateLeafReferenceContainer(u,a,i.collectionType),this.logContext.getRefsMap().set(l,u)}for(let i of n.HeapDump.extents)for(let a of i.extent){let l=a.symbols&&a.symbols.length>0?a.symbols[0]:void 0,u=l?this.logContext.getUtil().substringUpToLastPeriod(l):void 0;if(l&&s.locals.has(l)){let o=s.locals.get(l);o.type=i.typeName;let c=this.logContext.getRefsMap().get(a.address);if(c)if(c.type===ae)o.value=c.value;else{let f=this.createVariableFromReference(l,c,new Map,new Array);f&&s.locals.set(o.name,f)}else o.value=this.createStringFromExtentValue(a.value.value)}else if(l&&u&&this.logContext.getStaticVariablesClassMap().has(u)){let o=this.logContext.getStaticVariablesClassMap().get(u),c=this.logContext.getUtil().substringFromLastPeriod(l);if(o&&o.has(c)){let f=o.get(c);f.type=i.typeName;let h=this.logContext.getRefsMap().get(a.address);if(h)if(h.type===ae)f.value=h.value;else{let g=this.createVariableFromReference(l,h,new Map,new Array);g&&o.set(f.name,g)}else f.value=this.createStringFromExtentValue(a.value.value)}}}if(this.logContext.isRunningApexTrigger()){for(let i of n.HeapDump.extents)if(this.isTriggerExtent(i)){for(let a of i.extent)if(a.symbols&&a.symbols.length>0){for(let l of a.symbols)if(l&&l.startsWith(En)){let u=this.logContext.getRefsMap().get(a.address);if(u){let o=this.createVariableFromReference(l,u,new Map,new Array);o&&s.globals.set(l,o)}else s.globals.set(l,new L(l,this.createStringFromExtentValue(a.value.value),i.typeName))}}}}}}createStringRefsFromHeapdump(e){let t=this.logContext.getRefsMap();for(let n of e.HeapDump.extents)if(n.typeName.toLowerCase()===ae)for(let s of n.extent){t.has(s.address)||t.set(s.address,new L("",s.value.value,Sn,s.address));let i=t.get(s.address);i.type=Sn,i.value=`'${s.value.value}'`}}isAddress(e){return typeof e=="string"&&e.startsWith(Hs)}isTriggerExtent(e){return!!((e.typeName.toLowerCase()===Cn||this.isCollectionType(e.typeName))&&e.count>0&&e.extent[0].symbols!==null&&e.extent[0].symbols.length>0&&e.extent[0].symbols[0].startsWith(En))}copyReferenceContainer(e,t,n=!0){let s=new L(t,e.value,e.type,e.ref);return s.variables=e.variables,this.isPrimitiveType(s.type)||(n?s.variablesRef=this.logContext.getVariableHandler().create(s):s.variablesRef=e.variablesRef),s}createStringFromVarContainer(e,t){if(!e.ref||e.type.toLowerCase()===ae)return e.value;if(e.ref){if(t.has(e.ref))return"already output";t.add(e.ref)}let n="";try{let s=e.type.toLowerCase().startsWith("list<")||e.type.toLowerCase().startsWith("set<"),i=this.isCollectionType(e.type)?"":`${e.type}:`;n=s?"(":`${i}{`;let a=!0;for(let l of Array.from(e.variables.entries())){let u=l[1];a||(n+=", "),u.ref?n+=this.createStringFromVarContainer(u,t):n+=s?u.value:`${u.name}=${u.value}`,a=!1}n+=s?")":"}"}finally{e.ref&&t.delete(e.ref)}return n}isPrimitiveType(e){let t=e.toLocaleLowerCase();return t===Qs||t===Cn||t===Zs||t===ei||t===ti||t===ri||t===ni||t===si||t===ii||t===ae||t===oi}isCollectionType(e){return e.toLocaleLowerCase().startsWith("map<")||e.toLocaleLowerCase().startsWith("list<")||e.toLocaleLowerCase().startsWith("set<")}updateLeafReferenceContainer(e,t,n){let s="";n&&(s=n);let i=!1;if(this.isCollectionType(e.type))if(t.value.entry){let a=0,l=this.getKeyTypeForMap(e.type,n||"");for(let u of t.value.entry){let o=this.isAddress(u.keyDisplayValue),c=this.isAddress(u.value.value),f=`${Ue}${a.toString()}_${je}${a.toString()}`,h=new L(f,"",xn),g=new L(Ue,"",l);if(o){let _=this.logContext.getRefsMap().get(u.keyDisplayValue);_&&_.type.toLowerCase()===ae?(o=!1,g.value=_.value):(i=!0,g.ref=u.keyDisplayValue)}else g.value=u.keyDisplayValue.toString();let v=new L(je,"",s);if(c){let _=this.logContext.getRefsMap().get(u.value.value);_&&_.type.toLowerCase()===ae?(c=!1,v.value=_.value):(i=!0,v.ref=u.value.value)}else v.value=this.createStringFromExtentValue(u.value.value);h.variables.set(g.name,g),h.variables.set(v.name,v),!o&&!c&&(h.name=g.value,h.value=v.value),e.variables.set(f,h),a++}}else{let a=t.value.value;for(let l=0;l<a.length;l++)if(this.isAddress(a[l].value)){let u=a[l].value,o=this.logContext.getRefsMap().get(a[l].value);o&&o.type.toLowerCase()===ae?u=o.value:i=!0,e.variables.set(l.toString(),new L(l.toString(),u,s,a[l].value))}else e.variables.set(l.toString(),new L(l.toString(),this.createStringFromExtentValue(a[l].value),s))}else for(let a of t.value.entry)if(this.isAddress(a.value.value)){let u=a.value.value,o=this.logContext.getRefsMap().get(a.value.value);o&&o.type.toLowerCase()===ae?u=o.value:i=!0,e.variables.set(a.keyDisplayValue,new L(a.keyDisplayValue,u,"",a.value.value))}else e.variables.set(a.keyDisplayValue,new L(a.keyDisplayValue,this.createStringFromExtentValue(a.value.value),""));i||(e.value=this.createStringFromVarContainer(e,new Set))}createStringFromExtentValue(e){return e===void 0?"undefined":e===null?"null":e.toString()}createVariableFromReference(e,t,n,s){if(!!t.ref){if(n.has(t.ref)){let i=n.get(t.ref);if(i!==null)if(i.name!==e){let a=this.copyReferenceContainer(i,e,!1);return s.push(a),a}else return i;return}try{let i=this.copyReferenceContainer(t,e);n.set(t.ref,i);for(let a of Array.from(i.variables.entries())){let l=a[0],u=a[1];if(u.type===xn){let o=u.variables.get(Ue),c=o.value;if(o&&o.ref){let g=this.logContext.getRefsMap().get(o.ref);if(g){let v=this.createVariableFromReference(Ue,g,n,s);v&&(c=v.value,u.variables.set(Ue,v))}else o.value=o.ref,o.ref=void 0}let f=u.variables.get(je),h=f.value;if(f&&f.ref){let g=this.logContext.getRefsMap().get(f.ref);if(g){let v=this.createVariableFromReference(je,g,n,s);v&&(h=v.value,u.variables.set(je,v))}else f.value=f.ref,f.ref=void 0}u.name=c,u.value=h,u.variablesRef=this.logContext.getVariableHandler().create(u)}else{if(!u.ref)continue;let o=this.logContext.getRefsMap().get(u.ref);if(o){let c=this.createVariableFromReference(l,o,n,s);c&&i.variables.set(l,c)}else u.value=u.ref,u.ref=void 0}i.value=this.createStringFromVarContainer(i,new Set)}return i}finally{n.delete(t.ref),n.size===0&&s.forEach(i=>{let a=i;a.value=this.createStringFromVarContainer(a,new Set)})}}}getKeyTypeForMap(e,t){let n=","+t;return e.substring(e.indexOf("<")+1,e.lastIndexOf(n))}};var ct=ce(Tt()),Eu=ce(require("path"));var gu=ce(Tt());var At=class extends gu.BaseCommand{constructor(t){super(void 0);this.commandName="ApexExecutionOverlayResult";this.heapdumpKey=t}getCommandUrl(){return[Ks,this.commandName,this.heapdumpKey].join("/")}getRequest(){}};var Y=ce(Tt());var mu={session_language_server_error_text:"Apex language server could not provide information about valid breakpoints.",session_started_text:"Apex Replay Debugger session started for log file %s.",session_terminated_text:"Apex Replay Debugger session terminated.",no_log_file_text:"The log file either is missing or does not have any log lines in it.",incorrect_log_levels_text:"The log must be generated with log categories Apex code at the FINEST level and Visualforce at the FINER level.",unable_to_retrieve_org_info:"Unable to retrieve OrgInfo",heap_dump_error:"Problems were encountered while retrieving heap dump information. Message=%s, Error code=%s, Heap dump information=%s",heap_dump_error_wrap_up_text:"Problems were encountered while retrieving heap dump information. See the messages above this one for details. Detailed heap dump variable information is unavailable for the specified line or lines.",fetching_heap_dump:"Retrieving heap dump from server. Heap dump information=%s",malformed_log_line:"Encountered a malformed HEAP_DUMP log line, skipping. Log line number=%d, log line='%s'.",reconcile_heapdump_error:'Problems were encountered while using a heap dump: %s. Use Tooling API to delete the ApexExecutionOverlayResult record with the ID %s: From a terminal, run "sfdx force:data:record:delete -t -s ApexExecutionOverlayResult -i %s".'};var bu={session_language_server_error_text:"Apex \u8A00\u8A9E\u30B5\u30FC\u30D0\u306F\u6709\u52B9\u306A\u30D6\u30EC\u30FC\u30AF\u30DD\u30A4\u30F3\u30C8\u306B\u95A2\u3059\u308B\u60C5\u5831\u3092\u63D0\u4F9B\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",session_started_text:"Apex Replay Debugger \u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB %s \u3067\u958B\u59CB\u3057\u307E\u3057\u305F\u3002",session_terminated_text:"Apex Replay Debugger \u30BB\u30C3\u30B7\u30E7\u30F3\u3092\u7D42\u4E86\u3057\u307E\u3057\u305F\u3002",no_log_file_text:"\u30ED\u30B0\u30D5\u30A1\u30A4\u30EB\u304C\u898B\u3064\u304B\u3089\u306A\u3044\u304B\u3001\u30D5\u30A1\u30A4\u30EB\u306B\u30ED\u30B0\u306E\u884C\u304C\u542B\u307E\u308C\u3066\u3044\u307E\u305B\u3093\u3002",incorrect_log_levels_text:"\u30ED\u30B0\u306F\u3001\u30ED\u30B0\u30AB\u30C6\u30B4\u30EA\u3092 Apex \u304C FINEST \u30EC\u30D9\u30EB\u306B\u3001Visualforce \u304C FINER \u30EC\u30D9\u30EB\u3067\u751F\u6210\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002",unable_to_retrieve_org_info:"OrgInfo \u306E\u53D6\u5F97\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F",heap_dump_error:"\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u30E1\u30C3\u30BB\u30FC\u30B8=%s, \u30A8\u30E9\u30FC\u30B3\u30FC\u30C9=%s, \u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831=%s",heap_dump_error_wrap_up_text:"\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001\u4E0A\u8A18\u306E\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u6307\u5B9A\u3055\u308C\u305F\u884C\u306B\u3064\u3044\u3066\u3001\u8A73\u7D30\u306A\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u5909\u6570\u306E\u60C5\u5831\u304C\u4F7F\u7528\u3067\u304D\u307E\u305B\u3093\u3002",fetching_heap_dump:"\u30B5\u30FC\u30D0\u304B\u3089\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3057\u3066\u3044\u307E\u3059\u3002\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831=%s",malformed_log_line:"\u4E0D\u6B63\u306A HEAP_DUMP \u306E\u30ED\u30B0\u306E\u884C\u304C\u898B\u3064\u304B\u308A\u307E\u3057\u305F\u3002\u3053\u306E\u884C\u3092\u30B9\u30AD\u30C3\u30D7\u3057\u307E\u3059\u3002\u30ED\u30B0\u306E\u884C\u756A\u53F7=%d\u3001\u30ED\u30B0\u306E\u884C='%s'",reconcile_heapdump_error:'\u30D2\u30FC\u30D7\u30C0\u30F3\u30D7\u60C5\u5831\u3092\u53D6\u5F97\u3059\u308B\u969B\u306B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F: %s\u3002 Tooling API \u3092\u4F7F\u7528\u3057\u3066 ApexExecutionOverlayResult \u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u306E\u30EC\u30B3\u30FC\u30C9 (ID %s) \u3092\u524A\u9664\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u30BF\u30FC\u30DF\u30CA\u30EB\u304B\u3089\u3001"sfdx force:data:record:delete -t -s ApexExecutionOverlayResult -i %s" \u3092\u5B9F\u884C\u3057\u3066\u304F\u3060\u3055\u3044\u3002'};function Yp(r){function e(n){return n===Y.DEFAULT_LOCALE?`${Y.BASE_FILE_NAME}.${Y.BASE_FILE_EXTENSION}`:`${Y.BASE_FILE_NAME}.${n}.${Y.BASE_FILE_EXTENSION}`}let t=new Y.Message(mu);if(r&&r.locale&&r.locale!==Y.DEFAULT_LOCALE){if(r.locale==="ja")return new Y.Message(bu,t);console.error(`Cannot find ${r.locale}, defaulting to en`)}return t}var J=new Y.Localization(Yp(process.env.VSCODE_NLS_CONFIG?JSON.parse(process.env.VSCODE_NLS_CONFIG):void 0));var vu=require("path"),Nr=ce(Bt()),_u=ce(Jr());var me=class{static computeFrameName(e){let t=e[e.length-1],n=" invoke\\((.*)\\)",s="";switch(e[1]){case Gt:case $t:t.startsWith(gt)?s=t.substring(gt.length):s=t;break;case zt:case Xt:t.lastIndexOf(".")>=0?s=t+"."+t.substr(t.lastIndexOf(".")+1):t.lastIndexOf("/")>=0?s=t+"."+t.substring(t.lastIndexOf("/")+1):s=t+"."+t;break;case Yt:case Jt:s=t;let i=e[e.length-2].match(n);i!=null&&i.length>=2&&(s+="."+i[1],i[1].endsWith(")")||(s+="()"));break;default:s=t}return s}static isExtraneousVFGetterOrSetterLogLine(e){let t=" get\\((.*)\\)",n=" set\\((.*)\\)";return!(e.match(t)==null&&e.match(n)==null)}};var nt=class{constructor(e){this._signature=e[e.length-1],this._frameName=me.computeFrameName(e)}};var st=class extends nt{constructor(e){super(e)}handle(e){let t=e.getUriFromSignature(this._signature),n=new Oe(e.getFrames().length,this._signature),s=e.getFrameHandler().create(n),i=this._signature.indexOf(".")>-1?this._signature.substring(0,this._signature.lastIndexOf(".")):this._signature;return e.getStaticVariablesClassMap().has(i)?n.statics=e.getStaticVariablesClassMap().get(i):e.getStaticVariablesClassMap().set(i,n.statics),e.getFrames().push(new Nr.StackFrame(s,this._frameName,t?new Nr.Source((0,vu.basename)(t),_u.default.parse(t).fsPath):void 0,void 0)),!1}};var it=class extends nt{constructor(e){super(e)}handle(e){for(;e.hasFrames();){let t=e.getTopFrame();if(t&&(e.getFrames().pop(),t.name===this._frameName||t.name.startsWith(this._frameName)))break}return!1}};var Mr=ce(Bt()),ot=class{handle(e){let t=e.getLogFileName();return e.getFrames().push(new Mr.StackFrame(0,"",new Mr.Source(t,e.getLogFilePath()),e.getLogLinePosition()+1)),!0}};var be=class{handle(e){return!1}};var Ot=class{constructor(e){this.line=parseInt(e[e.length-1],10)}handle(e){let t=e.getTopFrame();return t&&(t.line=t.name===He?e.getExecAnonScriptLocationInDebugLog(this.line):this.line),!0}};var yu=require("os");var at=class{constructor(e){this.line=parseInt(e[2],10),this.message=e[e.length-1]}getMessage(){return this.message}handle(e){this.lookAheadAndAppend(e);let t=e.getTopFrame();return t&&e.getSession().warnToDebugConsole(this.message,t.source,t.name===He?e.getExecAnonScriptLocationInDebugLog(this.line):this.line),!1}lookAheadAndAppend(e){for(let t=e.getLogLinePosition()+1;t<e.getLogLines().length;t++){let n=e.getLogLines()[t];if(n.split("|").length>=3)break;this.message=`${this.message}${yu.EOL}${n}`,e.incrementLogLinePosition()}}};var Lt=class{constructor(e){this.fields=e}handle(e){let t=e.getTopFrame();if(t){let n=t.id,s=e.getFrameHandler().get(n),i=this.fields[3],a=this.fields[4],l=this.fields[6]==="true",u=e.getUtil().substringUpToLastPeriod(i);u&&!e.getStaticVariablesClassMap().has(u)&&e.getStaticVariablesClassMap().set(u,new Map);let o=e.getStaticVariablesClassMap().get(u);if(l){let c=e.getUtil().substringFromLastPeriod(i);o.set(c,new L(c,"null",a))}else s.locals.has(i)||s.locals.set(i,new L(i,"null",a))}return!1}};var Ft=class{constructor(e){this.fields=e}handle(e){let t=e.getTopFrame();if(t){let n=t.id,s=e.getFrameHandler().get(n),i=this.fields[3],a=this.fields[3].split("."),l=i.indexOf(".")>-1?i.substring(0,i.lastIndexOf(".")):"",u=a.length>0?a[a.length-1]:i,o=this.fields[4].replace(/^"/,"'").replace(/"$/,"'"),c;this.fields.length===6&&(c=this.fields[5]);let f=e.getRefsMap(),h,g,v=!1;if(e.getStaticVariablesClassMap().has(l)?(g=e.getStaticVariablesClassMap().get(l),h=g.get(u)):l!=="this"&&s.locals.has(u)?(g=s.locals,h=g.get(u)):i.indexOf(".")!==-1&&(v=!0),c){f.has(c)||e.getRefsMap().set(c,new L("","","",c));let _=f.get(c);if(v)if(o==="{}")_.variables.set(u,new L(u,o,""));else if(o.indexOf("{")===0){let A=new L(u,"","");_.variables.set(u,A),A.variablesRef=e.getVariableHandler().create(A),this.parseJSONAndPopulate(o,A,e)}else if(f.has(o)){let A=f.get(o),V=this.copyReferenceContainer(A,u,e);_.variables.set(u,V)}else if(_.variables.has(u)){let A=_.variables.get(u);A.value=o}else _.variables.set(u,new L(u,o,""));else o.indexOf("{")===0?this.parseJSONAndPopulate(o,_,e):_.variables.set(u,new L(u,o,""));h&&this.isNotCollection(h)&&h.name!=="this"||h&&h.name==="this"&&!h.ref?(h.ref=c,h.value="",h.variables=_.variables,_.type=h.type,o==="{}"&&(h.value=o),h.variablesRef===0&&(h.value="",h.variablesRef=e.getVariableHandler().create(h))):h&&h.name!=="this"&&(h.value=o)}else h&&(h.value=o)}return!1}isNotCollection(e){return!e.type.startsWith("Map<")&&!e.type.startsWith("List<")&&!e.type.startsWith("Set<")}parseJSONAndPopulate(e,t,n){try{e=n.getUtil().surroundBlobsWithQuotes(e);let s=JSON.parse(e);Object.keys(s).forEach(i=>{let a=n.getRefsMap().get(String(s[i]));if(a){let l=this.copyReferenceContainer(a,i,n);t.variables.set(i,l)}else{let l=s[i];typeof l=="string"?(l="'"+l+"'",l=n.getUtil().removeQuotesFromBlob(l)):l=`${l}`,t.variables.set(i,new L(i,l,""))}})}catch(s){t.value=e,t.variablesRef=0,t.variables.clear()}}copyReferenceContainer(e,t,n){let s=new L(t,e.value,e.type,e.ref);return s.variables=e.variables,s.variablesRef=n.getVariableHandler().create(s),s}};var ut=class{constructor(e){this.START_HANDLE=1e3;this._handleMap=new Map;this._nextHandle=typeof e=="number"?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){let t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)));return e.START_HANDLE=this.START_HANDLE,e._nextHandle=this._nextHandle,e._handleMap=new Map,this._handleMap.forEach((t,n)=>{t.copy!=="undefined"&&e._handleMap.set(n,t.copy())}),e}};var Vr=class{constructor(e,t,n,s){this.toString=()=>`HeapDumpId: ${this.heapDumpId}, ClassName: ${this.className}, Namespace: ${this.namespace}, Line: ${this.line}`;this.heapDumpId=e,this.className=t,this.namespace=n,this.line=s}getHeapDumpId(){return this.heapDumpId}getClassName(){return this.className}getNamespace(){return this.namespace}getLine(){return this.line}getOverlaySuccessResult(){return this.overlaySuccessResut}setOverlaySuccessResult(e){this.overlaySuccessResut=e}};var kr=ce(require("fs")),qr=class{getFileSize(e){try{return kr.statSync(e).size}catch(t){return 0}}readLogFile(e){try{return kr.readFileSync(e,"utf-8").trim().split(/\r?\n/)}catch(t){return[]}}stripBrackets(e){return e.replace("[","").replace("]","")}substringUpToLastPeriod(e){return e.substring(0,e.lastIndexOf("."))}substringFromLastPeriod(e){let t=e.split(".");return t.length>1?t[t.length-1]:e}surroundBlobsWithQuotes(e){return e.replace(/(BLOB\(\d+ bytes\))/g,'"$1"')}removeQuotesFromBlob(e){return e.replace(/'(BLOB\(\d+ bytes\))'/g,"$1")}};var Hr=class{constructor(e,t){this.util=new qr;this.logLines=[];this.frameHandles=new ut;this.staticVariablesClassMap=new Map;this.refsMap=new Map;this.variableHandles=new ut;this.stackFrameInfos=[];this.logLinePosition=-1;this.execAnonMapping=new Map;this.apexHeapDumps=[];this.lastSeenHeapDumpClass="";this.lastSeenHeapDumpLine=-1;this.backupStackFrameInfos=this.stackFrameInfos;this.backupFrameHandles=this.frameHandles;this.backupRefsMap=this.refsMap;this.backupStaticVariablesClassMap=this.staticVariablesClassMap;this.backupVariableHandles=this.variableHandles;this.launchArgs=e,this.session=t,this.logLines=this.util.readLogFile(e.logFile),this.logSize=this.util.getFileSize(e.logFile)}getUtil(){return this.util}getLaunchArgs(){return this.launchArgs}getSession(){return this.session}getLogLines(){return this.logLines}getLogSize(){return this.logSize}hasLogLines(){return this.logLines&&this.logLines.length>0&&this.logLinePosition<this.logLines.length}meetsLogLevelRequirements(){return this.logLines&&this.logLines.length>0&&this.logLines[0].match(/(\d{2}.*APEX_CODE,FINEST;.*VISUALFORCE,FINER;.*|\d{2}.*APEX_CODE,FINEST;.*VISUALFORCE,FINEST;.*)/)!==null}getHeapDumps(){return this.apexHeapDumps}hasHeapDump(){return this.apexHeapDumps.length>0}getHeapDumpForThisLocation(e,t){for(let n of this.apexHeapDumps)if(e.includes(n.getClassName())&&t===n.getLine())return n}hasHeapDumpForTopFrame(){let e=this.getTopFrame();if(e){let t=this.getHeapDumpForThisLocation(e.name,e.line);if(t&&e.name.includes(this.lastSeenHeapDumpClass)&&e.line===this.lastSeenHeapDumpLine)return t.getHeapDumpId()}}resetLastSeenHeapDumpLogLine(){this.lastSeenHeapDumpClass="",this.lastSeenHeapDumpLine=-1}isRunningApexTrigger(){let e=this.getTopFrame();return!!(e&&e.source&&e.source.name.toLowerCase().endsWith(".trigger"))}copyStateForHeapDump(){this.backupStackFrameInfos=JSON.parse(JSON.stringify(this.stackFrameInfos)),this.backupFrameHandles=this.frameHandles.copy(),this.backupRefsMap=new Map,this.backupVariableHandles=new ut,this.cloneStaticVariablesClassMap();for(let e of this.backupStackFrameInfos){let t=this.backupFrameHandles.get(e.id);this.copyVariableContainers(t.locals),this.copyVariableContainers(t.statics)}}copyVariableContainers(e){e.forEach((t,n)=>{let s=t;if(s.ref){this.backupRefsMap.set(s.ref,s);let i=this.backupVariableHandles.create(s);s.variablesRef=i,this.copyVariableContainers(s.variables)}})}cloneStaticVariablesClassMap(){this.backupStaticVariablesClassMap=new Map,this.staticVariablesClassMap.forEach((e,t)=>{let n=e,s=new Map;n.forEach((i,a)=>{let l=i;s.set(a,l.copy())}),this.backupStaticVariablesClassMap.set(t,s)})}revertStateAfterHeapDump(){this.staticVariablesClassMap=this.backupStaticVariablesClassMap,this.stackFrameInfos=this.backupStackFrameInfos,this.frameHandles=this.backupFrameHandles,this.refsMap=this.backupRefsMap,this.variableHandles=this.backupVariableHandles}scanLogForHeapDumpLines(){let e=RegExp(/\|HEAP_DUMP\|/);return this.logLines.forEach((t,n)=>{if(e.test(t)){let s=t.split("|");if(s.length>=7){let i=new Vr(s[3],s[4],s[5],Number(s[6]));this.apexHeapDumps.push(i)}else this.session.printToDebugConsole(J.localize("malformed_log_line",n+1,t))}}),this.apexHeapDumps.length>0}fetchOverlayResultsForApexHeapDumps(e){return Me(this,null,function*(){let t=!0;try{let n=yield new ct.ForceOrgDisplay().getOrgInfo(e),s=new ct.RequestService;s.instanceUrl=n.instanceUrl,s.accessToken=n.accessToken;for(let i of this.apexHeapDumps){this.session.printToDebugConsole(J.localize("fetching_heap_dump",i.toString()));let a=new At(i.getHeapDumpId()),l,u;if(yield s.execute(a,ct.RestHttpMethodEnum.Get).then(o=>{u=o},o=>{l=o}),u)i.setOverlaySuccessResult(JSON.parse(u));else if(l)try{t=!1;let o=JSON.parse(l),c=J.localize("heap_dump_error",o[0].message,o[0].errorCode,i.toString());this.session.errorToDebugConsole(c)}catch(o){let c=`${o}. ${l}. ${i.toString()}`;this.session.errorToDebugConsole(c)}}}catch(n){t=!1;let s=JSON.parse(n),i=`${J.localize("unable_to_retrieve_org_info")} : ${s.message}`;this.session.errorToDebugConsole(i)}return t})}getLogFileName(){return Eu.basename(this.launchArgs.logFile)}getLogFilePath(){return this.launchArgs.logFile}getLogLinePosition(){return this.logLinePosition}incrementLogLinePosition(){this.logLinePosition+=1}getFrames(){return this.stackFrameInfos}getNumOfFrames(){return this.stackFrameInfos.length}getTopFrame(){if(this.stackFrameInfos.length>0)return this.stackFrameInfos[this.stackFrameInfos.length-1]}getRefsMap(){return this.refsMap}getStaticVariablesClassMap(){return this.staticVariablesClassMap}getFrameHandler(){return this.frameHandles}getVariableHandler(){return this.variableHandles}setState(e){this.state=e}hasState(){return this.state!==void 0}getExecAnonScriptLocationInDebugLog(e){return this.execAnonMapping.get(e)||0}getExecAnonScriptMapping(){return this.execAnonMapping}getUriFromSignature(e){if(e===He)return this.getLogFilePath();let t=e.endsWith(")")?e.substring(0,e.substring(0,e.indexOf("(")).lastIndexOf(".")):e,n=ke.getTyperefMapping(),s="";return n.forEach((i,a)=>{let l="";if(a.startsWith(gt)?l=a:l=a.replace("/",".").replace("$","."),l===t){s=i;return}}),s}hasFrames(){return this.stackFrameInfos&&this.stackFrameInfos.length>0}updateFrames(){for(this.hasHeapDump()&&this.revertStateAfterHeapDump(),this.state instanceof ot&&this.stackFrameInfos.pop();++this.logLinePosition<this.logLines.length;){let e=this.logLines[this.logLinePosition];if(e&&(this.setState(this.parseLogEvent(e)),this.session.shouldTraceLogFile()&&!(this.state instanceof at)&&this.session.printToDebugConsole(e),this.state&&this.state.handle(this)))break}}parseLogEvent(e){if(this.state===void 0)return new ot;e.startsWith(Us)&&this.execAnonMapping.set(this.execAnonMapping.size+1,this.logLinePosition+1);let t=e.split("|");if(t.length>=3)switch(t[1]){case Gt:case zt:case Bs:return new st(t);case Yt:return me.isExtraneousVFGetterOrSetterLogLine(t[t.length-2])?new be:new st(t);case $t:case Xt:case Gs:return new it(t);case Xs:return new Lt(t);case Ys:return new Ft(t);case Jt:return me.isExtraneousVFGetterOrSetterLogLine(t[t.length-2])?new be:new it(t);case $s:if(e.match(/.*\|.*\|\[\d{1,}\]/))return t[2]=this.util.stripBrackets(t[2]),new Ot(t);break;case zs:if(e.match(/.*\|.*\|\[\d{1,}\]\|.*\|.*/))return t[2]=this.util.stripBrackets(t[2]),new at(t);break;case js:if(e.match(/.+\|HEAP_DUMP|\[\d+\]|.+\|.+\|\d+/)){let n=e.split("|");this.lastSeenHeapDumpClass=n[4],this.lastSeenHeapDumpLine=Number(n[6])}break;default:return new be}return new be}};var Cu="all",Jp="protocol",Wp="logfile",Kp="launch",Su="breakpoints",Ru=(s=>(s[s.Over=0]="Over",s[s.In=1]="In",s[s.Out=2]="Out",s[s.Run=3]="Run",s))(Ru||{}),Dt=class extends w.Variable{constructor(t,n,s,i=0,a){super(t,n,i);this.type=s,this.apexRef=a,this.evaluateName=n}},Oe=class{constructor(e,t){this.frameNumber=e,this.signature=t,this.statics=new Map,this.locals=new Map,this.globals=new Map}copy(){let e=new Oe(this.frameNumber,this.signature);return this.statics.forEach((t,n)=>{e.statics.set(n,t.copy())}),this.locals.forEach((t,n)=>{e.locals.set(n,t.copy())}),e}},wu=(n=>(n.LOCAL="local",n.STATIC="static",n.GLOBAL="global",n))(wu||{}),Pt=class{constructor(e=new Map){this.variables=e}getAllVariables(){let e=[];return this.variables.forEach(t=>{let n=t;e.push(new Dt(n.name,n.value,n.type,n.variablesRef))}),e}copy(){let e=Object.assign(Object.create(Object.getPrototypeOf(this)));return e.variables=new Map,this.variables.forEach((t,n)=>{e.variables.set(n,t.copy())}),e}},L=class extends Pt{constructor(t,n,s,i,a=0){super();this.name=t,this.value=n,this.type=s,this.ref=i,this.variablesRef=a}copy(){let t=super.copy();return t.name=this.name,t.value=this.value,t.type=this.type,t.ref=this.ref,t.variablesRef=this.variablesRef,t}},lt=class extends Pt{constructor(t,n){super(n);this.type=t}getAllVariables(){let t=[];return this.variables.forEach(n=>{let s=n;t.push(new Dt(s.name,s.value,s.type,s.variablesRef))}),t}},Le=class extends w.LoggingDebugSession{constructor(){super("apex-replay-debug-adapter.log");this.trace=[];this.traceAll=!1;this.breakpoints=new Map;this.setDebuggerLinesStartAt1(!0),this.setDebuggerPathFormat("uri")}initializeRequest(t,n){this.initializedResponse=t,this.initializedResponse.body={supportsConfigurationDoneRequest:!0,supportsCompletionsRequest:!1,supportsConditionalBreakpoints:!0,supportsDelayedStackTraceLoading:!1,supportsEvaluateForHovers:!1,supportsExceptionInfoRequest:!1,supportsExceptionOptions:!1,supportsFunctionBreakpoints:!1,supportsHitConditionalBreakpoints:!1,supportsLoadedSourcesRequest:!1,supportsRestartFrame:!1,supportsSetVariable:!1,supportsStepBack:!1,supportsStepInTargetsRequest:!1},this.initializedResponse.success=!0,this.sendResponse(this.initializedResponse)}launchRequest(t,n){return Me(this,null,function*(){let s=!1;n&&n.lineBreakpointInfo&&(s=!0,ke.createMappingsFromLineBreakpointInfo(n.lineBreakpointInfo),delete n.lineBreakpointInfo),this.projectPath=n.projectPath,t.success=!1,this.setupLogger(n),this.log(Kp,`launchRequest: args=${JSON.stringify(n)}`),this.logContext=new Hr(n,this),this.heapDumpService=new Wt(this.logContext),this.logContext.hasLogLines()?this.logContext.meetsLogLevelRequirements()?s?(this.printToDebugConsole(J.localize("session_started_text",this.logContext.getLogFileName())),this.projectPath&&this.logContext.scanLogForHeapDumpLines()&&!(yield this.logContext.fetchOverlayResultsForApexHeapDumps(this.projectPath))&&(t.message=J.localize("heap_dump_error_wrap_up_text"),this.errorToDebugConsole(J.localize("heap_dump_error_wrap_up_text"))),t.success=!0):t.message=J.localize("session_language_server_error_text"):t.message=J.localize("incorrect_log_levels_text"):t.message=J.localize("no_log_file_text"),this.sendResponse(t),this.sendEvent(new w.InitializedEvent),this.sendEvent(new w.Event(Ws,{logSize:this.logContext.getLogSize(),error:{subject:t.message}}))})}setupLogger(t){typeof t.trace=="boolean"?(this.trace=t.trace?[Cu]:[],this.traceAll=t.trace):typeof t.trace=="string"&&(this.trace=t.trace.split(",").map(n=>n.trim()),this.traceAll=this.trace.indexOf(Cu)>=0),this.trace&&this.trace.indexOf(Jp)>=0?w.logger.setup(w.Logger.LogLevel.Verbose,!1):w.logger.setup(w.Logger.LogLevel.Stop,!1)}configurationDoneRequest(t,n){this.logContext.getLaunchArgs().stopOnEntry?(this.logContext.updateFrames(),this.sendEvent(new w.StoppedEvent("entry",Le.THREAD_ID))):this.continueRequest({},{threadId:Le.THREAD_ID})}disconnectRequest(t,n){this.printToDebugConsole(J.localize("session_terminated_text")),t.success=!0,this.sendResponse(t)}threadsRequest(t){t.body={threads:[new w.Thread(Le.THREAD_ID,"")]},t.success=!0,this.sendResponse(t)}stackTraceRequest(t,n){t.body={stackFrames:this.logContext.getFrames().slice().reverse()},t.success=!0,this.sendResponse(t)}scopesRequest(t,n){return Me(this,null,function*(){let s=this.logContext.hasHeapDumpForTopFrame();if(s)try{this.logContext.copyStateForHeapDump(),this.heapDumpService.replaceVariablesWithHeapDump()}catch(l){this.sendEvent(new w.Event(Js,{subject:l.message,callstack:l.stack})),this.logContext.revertStateAfterHeapDump(),this.warnToDebugConsole(J.localize("reconcile_heapdump_error",l,s,s))}finally{this.logContext.resetLastSeenHeapDumpLogLine()}t.success=!0;let i=this.logContext.getFrameHandler().get(n.frameId);if(!i){t.body={scopes:[]},this.sendResponse(t);return}let a=new Array;a.push(new w.Scope("Local",this.logContext.getVariableHandler().create(new lt("local",i.locals)),!1)),a.push(new w.Scope("Static",this.logContext.getVariableHandler().create(new lt("static",i.statics)),!1)),a.push(new w.Scope("Global",this.logContext.getVariableHandler().create(new lt("global",i.globals)),!1)),t.body={scopes:a},this.sendResponse(t)})}variablesRequest(t,n){return Me(this,null,function*(){t.success=!0;let s=this.logContext.getVariableHandler().get(n.variablesReference);t.body={variables:s?s.getAllVariables():[]},this.sendResponse(t)})}evaluateRequest(t,n){t.body={result:n.expression,variablesReference:0},t.success=!0,this.sendResponse(t)}continueRequest(t,n){this.executeStep(t,3)}nextRequest(t,n){this.executeStep(t,0)}stepInRequest(t,n){this.executeStep(t,1)}stepOutRequest(t,n){this.executeStep(t,2)}executeStep(t,n){t.success=!0,this.sendResponse(t);let s=this.logContext.getNumOfFrames();for(;this.logContext.hasLogLines();){this.logContext.updateFrames();let i=this.logContext.getNumOfFrames();if(n===0&&i!==0&&i<=s||n===1&&i>=s||n===2&&i!==0&&i<s)return this.sendEvent(new w.StoppedEvent("step",Le.THREAD_ID));if(this.shouldStopForBreakpoint())return}this.sendEvent(new w.TerminatedEvent)}shouldStopForBreakpoint(){let t=this.logContext.getTopFrame();if(t&&t.source){let n=this.convertClientPathToDebugger(t.source.path),s=this.convertClientLineToDebugger(t.line);if(this.breakpoints.has(n)&&this.breakpoints.get(n).indexOf(s)!==-1)return this.sendEvent(new w.StoppedEvent("breakpoint",Le.THREAD_ID)),!0}return!1}setBreakPointsRequest(t,n){if(t.body={breakpoints:[]},n.source.path&&n.breakpoints){let s=this.convertClientPathToDebugger(n.source.path);this.log(Su,`setBreakPointsRequest: path=${n.source.path} uri=${s} lines=${ke.returnLinesForLoggingFromBreakpointArgs(n.breakpoints)}`),this.breakpoints.set(s,[]);for(let i of n.breakpoints){let a=ke.canSetLineBreakpoint(s,this.convertClientLineToDebugger(i.line));t.body.breakpoints.push({verified:a,source:n.source,line:i.line}),a&&this.breakpoints.get(s).push(this.convertClientLineToDebugger(i.line))}this.log(Su,`setBreakPointsRequest: path=${n.source.path} verified lines=${this.breakpoints.get(s).join(",")}`)}t.success=!0,this.sendResponse(t)}log(t,n){this.trace&&(this.traceAll||this.trace.indexOf(t)>=0)&&this.printToDebugConsole(`${process.pid}: ${n}`)}shouldTraceLogFile(){return this.traceAll||this.trace.indexOf(Wp)!==-1}printToDebugConsole(t,n,s,i="stdout"){if(t&&t.length!==0){let a=new w.OutputEvent(`${t}${xu.EOL}`,i);a.body.source=n,a.body.line=s,a.body.column=0,this.sendEvent(a)}}warnToDebugConsole(t,n,s){this.printToDebugConsole(t,n,s,"console")}errorToDebugConsole(t,n,s){this.printToDebugConsole(t,n,s,"stderr")}},It=Le;It.THREAD_ID=1;w.DebugSession.run(It);0&&(module.exports={ApexDebugStackFrameInfo,ApexReplayDebug,ApexVariable,ApexVariableContainer,SCOPE_TYPES,ScopeContainer,Step,VariableContainer});
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
